{"version":3,"sources":["kendo.editor.js"],"names":["f","define","$","parseFloat","parseInt","parseColor","color","nothrow","m","ret","_Color","toLowerCase","namedColorRegexp","exec","_RGB","Color","namedColors","match","_Bytes","Error","hex","n","width","pad","toString","length","hue2rgb","p","q","t","i","_HSV","_HSL","value","re","processor","parts","channels","this","formats","arguments","resolveColor","process","r","g","b","normalizeByte","prototype","toHex","padDigit","charAt","substr","replace","isNaN","brightness","round","Math","percBrightness","sqrt","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","hasOwnProperty","push","RegExp","join","kendo","Class","extend","toHSV","toRGB","toBytes","toCss","toCssRgba","rgb","a","toFixed","toDisplay","support","browser","msie","version","equals","c","diff","c2","NaN","c1","pow","clone","init","h","s","min","max","v","delta","toHSL","d","l","floor","fromBytes","fromRGB","fromHSV","fromHSL","window","jQuery","amd","a1","a2","a3","undefined","triggerEvent","self","type","_value","trigger","relative","array","element","pos","Array","slice","call","indexOf","preventDefault","ev","bind","callback","obj","apply","ui","Widget","KEYS","keys","BACKGROUNDCOLOR","ITEMSELECTEDCLASS","SIMPLEPALETTE","WEBPALETTE","APPLY_CANCEL","cancel","NS","CLICK_NS","KEYDOWN_NS","isIE8","ColorSelector","options","ariaId","that","fn","_tabIndex","attr","_ariaId","_standalone","_triggerSelect","_triggerChange","name","events","_updateUI","opacity","enable","wrapper","remove","append","_onEnable","_select","nohooks","prev","destroy","off","find","noop","_selectOnHide","_cancel","ColorPalette","colors","tileSize","height","palette","columns","split","isArray","map","x","_selectedID","guid","addClass","_template","id","on","currentTarget","css","_keydown","test","focus","removeAttr","e","selected","items","current","filter","get","keyCode","LEFT","RIGHT","DOWN","UP","ENTER","ESC","_current","ex","item","removeClass","each","template","FlatColorPicker","_hueElements","_selectedColor","_colorAsText","_sliders","_hsvArea","val","input","autoupdate","setTimeout","end","_getHSV","_applyIEFilter","_hueSlider","_opacitySlider","_hsvRect","_hsvHandle","buttons","preview","messages","track","url","currentStyle","backgroundImage","style","hueChange","opacityChange","kendoSlider","tickPlacement","showButtons","slide","change","data","update","y","offset","dx","left","dy","top","rw","rh","_svChange","hsvRect","hsvHandle","_hsvEvents","UserEvents","global","press","getOffset","location","start","move","handle","prop","shiftKey","hue","ctrlKey","F2","select","rect","handlePosition","position","dontChangeInput","ColorPicker","content","label","accesskey","hide","after","is","appendTo","closest","add","click","open","isDefaultPrevented","toggle","_popup","_selector","innerWrapper","children","arrow","toolIcon","close","ARIATemplate","_getPopup","_isInputTypeColor","el","tagName","formattedValue","_ariaTemplate","key","visible","selectorType","selector","popup","document","body","kendoPopup","anchor","adjustSize","activate","plugin","UndoRedoStack","Observable","clear","command","stack","currentCommandIndex","undo","canUndo","redo","canRedo","deepExtend","util","Tool","FormatTool","bomFill","emptyElementContent","os","mobileOS","proxy","ToolTemplate","getHtml","useWithBlock","EditorUtils","editorWrapperTemplate","buttonTemplate","colorPickerTemplate","comboBoxTemplate","dropDownListTemplate","separatorTemplate","overflowAnchorTemplate","formatByName","format","inArray","tags","registerTool","toolName","tool","toolOptions","cssClass","Editor","defaultTools","registerFormat","formatName","bold","italic","underline","strikethrough","superscript","subscript","justifyCenter","justifyLeft","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent","createLink","unlink","insertImage","insertFile","insertHtml","viewHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","foreColor","backColor","emptyFolder","editAreaTitle","uploadFile","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogCancel","createTable","createTableHint","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","supportedBrowser","ios","flatVersion","documentElement","contentEditable","toolGroups","basic","alignment","lists","indenting","links","tables","toolbarContainer","toolbarOptions","domElement","editorNS","editor","dom","Dom","tools","_registerHandler","_wrapTextarea","insertBefore","toolbar","Toolbar","bindTo","heightStyle","expectedHeight","actualHeight","_resizable","_initializeContentElement","keyboard","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","clipboard","Clipboard","undoRedoStack","textarea","encoded","trim","defaultValue","innerHTML","mousedown","_endTyping","mouseup","_mouseup","resize","notify","setOptions","isTypingInProgress","endTyping","saveSelection","_selectionChange","_selectionStarted","resizable","isResizable","isPlainObject","insertAfter","kendoResizable","initialSize","initialDelta","newSize","Infinity","resizeend","w","editorWrap","editArea","_createContentElement","stylesheets","iframe","wnd","doc","specifiedDomain","domain","domainScript","src","hostname","title","frameBorder","tabIndex","contentWindow","contentDocument","one","decorateFrom","write","isRtl","href","_blur","old","_oldValue","encodedValue","_spellCorrect","beforeCorrection","falseTrigger","contextmenu","_spellCorrectTimeout","RestorePoint","getRange","mozilla","_finishUpdate","handler","_handlers","_deregisterHandlers","handlers","blurTrigger","execCommand","touch","selectionchange","keydown","_activeElement","dragstart","range","container","direction","BACKSPACE","DELETE","getAttribute","F10","nodeType","nodeValue","setStart","collapse","selectRange","toolFromShortcut","keyPressCommand","_runPostContentKeyCommands","clearTimeout","keypress","keyup","selectionCodes","altKey","gecko","target","which","createRange","selectNode","cut copy paste","focusin","hasAttribute","show","focusout","active","contains","focused","o","cmd","toolsFromShortcut","changesContent","refresh","deserialization","custom","serialization","entities","semantic","scripts","pasteCleanup","all","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","dialogOptions","modal","draggable","animation","imageBrowser","fileBrowser","text","concat","_focusOutside","tempInput","blur","state","textNodes","finder","RangeUtils","collapsed","startContainer","getFormat","isFormatted","html","currentHtml","Serializer","domToXhtml","htmlToDom","selectionRestorePoint","refreshTools","commonAncestorContainer","_focusBody","scrollTop","activeElement","restoreSelection","toRange","encode","getSelection","SelectionUtils","selectionFromDocument","selection","removeAllRanges","addRange","rangeCount","getRangeAt","endContainer","startOffset","endOffset","selectedHtml","cloneContents","paste","InsertHtmlCommand","params","prevented","toolById","managesUndoRedo","async","ctrl","initialize","unselectable","commandArguments","FormatCommand","formatter","nodes","toggleClass","_bomFill","PDFMixin","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","forceProxy","resolve","fail","err","reject","makeMap","len","whitespace","emptyspace","bom","whitespaceOrBom","persistedScrollTop","cssAttributes","htmlRe","entityRe","entityTable","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","empty","nonListBlockElements","blockElements","block","inlineElements","inline","fillAttrs","normalize","node","parent","firstChild","nextSibling",34,38,39,60,62,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,402,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,977,978,982,8226,8230,8242,8243,8254,8260,8472,8465,8476,8482,8501,8592,8593,8594,8595,8596,8629,8656,8657,8658,8659,8660,8704,8706,8707,8709,8711,8712,8713,8715,8719,8721,8722,8727,8730,8733,8734,8736,8743,8744,8745,8746,8747,8756,8764,8773,8776,8800,8801,8804,8805,8834,8835,8836,8838,8839,8853,8855,8869,8901,8968,8969,8970,8971,9001,9002,9674,9824,9827,9829,9830,338,339,352,353,376,710,732,8194,8195,8201,8204,8205,8206,8207,8211,8212,8216,8217,8218,8220,8221,8222,8224,8225,8240,8249,8250,8364,"findNodeIndex","skipText","previousSibling","isDataNode","isAncestorOf","parentNode","isAncestorOrSelf","findClosestAncestor","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","iterator","deleteData","attrEquals","attributes","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","blocks","windowFromDocument","defaultView","parentWindow","matches","encodableChars","charCode","charCodeAt","entity","stripBom","stripBomNode","removeChild","insignificant","className","_moz_dirty","_moz_editor_bogus_node","significantNodes","grep","child","emptyNode","nodeName","significantChildNodes","isWhitespace","lastTextNode","result","lastChild","isMarker","isEmptyspace","isBlock","isEmpty","isInline","scrollContainer","webkit","compatMode","scrollTo","elementTop","elementHeight","windowHeight","innerHeight","offsetHeight","ceil","persistScrollTop","restoreScrollTop","insertAt","newElement","referenceElement","removeTextSiblings","tag","sibling","next","ofType","changeTag","skipAttributes","attribute","create","specified","cssText","setAttribute","appendChild","editableParent","wrap","unwrap","createElement","removeAttribute","unstyle","inlineStyle","getEffectiveBackground","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","first","j","count","paths","minPathLength","output","reverse","closestSplittableParent","editableParents","editableAncestor","closestEditable","types","editable","closestEditableOfType","invert","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","supportsLeadingWhitespace","isFunction","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","div","toEditableHtml","_fillEmptyElements","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","getElementsByTagName","_preventScriptExecution","legacyIE","originalSrc","originalHref","semanticFilter","cssProperties","property","properties","lastIndex","styleAttr","specifiedAttributes","$node","sort","htmlEncode","skip","skipEncoding","childNode","isEmptyBomNode","mapper","previous","tagMap","textOnly","childrenCount","textChild","runCustom","k:script","font","size","semanticAttributes","textDecoration","fontFamily","strong","em","u","face","script","compareBoundaries","startAncestor","endAncestor","fixIvalidRange","toStart","isInvalidRange","updateRangeProperties","textRangeContainer","textRange","duplicate","right","parentElement","adoptContainer","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","createTextRange","moveToElementText","setEndPoint","adoptEndPoint","index","comparison","appended","compareEndPoints","RangeIterator","W3CSelection","RangeEnumerator","Marker","boundary","selectionFromWindow","selectionFromRange","rangeDocument","documentFromRange","W3CRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","fromNode","_next","_end","hasNext","traverse","nodeIndex","inStartContainer","inEndContainer","subRange","movedStart","movedEnd","enumerate","visit","rootNode","getEditable","nodeToPath","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","caret","addCaret","removeCaret","containerIndex","textNode","expand","rangeBoundary","isExpandable","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","shouldNormalize","collapsedToStart","startParent","endParent","startIndex","endIndex","image","stringify","partition","contents","partitionRange","mapAll","mapped","getAll","predicate","getMarkers","isStartOf","isEndOf","wrapSelectedElements","isEnd","startEditable","endEditable","beforeCaret","afterCaret","search","substring","finishUpdate","startRestorePoint","endRestorePoint","GenericCommand","Command","restorePoint","marker","lockRange","releaseRange","point","createDialog","kendoWindow","genericCommand","postProcess","InsertHtmlTool","initOptions","dataSource","_selectBox","SelectBox","dataTextField","dataValueField","highlightFirst","selectbox","isTypingKey","evt","Event","startTyping","_addCaret","_restoreCaret","_handleDelete","_merge","_cleanBomBefore","_handleBackspace","li","ListFormatter","_handleSelection","ancestor","table","emptyParagraphContent","_join","_root","dest","method","backspace","del","systemCommandIsInProgress","createUndoCommand","changed","isModifierKey","isSystem","typingInProgress","isCharacter","String","fromCharCode","alt","shift","matchesKey","found","matchKey","toolKey","onEndTyping","stopTyping","force","timeout","what","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","fragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","before","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","onload","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","images","originalEvent","files","when","results","onpaste","clipboardRange","clipboardNode","unbind","containers","clean","splittableParent","splittable","fragmentsHtml","rangeEnd","applicable","display","Cleaner","replacements","customReplacements","replacement","junkReplacements","convertFontMatch","$0","$1","closing","faceRe","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","extractListLevels","msoListRegExp","list","level","placeholder","rootMargin","listContainer","margin","listIndex","levelType","blockChildren","lastMargin","levels","marginLeft","listStyleType","removeAttributes","removeAttributeNode","createColGroup","row","cells","colgroup","cell","prependTo","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeDefaultColors","spans","rows","firstRow","longestRow","eq","headers","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","action","actions","ul","thead","tbody","td","cleaner","tdCleaner","cellText","PrintCommand","print","ExportPdfCommand","initialValue","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","values","formatNode","formatNodes","consolidate","last","pop","GreedyInlineFormatFinder","greedyProperty","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parents","parentsUntil","addBack","toArray","GreedyInlineFormatter","toCamelCase","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","ColorTool","_widget","fontWeight","fontStyle","listElements","BlockFormatFinder","candidate","suitable","BlockFormatter","nonImages","imageFormat","imageAttributes","namedFormat","GreedyBlockFormatter","formatTag","BlockFormatTool","textAlign","float","marginRight","listStylePosition","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","rng","siblings","NewLineCommand","filler","oldIE","ListFormatFinder","unwrapTag","isList","containsAny","_parentLists","merge","breakable","applyOnSection","section","pushAncestor","lastSection","lastNodes","sections","ListCommand","ListTool","lastIndexOfRegExp","str","indexOfRegExp","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","ref","UnlinkCommand","LinkCommand","_dialogTemplate","img","dialog","_initialText","_range","_close","_apply","linkUrl","_dialog","center","textInput","AutoLinkCommand","linkMarker","linkRange","detectedLink","detectLink","_ensureWebProtocol","traverser","LeftDomTextTraverser","cancelAtNode","detection","DomTextLinkDetection","hasProtocol","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","DomPos","puntuationOptions","puntuationTraverser","_detectEnd","blank","_detectStart","_isLinkDetected","extendOptions","RightDomTextTraverser","_skipStartPuntuation","ii","DomTextTraverser","_traverse","edgeNode","subText","splitIndex","SPACEBAR","KEDITORFILEURL","KEDITORFILETITLE","FileCommand","file","showBrowser","applied","keyDown","FileBrowser","transport","read","_fileBrowser","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onerror","ImageBrowser","_imageBrowser","DropDownList","_initSelectOverlay","autoSize","listWidth","whiteSpace","_listWidth","scrollbar","selectBox","view","decorate","indentDirection","IndentFormatter","parentList","siblingList","nestedList","targetIndex","targets","splice","targetNode","listParent","nextAll","IndentCommand","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","ViewHtmlCommand","unwrapListItem","listFormatter","FormattingTool","toFormattingItem","dot","context","kendoSelectBox","dataItem","toJSON","dataBound","getFormattingValue","_ancestor","field","operator","CleanFormatCommand","tagsToClean","OVERFLOWANCHOR","focusable","OverflowAnchorTool","overflowPopup","_initPopup","_resizeHandler","onResize","groups","advanced","fonts","overflowFlaseTools","prepend","dragHandle","effects","minHeight","autoFocus","dragend","_moved","_toggleOverflowStyles","_initOverflowPopup","popupTemplate","origin","copyAnchorStyles","focusOverflowPopup","toolGroupFor","isCustomTool","_editor","expandTools","render","combobox","dropDown","isOpened","stopImmediatePropagation","_attachEvents","inheritText","_toolName","overflowAnchor","description","tooltip","_appendShortcutSequence","editorElement","editorOffset","editorOptions","outerWidth","outerHeight","TABINDEX","localizedText","res","_nativeTools","currentTool","nativeTools","endGroup","group","groupPosition","startGroup","toolElement","groupName","newGroupName","toolConfig","hasClass","updateGroups","angular","unbindResize","enabledButtons","disabledButtons","popupElement","constrain","focusElement","currentContainer","TAB","button","stopPropagation","lastIndexOf","_resize","containerWidth","_refreshWidths","_shrink","_stretch","idx","visibleGroups","_groupsWidth","_visibleGroups","_hideGroup","hiddenGroups","_hiddenGroups","_showGroup","detach","ACTIVESTATE","SELECTEDSTATE","editableCell","tableFormatFinder","TableCommand","_tableHtml","insertedTable","PopupTool","_open","_activate","_toggle","InsertTableTool","cols","tableFromLocation","clientY","cellHeight","col","clientX","scrollLeft","cellWidth","firstCell","lastCell","offsetWidth","_setTableSize","_exec","_valid","status","selectedRows","selectedColumns","tableSize","InsertRowCommand","cellCount","newRow","InsertColumnCommand","columnIndex","newCell","DeleteRowCommand","DeleteColumnCommand","columnCount","TableModificationTool"],"mappings":"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","file":"kendo.editor.min.js","sourcesContent":["/** \n * Kendo UI v2016.3.1118 (http://www.telerik.com/kendo-ui)                                                                                                                                              \n * Copyright 2016 Telerik AD. All rights reserved.                                                                                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.color', ['kendo.core'], f);\n}(function () {\n    var __meta__ = {\n        id: 'color',\n        name: 'Color utils',\n        category: 'framework',\n        advanced: true,\n        description: 'Color utilities used across components',\n        depends: ['core']\n    };\n    (function ($, parseFloat, parseInt) {\n        var Color = function (value) {\n            var color = this, formats = Color.formats, re, processor, parts, i, channels;\n            if (arguments.length === 1) {\n                value = color.resolveColor(value);\n                for (i = 0; i < formats.length; i++) {\n                    re = formats[i].re;\n                    processor = formats[i].process;\n                    parts = re.exec(value);\n                    if (parts) {\n                        channels = processor(parts);\n                        color.r = channels[0];\n                        color.g = channels[1];\n                        color.b = channels[2];\n                    }\n                }\n            } else {\n                color.r = arguments[0];\n                color.g = arguments[1];\n                color.b = arguments[2];\n            }\n            color.r = color.normalizeByte(color.r);\n            color.g = color.normalizeByte(color.g);\n            color.b = color.normalizeByte(color.b);\n        };\n        Color.prototype = {\n            toHex: function () {\n                var color = this, pad = color.padDigit, r = color.r.toString(16), g = color.g.toString(16), b = color.b.toString(16);\n                return '#' + pad(r) + pad(g) + pad(b);\n            },\n            resolveColor: function (value) {\n                value = value || 'black';\n                if (value.charAt(0) == '#') {\n                    value = value.substr(1, 6);\n                }\n                value = value.replace(/ /g, '');\n                value = value.toLowerCase();\n                value = Color.namedColors[value] || value;\n                return value;\n            },\n            normalizeByte: function (value) {\n                return value < 0 || isNaN(value) ? 0 : value > 255 ? 255 : value;\n            },\n            padDigit: function (value) {\n                return value.length === 1 ? '0' + value : value;\n            },\n            brightness: function (value) {\n                var color = this, round = Math.round;\n                color.r = round(color.normalizeByte(color.r * value));\n                color.g = round(color.normalizeByte(color.g * value));\n                color.b = round(color.normalizeByte(color.b * value));\n                return color;\n            },\n            percBrightness: function () {\n                var color = this;\n                return Math.sqrt(0.241 * color.r * color.r + 0.691 * color.g * color.g + 0.068 * color.b * color.b);\n            }\n        };\n        Color.formats = [\n            {\n                re: /^rgb\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)$/,\n                process: function (parts) {\n                    return [\n                        parseInt(parts[1], 10),\n                        parseInt(parts[2], 10),\n                        parseInt(parts[3], 10)\n                    ];\n                }\n            },\n            {\n                re: /^(\\w{2})(\\w{2})(\\w{2})$/,\n                process: function (parts) {\n                    return [\n                        parseInt(parts[1], 16),\n                        parseInt(parts[2], 16),\n                        parseInt(parts[3], 16)\n                    ];\n                }\n            },\n            {\n                re: /^(\\w{1})(\\w{1})(\\w{1})$/,\n                process: function (parts) {\n                    return [\n                        parseInt(parts[1] + parts[1], 16),\n                        parseInt(parts[2] + parts[2], 16),\n                        parseInt(parts[3] + parts[3], 16)\n                    ];\n                }\n            }\n        ];\n        Color.namedColors = {\n            aliceblue: 'f0f8ff',\n            antiquewhite: 'faebd7',\n            aqua: '00ffff',\n            aquamarine: '7fffd4',\n            azure: 'f0ffff',\n            beige: 'f5f5dc',\n            bisque: 'ffe4c4',\n            black: '000000',\n            blanchedalmond: 'ffebcd',\n            blue: '0000ff',\n            blueviolet: '8a2be2',\n            brown: 'a52a2a',\n            burlywood: 'deb887',\n            cadetblue: '5f9ea0',\n            chartreuse: '7fff00',\n            chocolate: 'd2691e',\n            coral: 'ff7f50',\n            cornflowerblue: '6495ed',\n            cornsilk: 'fff8dc',\n            crimson: 'dc143c',\n            cyan: '00ffff',\n            darkblue: '00008b',\n            darkcyan: '008b8b',\n            darkgoldenrod: 'b8860b',\n            darkgray: 'a9a9a9',\n            darkgrey: 'a9a9a9',\n            darkgreen: '006400',\n            darkkhaki: 'bdb76b',\n            darkmagenta: '8b008b',\n            darkolivegreen: '556b2f',\n            darkorange: 'ff8c00',\n            darkorchid: '9932cc',\n            darkred: '8b0000',\n            darksalmon: 'e9967a',\n            darkseagreen: '8fbc8f',\n            darkslateblue: '483d8b',\n            darkslategray: '2f4f4f',\n            darkslategrey: '2f4f4f',\n            darkturquoise: '00ced1',\n            darkviolet: '9400d3',\n            deeppink: 'ff1493',\n            deepskyblue: '00bfff',\n            dimgray: '696969',\n            dimgrey: '696969',\n            dodgerblue: '1e90ff',\n            firebrick: 'b22222',\n            floralwhite: 'fffaf0',\n            forestgreen: '228b22',\n            fuchsia: 'ff00ff',\n            gainsboro: 'dcdcdc',\n            ghostwhite: 'f8f8ff',\n            gold: 'ffd700',\n            goldenrod: 'daa520',\n            gray: '808080',\n            grey: '808080',\n            green: '008000',\n            greenyellow: 'adff2f',\n            honeydew: 'f0fff0',\n            hotpink: 'ff69b4',\n            indianred: 'cd5c5c',\n            indigo: '4b0082',\n            ivory: 'fffff0',\n            khaki: 'f0e68c',\n            lavender: 'e6e6fa',\n            lavenderblush: 'fff0f5',\n            lawngreen: '7cfc00',\n            lemonchiffon: 'fffacd',\n            lightblue: 'add8e6',\n            lightcoral: 'f08080',\n            lightcyan: 'e0ffff',\n            lightgoldenrodyellow: 'fafad2',\n            lightgray: 'd3d3d3',\n            lightgrey: 'd3d3d3',\n            lightgreen: '90ee90',\n            lightpink: 'ffb6c1',\n            lightsalmon: 'ffa07a',\n            lightseagreen: '20b2aa',\n            lightskyblue: '87cefa',\n            lightslategray: '778899',\n            lightslategrey: '778899',\n            lightsteelblue: 'b0c4de',\n            lightyellow: 'ffffe0',\n            lime: '00ff00',\n            limegreen: '32cd32',\n            linen: 'faf0e6',\n            magenta: 'ff00ff',\n            maroon: '800000',\n            mediumaquamarine: '66cdaa',\n            mediumblue: '0000cd',\n            mediumorchid: 'ba55d3',\n            mediumpurple: '9370d8',\n            mediumseagreen: '3cb371',\n            mediumslateblue: '7b68ee',\n            mediumspringgreen: '00fa9a',\n            mediumturquoise: '48d1cc',\n            mediumvioletred: 'c71585',\n            midnightblue: '191970',\n            mintcream: 'f5fffa',\n            mistyrose: 'ffe4e1',\n            moccasin: 'ffe4b5',\n            navajowhite: 'ffdead',\n            navy: '000080',\n            oldlace: 'fdf5e6',\n            olive: '808000',\n            olivedrab: '6b8e23',\n            orange: 'ffa500',\n            orangered: 'ff4500',\n            orchid: 'da70d6',\n            palegoldenrod: 'eee8aa',\n            palegreen: '98fb98',\n            paleturquoise: 'afeeee',\n            palevioletred: 'd87093',\n            papayawhip: 'ffefd5',\n            peachpuff: 'ffdab9',\n            peru: 'cd853f',\n            pink: 'ffc0cb',\n            plum: 'dda0dd',\n            powderblue: 'b0e0e6',\n            purple: '800080',\n            red: 'ff0000',\n            rosybrown: 'bc8f8f',\n            royalblue: '4169e1',\n            saddlebrown: '8b4513',\n            salmon: 'fa8072',\n            sandybrown: 'f4a460',\n            seagreen: '2e8b57',\n            seashell: 'fff5ee',\n            sienna: 'a0522d',\n            silver: 'c0c0c0',\n            skyblue: '87ceeb',\n            slateblue: '6a5acd',\n            slategray: '708090',\n            slategrey: '708090',\n            snow: 'fffafa',\n            springgreen: '00ff7f',\n            steelblue: '4682b4',\n            tan: 'd2b48c',\n            teal: '008080',\n            thistle: 'd8bfd8',\n            tomato: 'ff6347',\n            turquoise: '40e0d0',\n            violet: 'ee82ee',\n            wheat: 'f5deb3',\n            white: 'ffffff',\n            whitesmoke: 'f5f5f5',\n            yellow: 'ffff00',\n            yellowgreen: '9acd32'\n        };\n        var namedColorRegexp = ['transparent'];\n        for (var i in Color.namedColors) {\n            if (Color.namedColors.hasOwnProperty(i)) {\n                namedColorRegexp.push(i);\n            }\n        }\n        namedColorRegexp = new RegExp('^(' + namedColorRegexp.join('|') + ')(\\\\W|$)', 'i');\n        function parseColor(color, nothrow) {\n            var m, ret;\n            if (color == null || color == 'none') {\n                return null;\n            }\n            if (color instanceof _Color) {\n                return color;\n            }\n            color = color.toLowerCase();\n            if (m = namedColorRegexp.exec(color)) {\n                if (m[1] == 'transparent') {\n                    color = new _RGB(1, 1, 1, 0);\n                } else {\n                    color = parseColor(Color.namedColors[m[1]], nothrow);\n                }\n                color.match = [m[1]];\n                return color;\n            }\n            if (m = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\\b/i.exec(color)) {\n                ret = new _Bytes(parseInt(m[1], 16), parseInt(m[2], 16), parseInt(m[3], 16), 1);\n            } else if (m = /^#?([0-9a-f])([0-9a-f])([0-9a-f])\\b/i.exec(color)) {\n                ret = new _Bytes(parseInt(m[1] + m[1], 16), parseInt(m[2] + m[2], 16), parseInt(m[3] + m[3], 16), 1);\n            } else if (m = /^rgb\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/.exec(color)) {\n                ret = new _Bytes(parseInt(m[1], 10), parseInt(m[2], 10), parseInt(m[3], 10), 1);\n            } else if (m = /^rgba\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9.]+)\\s*\\)/.exec(color)) {\n                ret = new _Bytes(parseInt(m[1], 10), parseInt(m[2], 10), parseInt(m[3], 10), parseFloat(m[4]));\n            } else if (m = /^rgb\\(\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*\\)/.exec(color)) {\n                ret = new _RGB(parseFloat(m[1]) / 100, parseFloat(m[2]) / 100, parseFloat(m[3]) / 100, 1);\n            } else if (m = /^rgba\\(\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9.]+)\\s*\\)/.exec(color)) {\n                ret = new _RGB(parseFloat(m[1]) / 100, parseFloat(m[2]) / 100, parseFloat(m[3]) / 100, parseFloat(m[4]));\n            }\n            if (ret) {\n                ret.match = m;\n            } else if (!nothrow) {\n                throw new Error('Cannot parse color: ' + color);\n            }\n            return ret;\n        }\n        function hex(n, width, pad) {\n            if (!pad) {\n                pad = '0';\n            }\n            n = n.toString(16);\n            while (width > n.length) {\n                n = '0' + n;\n            }\n            return n;\n        }\n        function hue2rgb(p, q, t) {\n            if (t < 0) {\n                t += 1;\n            }\n            if (t > 1) {\n                t -= 1;\n            }\n            if (t < 1 / 6) {\n                return p + (q - p) * 6 * t;\n            }\n            if (t < 1 / 2) {\n                return q;\n            }\n            if (t < 2 / 3) {\n                return p + (q - p) * (2 / 3 - t) * 6;\n            }\n            return p;\n        }\n        var _Color = kendo.Class.extend({\n            toHSV: function () {\n                return this;\n            },\n            toRGB: function () {\n                return this;\n            },\n            toHex: function () {\n                return this.toBytes().toHex();\n            },\n            toBytes: function () {\n                return this;\n            },\n            toCss: function () {\n                return '#' + this.toHex();\n            },\n            toCssRgba: function () {\n                var rgb = this.toBytes();\n                return 'rgba(' + rgb.r + ', ' + rgb.g + ', ' + rgb.b + ', ' + parseFloat((+this.a).toFixed(3)) + ')';\n            },\n            toDisplay: function () {\n                if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\n                    return this.toCss();\n                }\n                return this.toCssRgba();\n            },\n            equals: function (c) {\n                return c === this || c !== null && this.toCssRgba() == parseColor(c).toCssRgba();\n            },\n            diff: function (c2) {\n                if (c2 == null) {\n                    return NaN;\n                }\n                var c1 = this.toBytes();\n                c2 = c2.toBytes();\n                return Math.sqrt(Math.pow((c1.r - c2.r) * 0.3, 2) + Math.pow((c1.g - c2.g) * 0.59, 2) + Math.pow((c1.b - c2.b) * 0.11, 2));\n            },\n            clone: function () {\n                var c = this.toBytes();\n                if (c === this) {\n                    c = new _Bytes(c.r, c.g, c.b, c.a);\n                }\n                return c;\n            }\n        });\n        var _RGB = _Color.extend({\n            init: function (r, g, b, a) {\n                this.r = r;\n                this.g = g;\n                this.b = b;\n                this.a = a;\n            },\n            toHSV: function () {\n                var min, max, delta, h, s, v;\n                var r = this.r, g = this.g, b = this.b;\n                min = Math.min(r, g, b);\n                max = Math.max(r, g, b);\n                v = max;\n                delta = max - min;\n                if (delta === 0) {\n                    return new _HSV(0, 0, v, this.a);\n                }\n                if (max !== 0) {\n                    s = delta / max;\n                    if (r == max) {\n                        h = (g - b) / delta;\n                    } else if (g == max) {\n                        h = 2 + (b - r) / delta;\n                    } else {\n                        h = 4 + (r - g) / delta;\n                    }\n                    h *= 60;\n                    if (h < 0) {\n                        h += 360;\n                    }\n                } else {\n                    s = 0;\n                    h = -1;\n                }\n                return new _HSV(h, s, v, this.a);\n            },\n            toHSL: function () {\n                var r = this.r, g = this.g, b = this.b;\n                var max = Math.max(r, g, b), min = Math.min(r, g, b);\n                var h, s, l = (max + min) / 2;\n                if (max == min) {\n                    h = s = 0;\n                } else {\n                    var d = max - min;\n                    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n                    switch (max) {\n                    case r:\n                        h = (g - b) / d + (g < b ? 6 : 0);\n                        break;\n                    case g:\n                        h = (b - r) / d + 2;\n                        break;\n                    case b:\n                        h = (r - g) / d + 4;\n                        break;\n                    }\n                    h *= 60;\n                    s *= 100;\n                    l *= 100;\n                }\n                return new _HSL(h, s, l, this.a);\n            },\n            toBytes: function () {\n                return new _Bytes(this.r * 255, this.g * 255, this.b * 255, this.a);\n            }\n        });\n        var _Bytes = _RGB.extend({\n            init: function (r, g, b, a) {\n                this.r = Math.round(r);\n                this.g = Math.round(g);\n                this.b = Math.round(b);\n                this.a = a;\n            },\n            toRGB: function () {\n                return new _RGB(this.r / 255, this.g / 255, this.b / 255, this.a);\n            },\n            toHSV: function () {\n                return this.toRGB().toHSV();\n            },\n            toHSL: function () {\n                return this.toRGB().toHSL();\n            },\n            toHex: function () {\n                return hex(this.r, 2) + hex(this.g, 2) + hex(this.b, 2);\n            },\n            toBytes: function () {\n                return this;\n            }\n        });\n        var _HSV = _Color.extend({\n            init: function (h, s, v, a) {\n                this.h = h;\n                this.s = s;\n                this.v = v;\n                this.a = a;\n            },\n            toRGB: function () {\n                var h = this.h, s = this.s, v = this.v;\n                var i, r, g, b, f, p, q, t;\n                if (s === 0) {\n                    r = g = b = v;\n                } else {\n                    h /= 60;\n                    i = Math.floor(h);\n                    f = h - i;\n                    p = v * (1 - s);\n                    q = v * (1 - s * f);\n                    t = v * (1 - s * (1 - f));\n                    switch (i) {\n                    case 0:\n                        r = v;\n                        g = t;\n                        b = p;\n                        break;\n                    case 1:\n                        r = q;\n                        g = v;\n                        b = p;\n                        break;\n                    case 2:\n                        r = p;\n                        g = v;\n                        b = t;\n                        break;\n                    case 3:\n                        r = p;\n                        g = q;\n                        b = v;\n                        break;\n                    case 4:\n                        r = t;\n                        g = p;\n                        b = v;\n                        break;\n                    default:\n                        r = v;\n                        g = p;\n                        b = q;\n                        break;\n                    }\n                }\n                return new _RGB(r, g, b, this.a);\n            },\n            toHSL: function () {\n                return this.toRGB().toHSL();\n            },\n            toBytes: function () {\n                return this.toRGB().toBytes();\n            }\n        });\n        var _HSL = _Color.extend({\n            init: function (h, s, l, a) {\n                this.h = h;\n                this.s = s;\n                this.l = l;\n                this.a = a;\n            },\n            toRGB: function () {\n                var h = this.h, s = this.s, l = this.l;\n                var r, g, b;\n                if (s === 0) {\n                    r = g = b = l;\n                } else {\n                    h /= 360;\n                    s /= 100;\n                    l /= 100;\n                    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n                    var p = 2 * l - q;\n                    r = hue2rgb(p, q, h + 1 / 3);\n                    g = hue2rgb(p, q, h);\n                    b = hue2rgb(p, q, h - 1 / 3);\n                }\n                return new _RGB(r, g, b, this.a);\n            },\n            toHSV: function () {\n                return this.toRGB().toHSV();\n            },\n            toBytes: function () {\n                return this.toRGB().toBytes();\n            }\n        });\n        Color.fromBytes = function (r, g, b, a) {\n            return new _Bytes(r, g, b, a != null ? a : 1);\n        };\n        Color.fromRGB = function (r, g, b, a) {\n            return new _RGB(r, g, b, a != null ? a : 1);\n        };\n        Color.fromHSV = function (h, s, v, a) {\n            return new _HSV(h, s, v, a != null ? a : 1);\n        };\n        Color.fromHSL = function (h, s, l, a) {\n            return new _HSL(h, s, l, a != null ? a : 1);\n        };\n        kendo.Color = Color;\n        kendo.parseColor = parseColor;\n    }(window.kendo.jQuery, parseFloat, parseInt));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n/** \n * Kendo UI v2016.3.1118 (http://www.telerik.com/kendo-ui)                                                                                                                                              \n * Copyright 2016 Telerik AD. All rights reserved.                                                                                                                                                      \n *                                                                                                                                                                                                      \n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.colorpicker', [\n        'kendo.core',\n        'kendo.color',\n        'kendo.popup',\n        'kendo.slider',\n        'kendo.userevents'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'colorpicker',\n        name: 'Color tools',\n        category: 'web',\n        description: 'Color selection widgets',\n        depends: [\n            'core',\n            'color',\n            'popup',\n            'slider',\n            'userevents'\n        ]\n    };\n    (function ($, parseInt, undefined) {\n        var kendo = window.kendo, ui = kendo.ui, Widget = ui.Widget, parseColor = kendo.parseColor, Color = kendo.Color, KEYS = kendo.keys, BACKGROUNDCOLOR = 'background-color', ITEMSELECTEDCLASS = 'k-state-selected', SIMPLEPALETTE = '000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7', WEBPALETTE = 'FFFFFF,FFCCFF,FF99FF,FF66FF,FF33FF,FF00FF,CCFFFF,CCCCFF,CC99FF,CC66FF,CC33FF,CC00FF,99FFFF,99CCFF,9999FF,9966FF,9933FF,9900FF,FFFFCC,FFCCCC,FF99CC,FF66CC,FF33CC,FF00CC,CCFFCC,CCCCCC,CC99CC,CC66CC,CC33CC,CC00CC,99FFCC,99CCCC,9999CC,9966CC,9933CC,9900CC,FFFF99,FFCC99,FF9999,FF6699,FF3399,FF0099,CCFF99,CCCC99,CC9999,CC6699,CC3399,CC0099,99FF99,99CC99,999999,996699,993399,990099,FFFF66,FFCC66,FF9966,FF6666,FF3366,FF0066,CCFF66,CCCC66,CC9966,CC6666,CC3366,CC0066,99FF66,99CC66,999966,996666,993366,990066,FFFF33,FFCC33,FF9933,FF6633,FF3333,FF0033,CCFF33,CCCC33,CC9933,CC6633,CC3333,CC0033,99FF33,99CC33,999933,996633,993333,990033,FFFF00,FFCC00,FF9900,FF6600,FF3300,FF0000,CCFF00,CCCC00,CC9900,CC6600,CC3300,CC0000,99FF00,99CC00,999900,996600,993300,990000,66FFFF,66CCFF,6699FF,6666FF,6633FF,6600FF,33FFFF,33CCFF,3399FF,3366FF,3333FF,3300FF,00FFFF,00CCFF,0099FF,0066FF,0033FF,0000FF,66FFCC,66CCCC,6699CC,6666CC,6633CC,6600CC,33FFCC,33CCCC,3399CC,3366CC,3333CC,3300CC,00FFCC,00CCCC,0099CC,0066CC,0033CC,0000CC,66FF99,66CC99,669999,666699,663399,660099,33FF99,33CC99,339999,336699,333399,330099,00FF99,00CC99,009999,006699,003399,000099,66FF66,66CC66,669966,666666,663366,660066,33FF66,33CC66,339966,336666,333366,330066,00FF66,00CC66,009966,006666,003366,000066,66FF33,66CC33,669933,666633,663333,660033,33FF33,33CC33,339933,336633,333333,330033,00FF33,00CC33,009933,006633,003333,000033,66FF00,66CC00,669900,666600,663300,660000,33FF00,33CC00,339900,336600,333300,330000,00FF00,00CC00,009900,006600,003300,000000', APPLY_CANCEL = {\n                apply: 'Apply',\n                cancel: 'Cancel'\n            }, NS = '.kendoColorTools', CLICK_NS = 'click' + NS, KEYDOWN_NS = 'keydown' + NS, browser = kendo.support.browser, isIE8 = browser.msie && browser.version < 9;\n        var ColorSelector = Widget.extend({\n            init: function (element, options) {\n                var that = this, ariaId;\n                Widget.fn.init.call(that, element, options);\n                element = that.element;\n                options = that.options;\n                that._value = options.value = parseColor(options.value);\n                that._tabIndex = element.attr('tabIndex') || 0;\n                ariaId = that._ariaId = options.ariaId;\n                if (ariaId) {\n                    element.attr('aria-labelledby', ariaId);\n                }\n                if (options._standalone) {\n                    that._triggerSelect = that._triggerChange;\n                }\n            },\n            options: {\n                name: 'ColorSelector',\n                value: null,\n                _standalone: true\n            },\n            events: [\n                'change',\n                'select',\n                'cancel'\n            ],\n            color: function (value) {\n                if (value !== undefined) {\n                    this._value = parseColor(value);\n                    this._updateUI(this._value);\n                }\n                return this._value;\n            },\n            value: function (color) {\n                color = this.color(color);\n                if (color) {\n                    if (this.options.opacity) {\n                        color = color.toCssRgba();\n                    } else {\n                        color = color.toCss();\n                    }\n                }\n                return color || null;\n            },\n            enable: function (enable) {\n                if (arguments.length === 0) {\n                    enable = true;\n                }\n                $('.k-disabled-overlay', this.wrapper).remove();\n                if (!enable) {\n                    this.wrapper.append('<div class=\\'k-disabled-overlay\\'></div>');\n                }\n                this._onEnable(enable);\n            },\n            _select: function (color, nohooks) {\n                var prev = this._value;\n                color = this.color(color);\n                if (!nohooks) {\n                    this.element.trigger('change');\n                    if (!color.equals(prev)) {\n                        this.trigger('change', { value: this.value() });\n                    } else if (!this._standalone) {\n                        this.trigger('cancel');\n                    }\n                }\n            },\n            _triggerSelect: function (color) {\n                triggerEvent(this, 'select', color);\n            },\n            _triggerChange: function (color) {\n                triggerEvent(this, 'change', color);\n            },\n            destroy: function () {\n                if (this.element) {\n                    this.element.off(NS);\n                }\n                if (this.wrapper) {\n                    this.wrapper.off(NS).find('*').off(NS);\n                }\n                this.wrapper = null;\n                Widget.fn.destroy.call(this);\n            },\n            _updateUI: $.noop,\n            _selectOnHide: function () {\n                return null;\n            },\n            _cancel: function () {\n                this.trigger('cancel');\n            }\n        });\n        function triggerEvent(self, type, color) {\n            color = parseColor(color);\n            if (color && !color.equals(self.color())) {\n                if (type == 'change') {\n                    self._value = color;\n                }\n                if (color.a != 1) {\n                    color = color.toCssRgba();\n                } else {\n                    color = color.toCss();\n                }\n                self.trigger(type, { value: color });\n            }\n        }\n        var ColorPalette = ColorSelector.extend({\n            init: function (element, options) {\n                var that = this;\n                ColorSelector.fn.init.call(that, element, options);\n                element = that.wrapper = that.element;\n                options = that.options;\n                var colors = options.palette;\n                if (colors == 'websafe') {\n                    colors = WEBPALETTE;\n                    options.columns = 18;\n                } else if (colors == 'basic') {\n                    colors = SIMPLEPALETTE;\n                }\n                if (typeof colors == 'string') {\n                    colors = colors.split(',');\n                }\n                if ($.isArray(colors)) {\n                    colors = $.map(colors, function (x) {\n                        return parseColor(x);\n                    });\n                }\n                that._selectedID = (options.ariaId || kendo.guid()) + '_selected';\n                element.addClass('k-widget k-colorpalette').attr('role', 'grid').attr('aria-readonly', 'true').append($(that._template({\n                    colors: colors,\n                    columns: options.columns,\n                    tileSize: options.tileSize,\n                    value: that._value,\n                    id: options.ariaId\n                }))).on(CLICK_NS, '.k-item', function (ev) {\n                    that._select($(ev.currentTarget).css(BACKGROUNDCOLOR));\n                }).attr('tabIndex', that._tabIndex).on(KEYDOWN_NS, bind(that._keydown, that));\n                var tileSize = options.tileSize, width, height;\n                if (tileSize) {\n                    if (/number|string/.test(typeof tileSize)) {\n                        width = height = parseFloat(tileSize);\n                    } else if (typeof tileSize == 'object') {\n                        width = parseFloat(tileSize.width);\n                        height = parseFloat(tileSize.height);\n                    } else {\n                        throw new Error('Unsupported value for the \\'tileSize\\' argument');\n                    }\n                    element.find('.k-item').css({\n                        width: width,\n                        height: height\n                    });\n                }\n            },\n            focus: function () {\n                this.wrapper.focus();\n            },\n            options: {\n                name: 'ColorPalette',\n                columns: 10,\n                tileSize: null,\n                palette: 'basic'\n            },\n            _onEnable: function (enable) {\n                if (enable) {\n                    this.wrapper.attr('tabIndex', this._tabIndex);\n                } else {\n                    this.wrapper.removeAttr('tabIndex');\n                }\n            },\n            _keydown: function (e) {\n                var selected, wrapper = this.wrapper, items = wrapper.find('.k-item'), current = items.filter('.' + ITEMSELECTEDCLASS).get(0), keyCode = e.keyCode;\n                if (keyCode == KEYS.LEFT) {\n                    selected = relative(items, current, -1);\n                } else if (keyCode == KEYS.RIGHT) {\n                    selected = relative(items, current, 1);\n                } else if (keyCode == KEYS.DOWN) {\n                    selected = relative(items, current, this.options.columns);\n                } else if (keyCode == KEYS.UP) {\n                    selected = relative(items, current, -this.options.columns);\n                } else if (keyCode == KEYS.ENTER) {\n                    preventDefault(e);\n                    if (current) {\n                        this._select($(current).css(BACKGROUNDCOLOR));\n                    }\n                } else if (keyCode == KEYS.ESC) {\n                    this._cancel();\n                }\n                if (selected) {\n                    preventDefault(e);\n                    this._current(selected);\n                    try {\n                        var color = parseColor(selected.css(BACKGROUNDCOLOR));\n                        this._triggerSelect(color);\n                    } catch (ex) {\n                    }\n                }\n            },\n            _current: function (item) {\n                this.wrapper.find('.' + ITEMSELECTEDCLASS).removeClass(ITEMSELECTEDCLASS).attr('aria-selected', false).removeAttr('id');\n                $(item).addClass(ITEMSELECTEDCLASS).attr('aria-selected', true).attr('id', this._selectedID);\n                this.element.removeAttr('aria-activedescendant').attr('aria-activedescendant', this._selectedID);\n            },\n            _updateUI: function (color) {\n                var item = null;\n                this.wrapper.find('.k-item').each(function () {\n                    var c = parseColor($(this).css(BACKGROUNDCOLOR));\n                    if (c && c.equals(color)) {\n                        item = this;\n                        return false;\n                    }\n                });\n                this._current(item);\n            },\n            _template: kendo.template('<table class=\"k-palette k-reset\" role=\"presentation\"><tr role=\"row\">' + '# for (var i = 0; i < colors.length; ++i) { #' + '# var selected = colors[i].equals(value); #' + '# if (i && i % columns == 0) { # </tr><tr role=\"row\"> # } #' + '<td role=\"gridcell\" unselectable=\"on\" style=\"background-color:#= colors[i].toCss() #\"' + '#= selected ? \" aria-selected=true\" : \"\" # ' + '#=(id && i === 0) ? \"id=\\\\\"\"+id+\"\\\\\" \" : \"\" # ' + 'class=\"k-item#= selected ? \" ' + ITEMSELECTEDCLASS + '\" : \"\" #\" ' + 'aria-label=\"#= colors[i].toCss() #\"></td>' + '# } #' + '</tr></table>')\n        });\n        var FlatColorPicker = ColorSelector.extend({\n            init: function (element, options) {\n                var that = this;\n                ColorSelector.fn.init.call(that, element, options);\n                options = that.options;\n                element = that.element;\n                that.wrapper = element.addClass('k-widget k-flatcolorpicker').append(that._template(options));\n                that._hueElements = $('.k-hsv-rectangle, .k-transparency-slider .k-slider-track', element);\n                that._selectedColor = $('.k-selected-color-display', element);\n                that._colorAsText = $('input.k-color-value', element);\n                that._sliders();\n                that._hsvArea();\n                that._updateUI(that._value || parseColor('#f00'));\n                element.find('input.k-color-value').on(KEYDOWN_NS, function (ev) {\n                    var input = this;\n                    if (ev.keyCode == KEYS.ENTER) {\n                        try {\n                            var color = parseColor(input.value);\n                            var val = that.color();\n                            that._select(color, color.equals(val));\n                        } catch (ex) {\n                            $(input).addClass('k-state-error');\n                        }\n                    } else if (that.options.autoupdate) {\n                        setTimeout(function () {\n                            var color = parseColor(input.value, true);\n                            if (color) {\n                                that._updateUI(color, true);\n                            }\n                        }, 10);\n                    }\n                }).end().on(CLICK_NS, '.k-controls button.apply', function () {\n                    that._select(that._getHSV());\n                }).on(CLICK_NS, '.k-controls button.cancel', function () {\n                    that._updateUI(that.color());\n                    that._cancel();\n                });\n                if (isIE8) {\n                    that._applyIEFilter();\n                }\n            },\n            destroy: function () {\n                this._hueSlider.destroy();\n                if (this._opacitySlider) {\n                    this._opacitySlider.destroy();\n                }\n                this._hueSlider = this._opacitySlider = this._hsvRect = this._hsvHandle = this._hueElements = this._selectedColor = this._colorAsText = null;\n                ColorSelector.fn.destroy.call(this);\n            },\n            options: {\n                name: 'FlatColorPicker',\n                opacity: false,\n                buttons: false,\n                input: true,\n                preview: true,\n                autoupdate: true,\n                messages: APPLY_CANCEL\n            },\n            _applyIEFilter: function () {\n                var track = this.element.find('.k-hue-slider .k-slider-track')[0], url = track.currentStyle.backgroundImage;\n                url = url.replace(/^url\\([\\'\\\"]?|[\\'\\\"]?\\)$/g, '');\n                track.style.filter = 'progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\\'' + url + '\\', sizingMethod=\\'scale\\')';\n            },\n            _sliders: function () {\n                var that = this, element = that.element;\n                function hueChange(e) {\n                    that._updateUI(that._getHSV(e.value, null, null, null));\n                }\n                that._hueSlider = element.find('.k-hue-slider').kendoSlider({\n                    min: 0,\n                    max: 360,\n                    tickPlacement: 'none',\n                    showButtons: false,\n                    slide: hueChange,\n                    change: hueChange\n                }).data('kendoSlider');\n                function opacityChange(e) {\n                    that._updateUI(that._getHSV(null, null, null, e.value / 100));\n                }\n                that._opacitySlider = element.find('.k-transparency-slider').kendoSlider({\n                    min: 0,\n                    max: 100,\n                    tickPlacement: 'none',\n                    showButtons: false,\n                    slide: opacityChange,\n                    change: opacityChange\n                }).data('kendoSlider');\n            },\n            _hsvArea: function () {\n                var that = this, element = that.element, hsvRect = element.find('.k-hsv-rectangle'), hsvHandle = hsvRect.find('.k-draghandle').attr('tabIndex', 0).on(KEYDOWN_NS, bind(that._keydown, that));\n                function update(x, y) {\n                    var offset = this.offset, dx = x - offset.left, dy = y - offset.top, rw = this.width, rh = this.height;\n                    dx = dx < 0 ? 0 : dx > rw ? rw : dx;\n                    dy = dy < 0 ? 0 : dy > rh ? rh : dy;\n                    that._svChange(dx / rw, 1 - dy / rh);\n                }\n                that._hsvEvents = new kendo.UserEvents(hsvRect, {\n                    global: true,\n                    press: function (e) {\n                        this.offset = kendo.getOffset(hsvRect);\n                        this.width = hsvRect.width();\n                        this.height = hsvRect.height();\n                        hsvHandle.focus();\n                        update.call(this, e.x.location, e.y.location);\n                    },\n                    start: function () {\n                        hsvRect.addClass('k-dragging');\n                        hsvHandle.focus();\n                    },\n                    move: function (e) {\n                        e.preventDefault();\n                        update.call(this, e.x.location, e.y.location);\n                    },\n                    end: function () {\n                        hsvRect.removeClass('k-dragging');\n                    }\n                });\n                that._hsvRect = hsvRect;\n                that._hsvHandle = hsvHandle;\n            },\n            _onEnable: function (enable) {\n                this._hueSlider.enable(enable);\n                if (this._opacitySlider) {\n                    this._opacitySlider.enable(enable);\n                }\n                this.wrapper.find('input').attr('disabled', !enable);\n                var handle = this._hsvRect.find('.k-draghandle');\n                if (enable) {\n                    handle.attr('tabIndex', this._tabIndex);\n                } else {\n                    handle.removeAttr('tabIndex');\n                }\n            },\n            _keydown: function (ev) {\n                var that = this;\n                function move(prop, d) {\n                    var c = that._getHSV();\n                    c[prop] += d * (ev.shiftKey ? 0.01 : 0.05);\n                    if (c[prop] < 0) {\n                        c[prop] = 0;\n                    }\n                    if (c[prop] > 1) {\n                        c[prop] = 1;\n                    }\n                    that._updateUI(c);\n                    preventDefault(ev);\n                }\n                function hue(d) {\n                    var c = that._getHSV();\n                    c.h += d * (ev.shiftKey ? 1 : 5);\n                    if (c.h < 0) {\n                        c.h = 0;\n                    }\n                    if (c.h > 359) {\n                        c.h = 359;\n                    }\n                    that._updateUI(c);\n                    preventDefault(ev);\n                }\n                switch (ev.keyCode) {\n                case KEYS.LEFT:\n                    if (ev.ctrlKey) {\n                        hue(-1);\n                    } else {\n                        move('s', -1);\n                    }\n                    break;\n                case KEYS.RIGHT:\n                    if (ev.ctrlKey) {\n                        hue(1);\n                    } else {\n                        move('s', 1);\n                    }\n                    break;\n                case KEYS.UP:\n                    move(ev.ctrlKey && that._opacitySlider ? 'a' : 'v', 1);\n                    break;\n                case KEYS.DOWN:\n                    move(ev.ctrlKey && that._opacitySlider ? 'a' : 'v', -1);\n                    break;\n                case KEYS.ENTER:\n                    that._select(that._getHSV());\n                    break;\n                case KEYS.F2:\n                    that.wrapper.find('input.k-color-value').focus().select();\n                    break;\n                case KEYS.ESC:\n                    that._cancel();\n                    break;\n                }\n            },\n            focus: function () {\n                this._hsvHandle.focus();\n            },\n            _getHSV: function (h, s, v, a) {\n                var rect = this._hsvRect, width = rect.width(), height = rect.height(), handlePosition = this._hsvHandle.position();\n                if (h == null) {\n                    h = this._hueSlider.value();\n                }\n                if (s == null) {\n                    s = handlePosition.left / width;\n                }\n                if (v == null) {\n                    v = 1 - handlePosition.top / height;\n                }\n                if (a == null) {\n                    a = this._opacitySlider ? this._opacitySlider.value() / 100 : 1;\n                }\n                return Color.fromHSV(h, s, v, a);\n            },\n            _svChange: function (s, v) {\n                var color = this._getHSV(null, s, v, null);\n                this._updateUI(color);\n            },\n            _updateUI: function (color, dontChangeInput) {\n                var that = this, rect = that._hsvRect;\n                if (!color) {\n                    return;\n                }\n                this._colorAsText.removeClass('k-state-error');\n                that._selectedColor.css(BACKGROUNDCOLOR, color.toDisplay());\n                if (!dontChangeInput) {\n                    that._colorAsText.val(that._opacitySlider ? color.toCssRgba() : color.toCss());\n                }\n                that._triggerSelect(color);\n                color = color.toHSV();\n                that._hsvHandle.css({\n                    left: color.s * rect.width() + 'px',\n                    top: (1 - color.v) * rect.height() + 'px'\n                });\n                that._hueElements.css(BACKGROUNDCOLOR, Color.fromHSV(color.h, 1, 1, 1).toCss());\n                that._hueSlider.value(color.h);\n                if (that._opacitySlider) {\n                    that._opacitySlider.value(100 * color.a);\n                }\n            },\n            _selectOnHide: function () {\n                return this.options.buttons ? null : this._getHSV();\n            },\n            _template: kendo.template('# if (preview) { #' + '<div class=\"k-selected-color\"><div class=\"k-selected-color-display\"><input class=\"k-color-value\" #= !data.input ? \\'style=\"visibility: hidden;\"\\' : \"\" #></div></div>' + '# } #' + '<div class=\"k-hsv-rectangle\"><div class=\"k-hsv-gradient\"></div><div class=\"k-draghandle\"></div></div>' + '<input class=\"k-hue-slider\" />' + '# if (opacity) { #' + '<input class=\"k-transparency-slider\" />' + '# } #' + '# if (buttons) { #' + '<div unselectable=\"on\" class=\"k-controls\"><button class=\"k-button k-primary apply\">#: messages.apply #</button> <button class=\"k-button cancel\">#: messages.cancel #</button></div>' + '# } #')\n        });\n        function relative(array, element, delta) {\n            array = Array.prototype.slice.call(array);\n            var n = array.length;\n            var pos = array.indexOf(element);\n            if (pos < 0) {\n                return delta < 0 ? array[n - 1] : array[0];\n            }\n            pos += delta;\n            if (pos < 0) {\n                pos += n;\n            } else {\n                pos %= n;\n            }\n            return array[pos];\n        }\n        var ColorPicker = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                Widget.fn.init.call(that, element, options);\n                options = that.options;\n                element = that.element;\n                var value = element.attr('value') || element.val();\n                if (value) {\n                    value = parseColor(value, true);\n                } else {\n                    value = parseColor(options.value, true);\n                }\n                that._value = options.value = value;\n                var content = that.wrapper = $(that._template(options));\n                element.hide().after(content);\n                if (element.is('input')) {\n                    element.appendTo(content);\n                    var label = element.closest('label');\n                    var id = element.attr('id');\n                    if (id) {\n                        label = label.add('label[for=\"' + id + '\"]');\n                    }\n                    label.click(function (ev) {\n                        that.open();\n                        ev.preventDefault();\n                    });\n                }\n                that._tabIndex = element.attr('tabIndex') || 0;\n                that.enable(!element.attr('disabled'));\n                var accesskey = element.attr('accesskey');\n                if (accesskey) {\n                    element.attr('accesskey', null);\n                    content.attr('accesskey', accesskey);\n                }\n                that.bind('activate', function (ev) {\n                    if (!ev.isDefaultPrevented()) {\n                        that.toggle();\n                    }\n                });\n                that._updateUI(value);\n            },\n            destroy: function () {\n                this.wrapper.off(NS).find('*').off(NS);\n                if (this._popup) {\n                    this._selector.destroy();\n                    this._popup.destroy();\n                }\n                this._selector = this._popup = this.wrapper = null;\n                Widget.fn.destroy.call(this);\n            },\n            enable: function (enable) {\n                var that = this, wrapper = that.wrapper, innerWrapper = wrapper.children('.k-picker-wrap'), arrow = innerWrapper.find('.k-select');\n                if (arguments.length === 0) {\n                    enable = true;\n                }\n                that.element.attr('disabled', !enable);\n                wrapper.attr('aria-disabled', !enable);\n                arrow.off(NS).on('mousedown' + NS, preventDefault);\n                wrapper.addClass('k-state-disabled').removeAttr('tabIndex').add('*', wrapper).off(NS);\n                if (enable) {\n                    wrapper.removeClass('k-state-disabled').attr('tabIndex', that._tabIndex).on('mouseenter' + NS, function () {\n                        innerWrapper.addClass('k-state-hover');\n                    }).on('mouseleave' + NS, function () {\n                        innerWrapper.removeClass('k-state-hover');\n                    }).on('focus' + NS, function () {\n                        innerWrapper.addClass('k-state-focused');\n                    }).on('blur' + NS, function () {\n                        innerWrapper.removeClass('k-state-focused');\n                    }).on(KEYDOWN_NS, bind(that._keydown, that)).on(CLICK_NS, '.k-select', bind(that.toggle, that)).on(CLICK_NS, that.options.toolIcon ? '.k-tool-icon' : '.k-selected-color', function () {\n                        that.trigger('activate');\n                    });\n                } else {\n                    that.close();\n                }\n            },\n            _template: kendo.template('<span role=\"textbox\" aria-haspopup=\"true\" class=\"k-widget k-colorpicker k-header\">' + '<span class=\"k-picker-wrap k-state-default\">' + '# if (toolIcon) { #' + '<span class=\"k-tool-icon #= toolIcon #\">' + '<span class=\"k-selected-color\"></span>' + '</span>' + '# } else { #' + '<span class=\"k-selected-color\"></span>' + '# } #' + '<span class=\"k-select\" unselectable=\"on\" aria-label=\"select\">' + '<span class=\"k-icon k-i-arrow-s\"></span>' + '</span>' + '</span>' + '</span>'),\n            options: {\n                name: 'ColorPicker',\n                palette: null,\n                columns: 10,\n                toolIcon: null,\n                value: null,\n                messages: APPLY_CANCEL,\n                opacity: false,\n                buttons: true,\n                preview: true,\n                ARIATemplate: 'Current selected color is #=data || \"\"#'\n            },\n            events: [\n                'activate',\n                'change',\n                'select',\n                'open',\n                'close'\n            ],\n            open: function () {\n                if (!this.element.prop('disabled')) {\n                    this._getPopup().open();\n                }\n            },\n            close: function () {\n                this._getPopup().close();\n            },\n            toggle: function () {\n                if (!this.element.prop('disabled')) {\n                    this._getPopup().toggle();\n                }\n            },\n            color: ColorSelector.fn.color,\n            value: ColorSelector.fn.value,\n            _select: ColorSelector.fn._select,\n            _triggerSelect: ColorSelector.fn._triggerSelect,\n            _isInputTypeColor: function () {\n                var el = this.element[0];\n                return /^input$/i.test(el.tagName) && /^color$/i.test(el.type);\n            },\n            _updateUI: function (value) {\n                var formattedValue = '';\n                if (value) {\n                    if (this._isInputTypeColor() || value.a == 1) {\n                        formattedValue = value.toCss();\n                    } else {\n                        formattedValue = value.toCssRgba();\n                    }\n                    this.element.val(formattedValue);\n                }\n                if (!this._ariaTemplate) {\n                    this._ariaTemplate = kendo.template(this.options.ARIATemplate);\n                }\n                this.wrapper.attr('aria-label', this._ariaTemplate(formattedValue));\n                this._triggerSelect(value);\n                this.wrapper.find('.k-selected-color').css(BACKGROUNDCOLOR, value ? value.toDisplay() : 'transparent');\n            },\n            _keydown: function (ev) {\n                var key = ev.keyCode;\n                if (this._getPopup().visible()) {\n                    if (key == KEYS.ESC) {\n                        this._selector._cancel();\n                    } else {\n                        this._selector._keydown(ev);\n                    }\n                    preventDefault(ev);\n                } else if (key == KEYS.ENTER || key == KEYS.DOWN) {\n                    this.open();\n                    preventDefault(ev);\n                }\n            },\n            _getPopup: function () {\n                var that = this, popup = that._popup;\n                if (!popup) {\n                    var options = that.options;\n                    var selectorType;\n                    if (options.palette) {\n                        selectorType = ColorPalette;\n                    } else {\n                        selectorType = FlatColorPicker;\n                    }\n                    options._standalone = false;\n                    delete options.select;\n                    delete options.change;\n                    delete options.cancel;\n                    var id = kendo.guid();\n                    var selector = that._selector = new selectorType($('<div id=\"' + id + '\"/>').appendTo(document.body), options);\n                    that.wrapper.attr('aria-owns', id);\n                    that._popup = popup = selector.wrapper.kendoPopup({\n                        anchor: that.wrapper,\n                        adjustSize: {\n                            width: 5,\n                            height: 0\n                        }\n                    }).data('kendoPopup');\n                    selector.bind({\n                        select: function (ev) {\n                            that._updateUI(parseColor(ev.value));\n                        },\n                        change: function () {\n                            that._select(selector.color());\n                            that.close();\n                        },\n                        cancel: function () {\n                            that.close();\n                        }\n                    });\n                    popup.bind({\n                        close: function (ev) {\n                            if (that.trigger('close')) {\n                                ev.preventDefault();\n                                return;\n                            }\n                            that.wrapper.children('.k-picker-wrap').removeClass('k-state-focused');\n                            var color = selector._selectOnHide();\n                            if (!color) {\n                                setTimeout(function () {\n                                    if (that.wrapper) {\n                                        that.wrapper.focus();\n                                    }\n                                });\n                                that._updateUI(that.color());\n                            } else {\n                                that._select(color);\n                            }\n                        },\n                        open: function (ev) {\n                            if (that.trigger('open')) {\n                                ev.preventDefault();\n                            } else {\n                                that.wrapper.children('.k-picker-wrap').addClass('k-state-focused');\n                            }\n                        },\n                        activate: function () {\n                            selector._select(that.color(), true);\n                            selector.focus();\n                            that.wrapper.children('.k-picker-wrap').addClass('k-state-focused');\n                        }\n                    });\n                }\n                return popup;\n            }\n        });\n        function preventDefault(ev) {\n            ev.preventDefault();\n        }\n        function bind(callback, obj) {\n            return function () {\n                return callback.apply(obj, arguments);\n            };\n        }\n        ui.plugin(ColorPalette);\n        ui.plugin(FlatColorPicker);\n        ui.plugin(ColorPicker);\n    }(jQuery, parseInt));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n/** \r\n * Kendo UI v2016.2.714 (http://www.telerik.com/kendo-ui)                                                                                                                                               \r\n * Copyright 2016 Telerik AD. All rights reserved.                                                                                                                                                      \r\n *                                                                                                                                                                                                      \r\n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \r\n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \r\n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n\r\n*/\r\n(function (f, define) {\r\n    define('util/undoredostack', ['kendo.core'], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        var UndoRedoStack = kendo.Observable.extend({\r\n            init: function (options) {\r\n                kendo.Observable.fn.init.call(this, options);\r\n                this.clear();\r\n            },\r\n            events: [\r\n                'undo',\r\n                'redo'\r\n            ],\r\n            push: function (command) {\r\n                this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\r\n                this.currentCommandIndex = this.stack.push(command) - 1;\r\n            },\r\n            undo: function () {\r\n                if (this.canUndo()) {\r\n                    var command = this.stack[this.currentCommandIndex--];\r\n                    command.undo();\r\n                    this.trigger('undo', { command: command });\r\n                }\r\n            },\r\n            redo: function () {\r\n                if (this.canRedo()) {\r\n                    var command = this.stack[++this.currentCommandIndex];\r\n                    command.redo();\r\n                    this.trigger('redo', { command: command });\r\n                }\r\n            },\r\n            clear: function () {\r\n                this.stack = [];\r\n                this.currentCommandIndex = -1;\r\n            },\r\n            canUndo: function () {\r\n                return this.currentCommandIndex >= 0;\r\n            },\r\n            canRedo: function () {\r\n                return this.currentCommandIndex != this.stack.length - 1;\r\n            }\r\n        });\r\n        kendo.deepExtend(kendo, { util: { UndoRedoStack: UndoRedoStack } });\r\n    }(kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('editor/main', [\r\n        'util/undoredostack',\r\n        'kendo.combobox',\r\n        'kendo.dropdownlist',\r\n        'kendo.window',\r\n        'kendo.colorpicker'\r\n    ], f);\r\n}(function () {\r\n    (function ($, undefined) {\r\n        var kendo = window.kendo, Class = kendo.Class, Widget = kendo.ui.Widget, os = kendo.support.mobileOS, browser = kendo.support.browser, extend = $.extend, proxy = $.proxy, deepExtend = kendo.deepExtend, keys = kendo.keys;\r\n        var ToolTemplate = Class.extend({\r\n            init: function (options) {\r\n                this.options = options;\r\n            },\r\n            getHtml: function () {\r\n                var options = this.options;\r\n                return kendo.template(options.template, { useWithBlock: false })(options);\r\n            }\r\n        });\r\n        var EditorUtils = {\r\n            editorWrapperTemplate: '<table cellspacing=\"4\" cellpadding=\"0\" class=\"k-widget k-editor k-header\" role=\"presentation\"><tbody>' + '<tr role=\"presentation\"><td class=\"k-editor-toolbar-wrap\" role=\"presentation\"><ul class=\"k-editor-toolbar\" role=\"toolbar\" /></td></tr>' + '<tr><td class=\"k-editable-area\" /></tr>' + '</tbody></table>',\r\n            buttonTemplate: '<a href=\"\" role=\"button\" class=\"k-tool\"' + '#= data.popup ? \" data-popup\" : \"\" #' + ' unselectable=\"on\" title=\"#= data.title #\"><span unselectable=\"on\" class=\"k-tool-icon #= data.cssClass #\"></span><span class=\"k-tool-text\">#= data.title #</span></a>',\r\n            colorPickerTemplate: '<div class=\"k-colorpicker #= data.cssClass #\" />',\r\n            comboBoxTemplate: '<select title=\"#= data.title #\" class=\"#= data.cssClass #\" />',\r\n            dropDownListTemplate: '<span class=\"k-editor-dropdown\"><select title=\"#= data.title #\" class=\"#= data.cssClass #\" /></span>',\r\n            separatorTemplate: '<span class=\"k-separator\" />',\r\n            overflowAnchorTemplate: '<a href=\"\" role=\"button\" class=\"k-tool k-overflow-anchor\" data-popup' + ' unselectable=\"on\"><span unselectable=\"on\" class=\"k-icon k-i-more\"></span></a>',\r\n            formatByName: function (name, format) {\r\n                for (var i = 0; i < format.length; i++) {\r\n                    if ($.inArray(name, format[i].tags) >= 0) {\r\n                        return format[i];\r\n                    }\r\n                }\r\n            },\r\n            registerTool: function (toolName, tool) {\r\n                var toolOptions = tool.options;\r\n                if (toolOptions && toolOptions.template) {\r\n                    toolOptions.template.options.cssClass = 'k-' + toolName;\r\n                }\r\n                if (!tool.name) {\r\n                    tool.options.name = toolName;\r\n                    tool.name = toolName.toLowerCase();\r\n                }\r\n                Editor.defaultTools[toolName] = tool;\r\n            },\r\n            registerFormat: function (formatName, format) {\r\n                Editor.fn.options.formats[formatName] = format;\r\n            }\r\n        };\r\n        var messages = {\r\n            bold: 'Bold',\r\n            italic: 'Italic',\r\n            underline: 'Underline',\r\n            strikethrough: 'Strikethrough',\r\n            superscript: 'Superscript',\r\n            subscript: 'Subscript',\r\n            justifyCenter: 'Center text',\r\n            justifyLeft: 'Align text left',\r\n            justifyRight: 'Align text right',\r\n            justifyFull: 'Justify',\r\n            insertUnorderedList: 'Insert unordered list',\r\n            insertOrderedList: 'Insert ordered list',\r\n            indent: 'Indent',\r\n            outdent: 'Outdent',\r\n            createLink: 'Insert hyperlink',\r\n            unlink: 'Remove hyperlink',\r\n            insertImage: 'Insert image',\r\n            insertFile: 'Insert file',\r\n            insertHtml: 'Insert HTML',\r\n            viewHtml: 'View HTML',\r\n            fontName: 'Select font family',\r\n            fontNameInherit: '(inherited font)',\r\n            fontSize: 'Select font size',\r\n            fontSizeInherit: '(inherited size)',\r\n            formatBlock: 'Format',\r\n            formatting: 'Format',\r\n            foreColor: 'Color',\r\n            backColor: 'Background color',\r\n            style: 'Styles',\r\n            emptyFolder: 'Empty Folder',\r\n            editAreaTitle: 'Editable area. Press F10 for toolbar.',\r\n            uploadFile: 'Upload',\r\n            orderBy: 'Arrange by:',\r\n            orderBySize: 'Size',\r\n            orderByName: 'Name',\r\n            invalidFileType: 'The selected file \"{0}\" is not valid. Supported file types are {1}.',\r\n            deleteFile: 'Are you sure you want to delete \"{0}\"?',\r\n            overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\r\n            directoryNotFound: 'A directory with this name was not found.',\r\n            imageWebAddress: 'Web address',\r\n            imageAltText: 'Alternate text',\r\n            imageWidth: 'Width (px)',\r\n            imageHeight: 'Height (px)',\r\n            fileWebAddress: 'Web address',\r\n            fileTitle: 'Title',\r\n            linkWebAddress: 'Web address',\r\n            linkText: 'Text',\r\n            linkToolTip: 'ToolTip',\r\n            linkOpenInNewWindow: 'Open link in new window',\r\n            dialogUpdate: 'Update',\r\n            dialogInsert: 'Insert',\r\n            dialogCancel: 'Cancel',\r\n            createTable: 'Create table',\r\n            createTableHint: 'Create a {0} x {1} table',\r\n            addColumnLeft: 'Add column on the left',\r\n            addColumnRight: 'Add column on the right',\r\n            addRowAbove: 'Add row above',\r\n            addRowBelow: 'Add row below',\r\n            deleteRow: 'Delete row',\r\n            deleteColumn: 'Delete column'\r\n        };\r\n        var supportedBrowser = !os || os.ios && os.flatVersion >= 500 || !os.ios && typeof document.documentElement.contentEditable != 'undefined';\r\n        var toolGroups = {\r\n            basic: [\r\n                'bold',\r\n                'italic',\r\n                'underline'\r\n            ],\r\n            alignment: [\r\n                'justifyLeft',\r\n                'justifyCenter',\r\n                'justifyRight'\r\n            ],\r\n            lists: [\r\n                'insertUnorderedList',\r\n                'insertOrderedList'\r\n            ],\r\n            indenting: [\r\n                'indent',\r\n                'outdent'\r\n            ],\r\n            links: [\r\n                'createLink',\r\n                'unlink'\r\n            ],\r\n            tables: [\r\n                'createTable',\r\n                'addColumnLeft',\r\n                'addColumnRight',\r\n                'addRowAbove',\r\n                'addRowBelow',\r\n                'deleteRow',\r\n                'deleteColumn'\r\n            ]\r\n        };\r\n        var Editor = Widget.extend({\r\n            init: function (element, options) {\r\n                var that = this, value, editorNS = kendo.ui.editor, toolbarContainer, toolbarOptions, type;\r\n                var domElement;\r\n                var dom = editorNS.Dom;\r\n                if (!supportedBrowser) {\r\n                    return;\r\n                }\r\n                Widget.fn.init.call(that, element, options);\r\n                that.options = deepExtend({}, that.options, options);\r\n                that.options.tools = that.options.tools.slice();\r\n                element = that.element;\r\n                domElement = element[0];\r\n                type = dom.name(domElement);\r\n                this._registerHandler(element.closest('form'), 'submit', proxy(that.update, that, undefined));\r\n                toolbarOptions = extend({}, that.options);\r\n                toolbarOptions.editor = that;\r\n                if (type == 'textarea') {\r\n                    that._wrapTextarea();\r\n                    toolbarContainer = that.wrapper.find('.k-editor-toolbar');\r\n                    if (domElement.id) {\r\n                        toolbarContainer.attr('aria-controls', domElement.id);\r\n                    }\r\n                } else {\r\n                    that.element.attr('contenteditable', true).addClass('k-widget k-editor k-editor-inline');\r\n                    toolbarOptions.popup = true;\r\n                    toolbarContainer = $('<ul class=\"k-editor-toolbar\" role=\"toolbar\" />').insertBefore(element);\r\n                }\r\n                that.toolbar = new editorNS.Toolbar(toolbarContainer[0], toolbarOptions);\r\n                that.toolbar.bindTo(that);\r\n                if (type == 'textarea') {\r\n                    setTimeout(function () {\r\n                        var heightStyle = that.wrapper[0].style.height;\r\n                        var expectedHeight = parseInt(heightStyle, 10);\r\n                        var actualHeight = that.wrapper.height();\r\n                        if (heightStyle.indexOf('px') > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\r\n                            that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\r\n                        }\r\n                    });\r\n                }\r\n                that._resizable();\r\n                that._initializeContentElement(that);\r\n                that.keyboard = new editorNS.Keyboard([\r\n                    new editorNS.BackspaceHandler(that),\r\n                    new editorNS.TypingHandler(that),\r\n                    new editorNS.SystemHandler(that)\r\n                ]);\r\n                that.clipboard = new editorNS.Clipboard(this);\r\n                that.undoRedoStack = new kendo.util.UndoRedoStack();\r\n                if (options && options.value) {\r\n                    value = options.value;\r\n                } else if (that.textarea) {\r\n                    value = domElement.value;\r\n                    if (that.options.encoded && $.trim(domElement.defaultValue).length) {\r\n                        value = domElement.defaultValue;\r\n                    }\r\n                    value = value.replace(/[\\r\\n\\v\\f\\t ]+/gi, ' ');\r\n                } else {\r\n                    value = domElement.innerHTML;\r\n                }\r\n                that.value(value || kendo.ui.editor.emptyElementContent);\r\n                this._registerHandler(document, {\r\n                    'mousedown': function () {\r\n                        that._endTyping();\r\n                    },\r\n                    'mouseup': function () {\r\n                        that._mouseup();\r\n                    }\r\n                });\r\n                that.toolbar.resize();\r\n                kendo.notify(that);\r\n            },\r\n            setOptions: function (options) {\r\n                var editor = this;\r\n                Widget.fn.setOptions.call(editor, options);\r\n                if (options.tools) {\r\n                    editor.toolbar.bindTo(editor);\r\n                }\r\n            },\r\n            _endTyping: function () {\r\n                var keyboard = this.keyboard;\r\n                try {\r\n                    if (keyboard.isTypingInProgress()) {\r\n                        keyboard.endTyping(true);\r\n                        this.saveSelection();\r\n                    }\r\n                } catch (e) {\r\n                }\r\n            },\r\n            _selectionChange: function () {\r\n                this._selectionStarted = false;\r\n                this.saveSelection();\r\n                this.trigger('select', {});\r\n            },\r\n            _resizable: function () {\r\n                var resizable = this.options.resizable;\r\n                var isResizable = $.isPlainObject(resizable) ? resizable.content === undefined || resizable.content === true : resizable;\r\n                if (isResizable && this.textarea) {\r\n                    $('<div class=\\'k-resize-handle\\'><span class=\\'k-icon k-resize-se\\' /></div>').insertAfter(this.textarea);\r\n                    this.wrapper.kendoResizable(extend({}, this.options.resizable, {\r\n                        start: function (e) {\r\n                            var editor = this.editor = $(e.currentTarget).closest('.k-editor');\r\n                            this.initialSize = editor.height();\r\n                            editor.find('td:last').append('<div class=\\'k-overlay\\' />');\r\n                        },\r\n                        resize: function (e) {\r\n                            var delta = e.y.initialDelta;\r\n                            var newSize = this.initialSize + delta;\r\n                            var min = this.options.min || 0;\r\n                            var max = this.options.max || Infinity;\r\n                            newSize = Math.min(max, Math.max(min, newSize));\r\n                            this.editor.height(newSize);\r\n                        },\r\n                        resizeend: function () {\r\n                            this.editor.find('.k-overlay').remove();\r\n                            this.editor = null;\r\n                        }\r\n                    }));\r\n                }\r\n            },\r\n            _wrapTextarea: function () {\r\n                var that = this, textarea = that.element, w = textarea[0].style.width, h = textarea[0].style.height, template = EditorUtils.editorWrapperTemplate, editorWrap = $(template).insertBefore(textarea).width(w).height(h), editArea = editorWrap.find('.k-editable-area');\r\n                textarea.attr('autocomplete', 'off').appendTo(editArea).addClass('k-content k-raw-content').css('display', 'none');\r\n                that.textarea = textarea;\r\n                that.wrapper = editorWrap;\r\n            },\r\n            _createContentElement: function (stylesheets) {\r\n                var editor = this;\r\n                var iframe, wnd, doc;\r\n                var textarea = editor.textarea;\r\n                var specifiedDomain = editor.options.domain;\r\n                var domain = specifiedDomain || document.domain;\r\n                var domainScript = '';\r\n                var src = 'javascript:\"\"';\r\n                if (specifiedDomain || domain != location.hostname) {\r\n                    domainScript = '<script>document.domain=\"' + domain + '\"</script>';\r\n                    src = 'javascript:document.write(\\'' + domainScript + '\\')';\r\n                }\r\n                textarea.hide();\r\n                iframe = $('<iframe />', {\r\n                    title: editor.options.messages.editAreaTitle,\r\n                    frameBorder: '0'\r\n                })[0];\r\n                $(iframe).css('display', '').addClass('k-content').attr('tabindex', textarea[0].tabIndex).insertBefore(textarea);\r\n                iframe.src = src;\r\n                wnd = iframe.contentWindow || iframe;\r\n                doc = wnd.document || iframe.contentDocument;\r\n                $(iframe).one('load', function () {\r\n                    editor.toolbar.decorateFrom(doc.body);\r\n                });\r\n                doc.open();\r\n                doc.write('<!DOCTYPE html><html><head>' + '<meta charset=\\'utf-8\\' />' + '<style>' + 'html,body{padding:0;margin:0;height:100%;min-height:100%;}' + 'body{font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:1px .2em 0;' + 'word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;' + (kendo.support.isRtl(textarea) ? 'direction:rtl;' : '') + '}' + 'h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}' + 'p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}' + 'ul,ol{padding-left:2.5em}' + 'span{-ms-high-contrast-adjust:none;}' + 'a{color:#00a}' + 'code{font-size:1.23em}' + 'telerik\\\\3Ascript{display: none;}' + '.k-table{table-layout:fixed;width:100%;border-spacing:0;margin: 0 0 1em;}' + '.k-table td{min-width:1px;padding:.2em .3em;}' + '.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}' + '.k-table p{margin:0;padding:0;}' + 'k\\\\:script{display:none;}' + '</style>' + domainScript + '<script>(function(d,c){d[c](\\'header\\'),d[c](\\'article\\'),d[c](\\'nav\\'),d[c](\\'section\\'),d[c](\\'footer\\');})(document, \\'createElement\\');</script>' + $.map(stylesheets, function (href) {\r\n                    return '<link rel=\\'stylesheet\\' href=\\'' + href + '\\'>';\r\n                }).join('') + '</head><body autocorrect=\\'off\\' contenteditable=\\'true\\'></body></html>');\r\n                doc.close();\r\n                return wnd;\r\n            },\r\n            _blur: function () {\r\n                var textarea = this.textarea;\r\n                var old = textarea ? textarea.val() : this._oldValue;\r\n                var value = this.options.encoded ? this.encodedValue() : this.value();\r\n                this.update();\r\n                if (textarea) {\r\n                    textarea.trigger('blur');\r\n                }\r\n                if (value != old) {\r\n                    this.trigger('change');\r\n                }\r\n            },\r\n            _spellCorrect: function (editor) {\r\n                var beforeCorrection;\r\n                var falseTrigger = false;\r\n                this._registerHandler(editor.body, {\r\n                    'contextmenu': function () {\r\n                        editor.one('select', function () {\r\n                            beforeCorrection = null;\r\n                        });\r\n                        editor._spellCorrectTimeout = setTimeout(function () {\r\n                            beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange());\r\n                            falseTrigger = false;\r\n                        }, 10);\r\n                    },\r\n                    'input': function () {\r\n                        if (!beforeCorrection) {\r\n                            return;\r\n                        }\r\n                        if (kendo.support.browser.mozilla && !falseTrigger) {\r\n                            falseTrigger = true;\r\n                            return;\r\n                        }\r\n                        kendo.ui.editor._finishUpdate(editor, beforeCorrection);\r\n                    }\r\n                });\r\n            },\r\n            _registerHandler: function (element, type, handler) {\r\n                var NS = '.kendoEditor';\r\n                element = $(element);\r\n                if (!this._handlers) {\r\n                    this._handlers = [];\r\n                }\r\n                if (element.length) {\r\n                    if ($.isPlainObject(type)) {\r\n                        for (var t in type) {\r\n                            if (type.hasOwnProperty(t)) {\r\n                                this._registerHandler(element, t, type[t]);\r\n                            }\r\n                        }\r\n                    } else {\r\n                        type = type.split(' ').join(NS + ' ') + NS;\r\n                        this._handlers.push({\r\n                            element: element,\r\n                            type: type,\r\n                            handler: handler\r\n                        });\r\n                        element.on(type, handler);\r\n                    }\r\n                }\r\n            },\r\n            _deregisterHandlers: function () {\r\n                var handlers = this._handlers;\r\n                for (var i = 0; i < handlers.length; i++) {\r\n                    var h = handlers[i];\r\n                    h.element.off(h.type, h.handler);\r\n                }\r\n                this._handlers = [];\r\n            },\r\n            _initializeContentElement: function () {\r\n                var editor = this;\r\n                var doc;\r\n                var blurTrigger;\r\n                if (editor.textarea) {\r\n                    editor.window = editor._createContentElement(editor.options.stylesheets);\r\n                    doc = editor.document = editor.window.contentDocument || editor.window.document;\r\n                    editor.body = doc.body;\r\n                    blurTrigger = editor.window;\r\n                    this._registerHandler(doc, 'mouseup', proxy(this._mouseup, this));\r\n                } else {\r\n                    editor.window = window;\r\n                    doc = editor.document = document;\r\n                    editor.body = editor.element[0];\r\n                    blurTrigger = editor.body;\r\n                    editor.toolbar.decorateFrom(editor.body);\r\n                }\r\n                this._registerHandler(blurTrigger, 'blur', proxy(this._blur, this));\r\n                try {\r\n                    doc.execCommand('enableInlineTableEditing', null, false);\r\n                } catch (e) {\r\n                }\r\n                if (kendo.support.touch) {\r\n                    this._registerHandler(doc, {\r\n                        'selectionchange': proxy(this._selectionChange, this),\r\n                        'keydown': function () {\r\n                            if (kendo._activeElement() != doc.body) {\r\n                                editor.window.focus();\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                this._spellCorrect(editor);\r\n                this._registerHandler(editor.body, {\r\n                    'dragstart': function (e) {\r\n                        e.preventDefault();\r\n                    },\r\n                    'keydown': function (e) {\r\n                        var range;\r\n                        if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute('contenteditable') !== 'true') {\r\n                            return false;\r\n                        }\r\n                        if (e.keyCode === keys.F10) {\r\n                            setTimeout(proxy(editor.toolbar.focus, editor.toolbar), 100);\r\n                            e.preventDefault();\r\n                            return;\r\n                        } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\r\n                            range = editor.getRange();\r\n                            var left = e.keyCode == keys.LEFT;\r\n                            var container = range[left ? 'startContainer' : 'endContainer'];\r\n                            var offset = range[left ? 'startOffset' : 'endOffset'];\r\n                            var direction = left ? -1 : 1;\r\n                            if (left) {\r\n                                offset -= 1;\r\n                            }\r\n                            if (offset + direction > 0 && container.nodeType == 3 && container.nodeValue[offset] == '\\uFEFF') {\r\n                                range.setStart(container, offset + direction);\r\n                                range.collapse(true);\r\n                                editor.selectRange(range);\r\n                            }\r\n                        }\r\n                        var tools = editor.toolbar.tools;\r\n                        var toolName = editor.keyboard.toolFromShortcut(tools, e);\r\n                        var toolOptions = toolName ? tools[toolName].options : {};\r\n                        if (toolName && !toolOptions.keyPressCommand) {\r\n                            e.preventDefault();\r\n                            if (!/^(undo|redo)$/.test(toolName)) {\r\n                                editor.keyboard.endTyping(true);\r\n                            }\r\n                            editor.trigger('keydown', e);\r\n                            editor.exec(toolName);\r\n                            editor._runPostContentKeyCommands(e);\r\n                            return false;\r\n                        }\r\n                        editor.keyboard.clearTimeout();\r\n                        editor.keyboard.keydown(e);\r\n                    },\r\n                    'keypress': function (e) {\r\n                        setTimeout(function () {\r\n                            editor._runPostContentKeyCommands(e);\r\n                        }, 0);\r\n                    },\r\n                    'keyup': function (e) {\r\n                        var selectionCodes = [\r\n                            8,\r\n                            9,\r\n                            33,\r\n                            34,\r\n                            35,\r\n                            36,\r\n                            37,\r\n                            38,\r\n                            39,\r\n                            40,\r\n                            40,\r\n                            45,\r\n                            46\r\n                        ];\r\n                        if ($.inArray(e.keyCode, selectionCodes) > -1 || e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey) {\r\n                            editor._selectionChange();\r\n                        }\r\n                        editor.keyboard.keyup(e);\r\n                    },\r\n                    'mousedown': function (e) {\r\n                        editor._selectionStarted = true;\r\n                        if (browser.gecko) {\r\n                            return;\r\n                        }\r\n                        var target = $(e.target);\r\n                        if ((e.which == 2 || e.which == 1 && e.ctrlKey) && target.is('a[href]')) {\r\n                            window.open(target.attr('href'), '_new');\r\n                        }\r\n                    },\r\n                    'click': function (e) {\r\n                        var dom = kendo.ui.editor.Dom, range;\r\n                        if (dom.name(e.target) === 'img') {\r\n                            range = editor.createRange();\r\n                            range.selectNode(e.target);\r\n                            editor.selectRange(range);\r\n                        }\r\n                    },\r\n                    'cut copy paste': function (e) {\r\n                        editor.clipboard['on' + e.type](e);\r\n                    },\r\n                    'focusin': function () {\r\n                        if (editor.body.hasAttribute('contenteditable')) {\r\n                            $(this).addClass('k-state-active');\r\n                            editor.toolbar.show();\r\n                        }\r\n                    },\r\n                    'focusout': function () {\r\n                        setTimeout(function () {\r\n                            var active = kendo._activeElement();\r\n                            var body = editor.body;\r\n                            var toolbar = editor.toolbar;\r\n                            if (active != body && !$.contains(body, active) && !$(active).is('.k-editortoolbar-dragHandle') && !toolbar.focused()) {\r\n                                $(body).removeClass('k-state-active');\r\n                                toolbar.hide();\r\n                            }\r\n                        }, 10);\r\n                    }\r\n                });\r\n            },\r\n            _mouseup: function () {\r\n                var that = this;\r\n                if (that._selectionStarted) {\r\n                    setTimeout(function () {\r\n                        that._selectionChange();\r\n                    }, 1);\r\n                }\r\n            },\r\n            _runPostContentKeyCommands: function (e) {\r\n                var range = this.getRange();\r\n                var tools = this.keyboard.toolsFromShortcut(this.toolbar.tools, e);\r\n                for (var i = 0; i < tools.length; i++) {\r\n                    var tool = tools[i];\r\n                    var o = tool.options;\r\n                    if (!o.keyPressCommand) {\r\n                        continue;\r\n                    }\r\n                    var cmd = new o.command({ range: range });\r\n                    if (cmd.changesContent()) {\r\n                        this.keyboard.endTyping(true);\r\n                        this.exec(tool.name);\r\n                    }\r\n                }\r\n            },\r\n            refresh: function () {\r\n                var that = this;\r\n                if (that.textarea) {\r\n                    that.textarea.val(that.value());\r\n                    that.wrapper.find('iframe').remove();\r\n                    that._initializeContentElement(that);\r\n                    that.value(that.textarea.val());\r\n                }\r\n            },\r\n            events: [\r\n                'select',\r\n                'change',\r\n                'execute',\r\n                'error',\r\n                'paste',\r\n                'keydown',\r\n                'keyup'\r\n            ],\r\n            options: {\r\n                name: 'Editor',\r\n                messages: messages,\r\n                formats: {},\r\n                encoded: true,\r\n                domain: null,\r\n                resizable: false,\r\n                deserialization: { custom: null },\r\n                serialization: {\r\n                    entities: true,\r\n                    semantic: true,\r\n                    scripts: false\r\n                },\r\n                pasteCleanup: {\r\n                    all: false,\r\n                    css: false,\r\n                    custom: null,\r\n                    keepNewLines: false,\r\n                    msAllFormatting: false,\r\n                    msConvertLists: true,\r\n                    msTags: true,\r\n                    none: false,\r\n                    span: false\r\n                },\r\n                stylesheets: [],\r\n                dialogOptions: {\r\n                    modal: true,\r\n                    resizable: false,\r\n                    draggable: true,\r\n                    animation: false\r\n                },\r\n                imageBrowser: null,\r\n                fileBrowser: null,\r\n                fontName: [\r\n                    {\r\n                        text: 'Arial',\r\n                        value: 'Arial,Helvetica,sans-serif'\r\n                    },\r\n                    {\r\n                        text: 'Courier New',\r\n                        value: '\\'Courier New\\',Courier,monospace'\r\n                    },\r\n                    {\r\n                        text: 'Georgia',\r\n                        value: 'Georgia,serif'\r\n                    },\r\n                    {\r\n                        text: 'Impact',\r\n                        value: 'Impact,Charcoal,sans-serif'\r\n                    },\r\n                    {\r\n                        text: 'Lucida Console',\r\n                        value: '\\'Lucida Console\\',Monaco,monospace'\r\n                    },\r\n                    {\r\n                        text: 'Tahoma',\r\n                        value: 'Tahoma,Geneva,sans-serif'\r\n                    },\r\n                    {\r\n                        text: 'Times New Roman',\r\n                        value: '\\'Times New Roman\\',Times,serif'\r\n                    },\r\n                    {\r\n                        text: 'Trebuchet MS',\r\n                        value: '\\'Trebuchet MS\\',Helvetica,sans-serif'\r\n                    },\r\n                    {\r\n                        text: 'Verdana',\r\n                        value: 'Verdana,Geneva,sans-serif'\r\n                    }\r\n                ],\r\n                fontSize: [\r\n                    {\r\n                        text: '1 (8pt)',\r\n                        value: 'xx-small'\r\n                    },\r\n                    {\r\n                        text: '2 (10pt)',\r\n                        value: 'x-small'\r\n                    },\r\n                    {\r\n                        text: '3 (12pt)',\r\n                        value: 'small'\r\n                    },\r\n                    {\r\n                        text: '4 (14pt)',\r\n                        value: 'medium'\r\n                    },\r\n                    {\r\n                        text: '5 (18pt)',\r\n                        value: 'large'\r\n                    },\r\n                    {\r\n                        text: '6 (24pt)',\r\n                        value: 'x-large'\r\n                    },\r\n                    {\r\n                        text: '7 (36pt)',\r\n                        value: 'xx-large'\r\n                    }\r\n                ],\r\n                formatBlock: [\r\n                    {\r\n                        text: 'Paragraph',\r\n                        value: 'p'\r\n                    },\r\n                    {\r\n                        text: 'Quotation',\r\n                        value: 'blockquote'\r\n                    },\r\n                    {\r\n                        text: 'Heading 1',\r\n                        value: 'h1'\r\n                    },\r\n                    {\r\n                        text: 'Heading 2',\r\n                        value: 'h2'\r\n                    },\r\n                    {\r\n                        text: 'Heading 3',\r\n                        value: 'h3'\r\n                    },\r\n                    {\r\n                        text: 'Heading 4',\r\n                        value: 'h4'\r\n                    },\r\n                    {\r\n                        text: 'Heading 5',\r\n                        value: 'h5'\r\n                    },\r\n                    {\r\n                        text: 'Heading 6',\r\n                        value: 'h6'\r\n                    }\r\n                ],\r\n                tools: [].concat.call(['formatting'], toolGroups.basic, toolGroups.alignment, toolGroups.lists, toolGroups.indenting, toolGroups.links, ['insertImage'], toolGroups.tables)\r\n            },\r\n            destroy: function () {\r\n                Widget.fn.destroy.call(this);\r\n                this._endTyping(true);\r\n                this._deregisterHandlers();\r\n                clearTimeout(this._spellCorrectTimeout);\r\n                this._focusOutside();\r\n                this.toolbar.destroy();\r\n                kendo.destroy(this.wrapper);\r\n            },\r\n            _focusOutside: function () {\r\n                if (kendo.support.browser.msie && this.textarea) {\r\n                    var tempInput = $('<input style=\\'position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0\\' />').appendTo(document.body).focus();\r\n                    tempInput.blur().remove();\r\n                }\r\n            },\r\n            state: function (toolName) {\r\n                var tool = Editor.defaultTools[toolName];\r\n                var finder = tool && (tool.options.finder || tool.finder);\r\n                var RangeUtils = kendo.ui.editor.RangeUtils;\r\n                var range, textNodes;\r\n                if (finder) {\r\n                    range = this.getRange();\r\n                    textNodes = RangeUtils.textNodes(range);\r\n                    if (!textNodes.length && range.collapsed) {\r\n                        textNodes = [range.startContainer];\r\n                    }\r\n                    return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\r\n                }\r\n                return false;\r\n            },\r\n            value: function (html) {\r\n                var body = this.body, editorNS = kendo.ui.editor, options = this.options, currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\r\n                if (html === undefined) {\r\n                    return currentHtml;\r\n                }\r\n                if (html == currentHtml) {\r\n                    return;\r\n                }\r\n                editorNS.Serializer.htmlToDom(html, body, options.deserialization);\r\n                this.selectionRestorePoint = null;\r\n                this.update();\r\n                this.toolbar.refreshTools();\r\n            },\r\n            saveSelection: function (range) {\r\n                range = range || this.getRange();\r\n                var container = range.commonAncestorContainer, body = this.body;\r\n                if (container == body || $.contains(body, container)) {\r\n                    this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range);\r\n                }\r\n            },\r\n            _focusBody: function () {\r\n                var body = this.body;\r\n                var iframe = this.wrapper && this.wrapper.find('iframe')[0];\r\n                var documentElement = this.document.documentElement;\r\n                var activeElement = kendo._activeElement();\r\n                if (activeElement != body && activeElement != iframe) {\r\n                    var scrollTop = documentElement.scrollTop;\r\n                    body.focus();\r\n                    documentElement.scrollTop = scrollTop;\r\n                }\r\n            },\r\n            restoreSelection: function () {\r\n                this._focusBody();\r\n                if (this.selectionRestorePoint) {\r\n                    this.selectRange(this.selectionRestorePoint.toRange());\r\n                }\r\n            },\r\n            focus: function () {\r\n                this.restoreSelection();\r\n            },\r\n            update: function (value) {\r\n                value = value || this.options.encoded ? this.encodedValue() : this.value();\r\n                if (this.textarea) {\r\n                    this.textarea.val(value);\r\n                } else {\r\n                    this._oldValue = value;\r\n                }\r\n            },\r\n            encodedValue: function () {\r\n                return kendo.ui.editor.Dom.encode(this.value());\r\n            },\r\n            createRange: function (document) {\r\n                return kendo.ui.editor.RangeUtils.createRange(document || this.document);\r\n            },\r\n            getSelection: function () {\r\n                return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\r\n            },\r\n            selectRange: function (range) {\r\n                this._focusBody();\r\n                var selection = this.getSelection();\r\n                selection.removeAllRanges();\r\n                selection.addRange(range);\r\n                this.saveSelection(range);\r\n            },\r\n            getRange: function () {\r\n                var selection = this.getSelection(), range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(), doc = this.document;\r\n                if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\r\n                    range.setStart(this.body, 0);\r\n                    range.collapse(true);\r\n                }\r\n                return range;\r\n            },\r\n            selectedHtml: function () {\r\n                return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\r\n            },\r\n            paste: function (html, options) {\r\n                this.focus();\r\n                var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\r\n                    range: this.getRange(),\r\n                    html: html\r\n                }, options));\r\n                command.editor = this;\r\n                command.exec();\r\n            },\r\n            exec: function (name, params) {\r\n                var that = this;\r\n                var command = null;\r\n                var range, tool, prevented;\r\n                if (!name) {\r\n                    throw new Error('kendoEditor.exec(): `name` parameter cannot be empty');\r\n                }\r\n                if (that.body.getAttribute('contenteditable') !== 'true' && name !== 'print' && name !== 'pdf') {\r\n                    return false;\r\n                }\r\n                name = name.toLowerCase();\r\n                if (!that.keyboard.isTypingInProgress()) {\r\n                    that.restoreSelection();\r\n                }\r\n                tool = that.toolbar.toolById(name);\r\n                if (!tool) {\r\n                    for (var id in Editor.defaultTools) {\r\n                        if (id.toLowerCase() == name) {\r\n                            tool = Editor.defaultTools[id];\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                if (tool) {\r\n                    range = that.getRange();\r\n                    if (tool.command) {\r\n                        command = tool.command(extend({ range: range }, params));\r\n                    }\r\n                    prevented = that.trigger('execute', {\r\n                        name: name,\r\n                        command: command\r\n                    });\r\n                    if (prevented) {\r\n                        return;\r\n                    }\r\n                    if (/^(undo|redo)$/i.test(name)) {\r\n                        that.undoRedoStack[name]();\r\n                    } else if (command) {\r\n                        if (!command.managesUndoRedo) {\r\n                            that.undoRedoStack.push(command);\r\n                        }\r\n                        command.editor = that;\r\n                        command.exec();\r\n                        if (command.async) {\r\n                            command.change = proxy(that._selectionChange, that);\r\n                            return;\r\n                        }\r\n                    }\r\n                    that._selectionChange();\r\n                }\r\n            }\r\n        });\r\n        Editor.defaultTools = {\r\n            undo: {\r\n                options: {\r\n                    key: 'Z',\r\n                    ctrl: true\r\n                }\r\n            },\r\n            redo: {\r\n                options: {\r\n                    key: 'Y',\r\n                    ctrl: true\r\n                }\r\n            }\r\n        };\r\n        kendo.ui.plugin(Editor);\r\n        var Tool = Class.extend({\r\n            init: function (options) {\r\n                this.options = options;\r\n            },\r\n            initialize: function (ui, options) {\r\n                ui.attr({\r\n                    unselectable: 'on',\r\n                    title: options.title\r\n                });\r\n                ui.children('.k-tool-text').html(options.title);\r\n            },\r\n            command: function (commandArguments) {\r\n                return new this.options.command(commandArguments);\r\n            },\r\n            update: $.noop\r\n        });\r\n        Tool.exec = function (editor, name, value) {\r\n            editor.exec(name, { value: value });\r\n        };\r\n        var FormatTool = Tool.extend({\r\n            init: function (options) {\r\n                Tool.fn.init.call(this, options);\r\n            },\r\n            command: function (commandArguments) {\r\n                var that = this;\r\n                return new kendo.ui.editor.FormatCommand(extend(commandArguments, { formatter: that.options.formatter }));\r\n            },\r\n            update: function (ui, nodes) {\r\n                var isFormatted = this.options.finder.isFormatted(nodes);\r\n                ui.toggleClass('k-state-selected', isFormatted);\r\n                ui.attr('aria-pressed', isFormatted);\r\n            }\r\n        });\r\n        EditorUtils.registerTool('separator', new Tool({ template: new ToolTemplate({ template: EditorUtils.separatorTemplate }) }));\r\n        var bomFill = browser.msie && browser.version < 9 ? '\\uFEFF' : '';\r\n        var emptyElementContent = '\\uFEFF';\r\n        if (browser.msie && browser.version == 10) {\r\n            emptyElementContent = ' ';\r\n        }\r\n        extend(kendo.ui, {\r\n            editor: {\r\n                ToolTemplate: ToolTemplate,\r\n                EditorUtils: EditorUtils,\r\n                Tool: Tool,\r\n                FormatTool: FormatTool,\r\n                _bomFill: bomFill,\r\n                emptyElementContent: emptyElementContent\r\n            }\r\n        });\r\n        if (kendo.PDFMixin) {\r\n            kendo.PDFMixin.extend(Editor.prototype);\r\n            Editor.prototype._drawPDF = function () {\r\n                return kendo.drawing.drawDOM(this.body, this.options.pdf);\r\n            };\r\n            Editor.prototype.saveAsPDF = function () {\r\n                var progress = new $.Deferred();\r\n                var promise = progress.promise();\r\n                var args = { promise: promise };\r\n                if (this.trigger('pdfExport', args)) {\r\n                    return;\r\n                }\r\n                var options = this.options.pdf;\r\n                this._drawPDF(progress).then(function (root) {\r\n                    return kendo.drawing.exportPDF(root, options);\r\n                }).done(function (dataURI) {\r\n                    kendo.saveAs({\r\n                        dataURI: dataURI,\r\n                        fileName: options.fileName,\r\n                        proxyURL: options.proxyURL,\r\n                        forceProxy: options.forceProxy\r\n                    });\r\n                    progress.resolve();\r\n                }).fail(function (err) {\r\n                    progress.reject(err);\r\n                });\r\n                return promise;\r\n            };\r\n        }\r\n    }(window.jQuery || window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('editor/dom', ['editor/main'], f);\r\n}(function () {\r\n    (function ($) {\r\n        var kendo = window.kendo, map = $.map, extend = $.extend, browser = kendo.support.browser, STYLE = 'style', FLOAT = 'float', CSSFLOAT = 'cssFloat', STYLEFLOAT = 'styleFloat', CLASS = 'class', KMARKER = 'k-marker';\r\n        function makeMap(items) {\r\n            var obj = {}, i, len;\r\n            for (i = 0, len = items.length; i < len; i++) {\r\n                obj[items[i]] = true;\r\n            }\r\n            return obj;\r\n        }\r\n        var empty = makeMap('area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed'.split(',')), nonListBlockElements = 'div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption'.split(','), blockElements = nonListBlockElements.concat([\r\n                'ul',\r\n                'ol',\r\n                'li'\r\n            ]), block = makeMap(blockElements), inlineElements = 'span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby'.split(','), inline = makeMap(inlineElements), fillAttrs = makeMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected'.split(','));\r\n        var normalize = function (node) {\r\n            if (node.nodeType == 1) {\r\n                node.normalize();\r\n            }\r\n        };\r\n        if (browser.msie && browser.version >= 8) {\r\n            normalize = function (parent) {\r\n                if (parent.nodeType == 1 && parent.firstChild) {\r\n                    var prev = parent.firstChild, node = prev;\r\n                    while (true) {\r\n                        node = node.nextSibling;\r\n                        if (!node) {\r\n                            break;\r\n                        }\r\n                        if (node.nodeType == 3 && prev.nodeType == 3) {\r\n                            node.nodeValue = prev.nodeValue + node.nodeValue;\r\n                            Dom.remove(prev);\r\n                        }\r\n                        prev = node;\r\n                    }\r\n                }\r\n            };\r\n        }\r\n        var whitespace = /^\\s+$/, emptyspace = /^[\\n\\r\\t]+$/, rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i, bom = /\\ufeff/g, whitespaceOrBom = /^(\\s+|\\ufeff)$/, persistedScrollTop, cssAttributes = ('color,padding-left,padding-right,padding-top,padding-bottom,' + 'background-color,background-attachment,background-image,background-position,background-repeat,' + 'border-top-style,border-top-width,border-top-color,' + 'border-bottom-style,border-bottom-width,border-bottom-color,' + 'border-left-style,border-left-width,border-left-color,' + 'border-right-style,border-right-width,border-right-color,' + 'font-family,font-size,font-style,font-variant,font-weight,line-height').split(','), htmlRe = /[<>\\&]/g, entityRe = /[\\u00A0-\\u2666<>\\&]/g, entityTable = {\r\n                34: 'quot',\r\n                38: 'amp',\r\n                39: 'apos',\r\n                60: 'lt',\r\n                62: 'gt',\r\n                160: 'nbsp',\r\n                161: 'iexcl',\r\n                162: 'cent',\r\n                163: 'pound',\r\n                164: 'curren',\r\n                165: 'yen',\r\n                166: 'brvbar',\r\n                167: 'sect',\r\n                168: 'uml',\r\n                169: 'copy',\r\n                170: 'ordf',\r\n                171: 'laquo',\r\n                172: 'not',\r\n                173: 'shy',\r\n                174: 'reg',\r\n                175: 'macr',\r\n                176: 'deg',\r\n                177: 'plusmn',\r\n                178: 'sup2',\r\n                179: 'sup3',\r\n                180: 'acute',\r\n                181: 'micro',\r\n                182: 'para',\r\n                183: 'middot',\r\n                184: 'cedil',\r\n                185: 'sup1',\r\n                186: 'ordm',\r\n                187: 'raquo',\r\n                188: 'frac14',\r\n                189: 'frac12',\r\n                190: 'frac34',\r\n                191: 'iquest',\r\n                192: 'Agrave',\r\n                193: 'Aacute',\r\n                194: 'Acirc',\r\n                195: 'Atilde',\r\n                196: 'Auml',\r\n                197: 'Aring',\r\n                198: 'AElig',\r\n                199: 'Ccedil',\r\n                200: 'Egrave',\r\n                201: 'Eacute',\r\n                202: 'Ecirc',\r\n                203: 'Euml',\r\n                204: 'Igrave',\r\n                205: 'Iacute',\r\n                206: 'Icirc',\r\n                207: 'Iuml',\r\n                208: 'ETH',\r\n                209: 'Ntilde',\r\n                210: 'Ograve',\r\n                211: 'Oacute',\r\n                212: 'Ocirc',\r\n                213: 'Otilde',\r\n                214: 'Ouml',\r\n                215: 'times',\r\n                216: 'Oslash',\r\n                217: 'Ugrave',\r\n                218: 'Uacute',\r\n                219: 'Ucirc',\r\n                220: 'Uuml',\r\n                221: 'Yacute',\r\n                222: 'THORN',\r\n                223: 'szlig',\r\n                224: 'agrave',\r\n                225: 'aacute',\r\n                226: 'acirc',\r\n                227: 'atilde',\r\n                228: 'auml',\r\n                229: 'aring',\r\n                230: 'aelig',\r\n                231: 'ccedil',\r\n                232: 'egrave',\r\n                233: 'eacute',\r\n                234: 'ecirc',\r\n                235: 'euml',\r\n                236: 'igrave',\r\n                237: 'iacute',\r\n                238: 'icirc',\r\n                239: 'iuml',\r\n                240: 'eth',\r\n                241: 'ntilde',\r\n                242: 'ograve',\r\n                243: 'oacute',\r\n                244: 'ocirc',\r\n                245: 'otilde',\r\n                246: 'ouml',\r\n                247: 'divide',\r\n                248: 'oslash',\r\n                249: 'ugrave',\r\n                250: 'uacute',\r\n                251: 'ucirc',\r\n                252: 'uuml',\r\n                253: 'yacute',\r\n                254: 'thorn',\r\n                255: 'yuml',\r\n                402: 'fnof',\r\n                913: 'Alpha',\r\n                914: 'Beta',\r\n                915: 'Gamma',\r\n                916: 'Delta',\r\n                917: 'Epsilon',\r\n                918: 'Zeta',\r\n                919: 'Eta',\r\n                920: 'Theta',\r\n                921: 'Iota',\r\n                922: 'Kappa',\r\n                923: 'Lambda',\r\n                924: 'Mu',\r\n                925: 'Nu',\r\n                926: 'Xi',\r\n                927: 'Omicron',\r\n                928: 'Pi',\r\n                929: 'Rho',\r\n                931: 'Sigma',\r\n                932: 'Tau',\r\n                933: 'Upsilon',\r\n                934: 'Phi',\r\n                935: 'Chi',\r\n                936: 'Psi',\r\n                937: 'Omega',\r\n                945: 'alpha',\r\n                946: 'beta',\r\n                947: 'gamma',\r\n                948: 'delta',\r\n                949: 'epsilon',\r\n                950: 'zeta',\r\n                951: 'eta',\r\n                952: 'theta',\r\n                953: 'iota',\r\n                954: 'kappa',\r\n                955: 'lambda',\r\n                956: 'mu',\r\n                957: 'nu',\r\n                958: 'xi',\r\n                959: 'omicron',\r\n                960: 'pi',\r\n                961: 'rho',\r\n                962: 'sigmaf',\r\n                963: 'sigma',\r\n                964: 'tau',\r\n                965: 'upsilon',\r\n                966: 'phi',\r\n                967: 'chi',\r\n                968: 'psi',\r\n                969: 'omega',\r\n                977: 'thetasym',\r\n                978: 'upsih',\r\n                982: 'piv',\r\n                8226: 'bull',\r\n                8230: 'hellip',\r\n                8242: 'prime',\r\n                8243: 'Prime',\r\n                8254: 'oline',\r\n                8260: 'frasl',\r\n                8472: 'weierp',\r\n                8465: 'image',\r\n                8476: 'real',\r\n                8482: 'trade',\r\n                8501: 'alefsym',\r\n                8592: 'larr',\r\n                8593: 'uarr',\r\n                8594: 'rarr',\r\n                8595: 'darr',\r\n                8596: 'harr',\r\n                8629: 'crarr',\r\n                8656: 'lArr',\r\n                8657: 'uArr',\r\n                8658: 'rArr',\r\n                8659: 'dArr',\r\n                8660: 'hArr',\r\n                8704: 'forall',\r\n                8706: 'part',\r\n                8707: 'exist',\r\n                8709: 'empty',\r\n                8711: 'nabla',\r\n                8712: 'isin',\r\n                8713: 'notin',\r\n                8715: 'ni',\r\n                8719: 'prod',\r\n                8721: 'sum',\r\n                8722: 'minus',\r\n                8727: 'lowast',\r\n                8730: 'radic',\r\n                8733: 'prop',\r\n                8734: 'infin',\r\n                8736: 'ang',\r\n                8743: 'and',\r\n                8744: 'or',\r\n                8745: 'cap',\r\n                8746: 'cup',\r\n                8747: 'int',\r\n                8756: 'there4',\r\n                8764: 'sim',\r\n                8773: 'cong',\r\n                8776: 'asymp',\r\n                8800: 'ne',\r\n                8801: 'equiv',\r\n                8804: 'le',\r\n                8805: 'ge',\r\n                8834: 'sub',\r\n                8835: 'sup',\r\n                8836: 'nsub',\r\n                8838: 'sube',\r\n                8839: 'supe',\r\n                8853: 'oplus',\r\n                8855: 'otimes',\r\n                8869: 'perp',\r\n                8901: 'sdot',\r\n                8968: 'lceil',\r\n                8969: 'rceil',\r\n                8970: 'lfloor',\r\n                8971: 'rfloor',\r\n                9001: 'lang',\r\n                9002: 'rang',\r\n                9674: 'loz',\r\n                9824: 'spades',\r\n                9827: 'clubs',\r\n                9829: 'hearts',\r\n                9830: 'diams',\r\n                338: 'OElig',\r\n                339: 'oelig',\r\n                352: 'Scaron',\r\n                353: 'scaron',\r\n                376: 'Yuml',\r\n                710: 'circ',\r\n                732: 'tilde',\r\n                8194: 'ensp',\r\n                8195: 'emsp',\r\n                8201: 'thinsp',\r\n                8204: 'zwnj',\r\n                8205: 'zwj',\r\n                8206: 'lrm',\r\n                8207: 'rlm',\r\n                8211: 'ndash',\r\n                8212: 'mdash',\r\n                8216: 'lsquo',\r\n                8217: 'rsquo',\r\n                8218: 'sbquo',\r\n                8220: 'ldquo',\r\n                8221: 'rdquo',\r\n                8222: 'bdquo',\r\n                8224: 'dagger',\r\n                8225: 'Dagger',\r\n                8240: 'permil',\r\n                8249: 'lsaquo',\r\n                8250: 'rsaquo',\r\n                8364: 'euro'\r\n            };\r\n        var Dom = {\r\n            block: block,\r\n            inline: inline,\r\n            findNodeIndex: function (node, skipText) {\r\n                var i = 0;\r\n                if (!node) {\r\n                    return -1;\r\n                }\r\n                while (true) {\r\n                    node = node.previousSibling;\r\n                    if (!node) {\r\n                        break;\r\n                    }\r\n                    if (!(skipText && node.nodeType == 3)) {\r\n                        i++;\r\n                    }\r\n                }\r\n                return i;\r\n            },\r\n            isDataNode: function (node) {\r\n                return node && node.nodeValue !== null && node.data !== null;\r\n            },\r\n            isAncestorOf: function (parent, node) {\r\n                try {\r\n                    return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\r\n                } catch (e) {\r\n                    return false;\r\n                }\r\n            },\r\n            isAncestorOrSelf: function (root, node) {\r\n                return Dom.isAncestorOf(root, node) || root == node;\r\n            },\r\n            findClosestAncestor: function (root, node) {\r\n                if (Dom.isAncestorOf(root, node)) {\r\n                    while (node && node.parentNode != root) {\r\n                        node = node.parentNode;\r\n                    }\r\n                }\r\n                return node;\r\n            },\r\n            getNodeLength: function (node) {\r\n                return Dom.isDataNode(node) ? node.length : node.childNodes.length;\r\n            },\r\n            splitDataNode: function (node, offset) {\r\n                var newNode = node.cloneNode(false);\r\n                var denormalizedText = '';\r\n                var iterator = node.nextSibling;\r\n                var temp;\r\n                while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\r\n                    denormalizedText += iterator.nodeValue;\r\n                    temp = iterator;\r\n                    iterator = iterator.nextSibling;\r\n                    Dom.remove(temp);\r\n                }\r\n                node.deleteData(offset, node.length);\r\n                newNode.deleteData(0, offset);\r\n                newNode.nodeValue += denormalizedText;\r\n                Dom.insertAfter(newNode, node);\r\n            },\r\n            attrEquals: function (node, attributes) {\r\n                for (var key in attributes) {\r\n                    var value = node[key];\r\n                    if (key == FLOAT) {\r\n                        value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\r\n                    }\r\n                    if (typeof value == 'object') {\r\n                        if (!Dom.attrEquals(value, attributes[key])) {\r\n                            return false;\r\n                        }\r\n                    } else if (value != attributes[key]) {\r\n                        return false;\r\n                    }\r\n                }\r\n                return true;\r\n            },\r\n            blockParentOrBody: function (node) {\r\n                return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\r\n            },\r\n            blockParents: function (nodes) {\r\n                var blocks = [], i, len;\r\n                for (i = 0, len = nodes.length; i < len; i++) {\r\n                    var block = Dom.parentOfType(nodes[i], Dom.blockElements);\r\n                    if (block && $.inArray(block, blocks) < 0) {\r\n                        blocks.push(block);\r\n                    }\r\n                }\r\n                return blocks;\r\n            },\r\n            windowFromDocument: function (document) {\r\n                return document.defaultView || document.parentWindow;\r\n            },\r\n            normalize: normalize,\r\n            blockElements: blockElements,\r\n            nonListBlockElements: nonListBlockElements,\r\n            inlineElements: inlineElements,\r\n            empty: empty,\r\n            fillAttrs: fillAttrs,\r\n            toHex: function (color) {\r\n                var matches = rgb.exec(color);\r\n                if (!matches) {\r\n                    return color;\r\n                }\r\n                return '#' + map(matches.slice(1), function (x) {\r\n                    x = parseInt(x, 10).toString(16);\r\n                    return x.length > 1 ? x : '0' + x;\r\n                }).join('');\r\n            },\r\n            encode: function (value, options) {\r\n                var encodableChars = !options || options.entities ? entityRe : htmlRe;\r\n                return value.replace(encodableChars, function (c) {\r\n                    var charCode = c.charCodeAt(0);\r\n                    var entity = entityTable[charCode];\r\n                    return entity ? '&' + entity + ';' : c;\r\n                });\r\n            },\r\n            stripBom: function (text) {\r\n                return (text || '').replace(bom, '');\r\n            },\r\n            stripBomNode: function (node) {\r\n                if (node && node.nodeType === 3 && node.nodeValue === '\\uFEFF') {\r\n                    node.parentNode.removeChild(node);\r\n                }\r\n            },\r\n            insignificant: function (node) {\r\n                var attr = node.attributes;\r\n                return node.className == 'k-marker' || Dom.is(node, 'br') && (node.className == 'k-br' || attr._moz_dirty || attr._moz_editor_bogus_node);\r\n            },\r\n            significantNodes: function (nodes) {\r\n                return $.grep(nodes, function (child) {\r\n                    var name = Dom.name(child);\r\n                    if (name == 'br') {\r\n                        return false;\r\n                    } else if (Dom.insignificant(child)) {\r\n                        return false;\r\n                    } else if (child.nodeType == 3 && whitespaceOrBom.test(child.nodeValue)) {\r\n                        return false;\r\n                    } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                });\r\n            },\r\n            emptyNode: function (node) {\r\n                return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\r\n            },\r\n            name: function (node) {\r\n                return node.nodeName.toLowerCase();\r\n            },\r\n            significantChildNodes: function (node) {\r\n                return $.grep(node.childNodes, function (child) {\r\n                    return child.nodeType != 3 || !Dom.isWhitespace(child);\r\n                });\r\n            },\r\n            lastTextNode: function (node) {\r\n                var result = null;\r\n                if (node.nodeType == 3) {\r\n                    return node;\r\n                }\r\n                for (var child = node.lastChild; child; child = child.previousSibling) {\r\n                    result = Dom.lastTextNode(child);\r\n                    if (result) {\r\n                        return result;\r\n                    }\r\n                }\r\n                return result;\r\n            },\r\n            is: function (node, nodeName) {\r\n                return Dom.name(node) == nodeName;\r\n            },\r\n            isMarker: function (node) {\r\n                return node.className == KMARKER;\r\n            },\r\n            isWhitespace: function (node) {\r\n                return whitespace.test(node.nodeValue);\r\n            },\r\n            isEmptyspace: function (node) {\r\n                return emptyspace.test(node.nodeValue);\r\n            },\r\n            isBlock: function (node) {\r\n                return block[Dom.name(node)];\r\n            },\r\n            isEmpty: function (node) {\r\n                return empty[Dom.name(node)];\r\n            },\r\n            isInline: function (node) {\r\n                return inline[Dom.name(node)];\r\n            },\r\n            scrollContainer: function (doc) {\r\n                var wnd = Dom.windowFromDocument(doc), scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\r\n                if (kendo.support.browser.webkit || scrollContainer.compatMode == 'BackCompat') {\r\n                    scrollContainer = scrollContainer.body;\r\n                } else {\r\n                    scrollContainer = scrollContainer.documentElement;\r\n                }\r\n                return scrollContainer;\r\n            },\r\n            scrollTo: function (node) {\r\n                var element = $(Dom.isDataNode(node) ? node.parentNode : node), wnd = Dom.windowFromDocument(node.ownerDocument), windowHeight = wnd.innerHeight, elementTop, elementHeight, scrollContainer = Dom.scrollContainer(node.ownerDocument);\r\n                elementTop = element.offset().top;\r\n                elementHeight = element[0].offsetHeight;\r\n                if (!elementHeight) {\r\n                    elementHeight = parseInt(element.css('line-height'), 10) || Math.ceil(1.2 * parseInt(element.css('font-size'), 10)) || 15;\r\n                }\r\n                if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\r\n                    scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\r\n                }\r\n            },\r\n            persistScrollTop: function (doc) {\r\n                persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\r\n            },\r\n            restoreScrollTop: function (doc) {\r\n                Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\r\n            },\r\n            insertAt: function (parent, newElement, position) {\r\n                parent.insertBefore(newElement, parent.childNodes[position] || null);\r\n            },\r\n            insertBefore: function (newElement, referenceElement) {\r\n                if (referenceElement.parentNode) {\r\n                    return referenceElement.parentNode.insertBefore(newElement, referenceElement);\r\n                } else {\r\n                    return referenceElement;\r\n                }\r\n            },\r\n            insertAfter: function (newElement, referenceElement) {\r\n                return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\r\n            },\r\n            remove: function (node) {\r\n                node.parentNode.removeChild(node);\r\n            },\r\n            removeTextSiblings: function (node) {\r\n                var parentNode = node.parentNode;\r\n                while (node.nextSibling && node.nextSibling.nodeType == 3) {\r\n                    parentNode.removeChild(node.nextSibling);\r\n                }\r\n                while (node.previousSibling && node.previousSibling.nodeType == 3) {\r\n                    parentNode.removeChild(node.previousSibling);\r\n                }\r\n            },\r\n            trim: function (parent) {\r\n                for (var i = parent.childNodes.length - 1; i >= 0; i--) {\r\n                    var node = parent.childNodes[i];\r\n                    if (Dom.isDataNode(node)) {\r\n                        if (!Dom.stripBom(node.nodeValue).length) {\r\n                            Dom.remove(node);\r\n                        }\r\n                        if (Dom.isWhitespace(node)) {\r\n                            Dom.insertBefore(node, parent);\r\n                        }\r\n                    } else if (node.className != KMARKER) {\r\n                        Dom.trim(node);\r\n                        if (!node.childNodes.length && !Dom.isEmpty(node)) {\r\n                            Dom.remove(node);\r\n                        }\r\n                    }\r\n                }\r\n                return parent;\r\n            },\r\n            closest: function (node, tag) {\r\n                while (node && Dom.name(node) != tag) {\r\n                    node = node.parentNode;\r\n                }\r\n                return node;\r\n            },\r\n            sibling: function (node, direction) {\r\n                do {\r\n                    node = node[direction];\r\n                } while (node && node.nodeType != 1);\r\n                return node;\r\n            },\r\n            next: function (node) {\r\n                return Dom.sibling(node, 'nextSibling');\r\n            },\r\n            prev: function (node) {\r\n                return Dom.sibling(node, 'previousSibling');\r\n            },\r\n            parentOfType: function (node, tags) {\r\n                do {\r\n                    node = node.parentNode;\r\n                } while (node && !Dom.ofType(node, tags));\r\n                return node;\r\n            },\r\n            ofType: function (node, tags) {\r\n                return $.inArray(Dom.name(node), tags) >= 0;\r\n            },\r\n            changeTag: function (referenceElement, tagName, skipAttributes) {\r\n                var newElement = Dom.create(referenceElement.ownerDocument, tagName), attributes = referenceElement.attributes, i, len, name, value, attribute;\r\n                if (!skipAttributes) {\r\n                    for (i = 0, len = attributes.length; i < len; i++) {\r\n                        attribute = attributes[i];\r\n                        if (attribute.specified) {\r\n                            name = attribute.nodeName;\r\n                            value = attribute.nodeValue;\r\n                            if (name == CLASS) {\r\n                                newElement.className = value;\r\n                            } else if (name == STYLE) {\r\n                                newElement.style.cssText = referenceElement.style.cssText;\r\n                            } else {\r\n                                newElement.setAttribute(name, value);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                while (referenceElement.firstChild) {\r\n                    newElement.appendChild(referenceElement.firstChild);\r\n                }\r\n                Dom.insertBefore(newElement, referenceElement);\r\n                Dom.remove(referenceElement);\r\n                return newElement;\r\n            },\r\n            editableParent: function (node) {\r\n                while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\r\n                    node = node.parentNode;\r\n                }\r\n                return node;\r\n            },\r\n            wrap: function (node, wrapper) {\r\n                Dom.insertBefore(wrapper, node);\r\n                wrapper.appendChild(node);\r\n                return wrapper;\r\n            },\r\n            unwrap: function (node) {\r\n                var parent = node.parentNode;\r\n                while (node.firstChild) {\r\n                    parent.insertBefore(node.firstChild, node);\r\n                }\r\n                parent.removeChild(node);\r\n            },\r\n            create: function (document, tagName, attributes) {\r\n                return Dom.attr(document.createElement(tagName), attributes);\r\n            },\r\n            attr: function (element, attributes) {\r\n                attributes = extend({}, attributes);\r\n                if (attributes && STYLE in attributes) {\r\n                    Dom.style(element, attributes.style);\r\n                    delete attributes.style;\r\n                }\r\n                for (var attr in attributes) {\r\n                    if (attributes[attr] === null) {\r\n                        element.removeAttribute(attr);\r\n                        delete attributes[attr];\r\n                    } else if (attr == 'className') {\r\n                        element[attr] = attributes[attr];\r\n                    }\r\n                }\r\n                return extend(element, attributes);\r\n            },\r\n            style: function (node, value) {\r\n                $(node).css(value || {});\r\n            },\r\n            unstyle: function (node, value) {\r\n                for (var key in value) {\r\n                    if (key == FLOAT) {\r\n                        key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\r\n                    }\r\n                    node.style[key] = '';\r\n                }\r\n                if (node.style.cssText === '') {\r\n                    node.removeAttribute(STYLE);\r\n                }\r\n            },\r\n            inlineStyle: function (body, name, attributes) {\r\n                var span = $(Dom.create(body.ownerDocument, name, attributes)), style;\r\n                body.appendChild(span[0]);\r\n                style = map(cssAttributes, function (value) {\r\n                    if (browser.msie && value == 'line-height' && span.css(value) == '1px') {\r\n                        return 'line-height:1.5';\r\n                    } else {\r\n                        return value + ':' + span.css(value);\r\n                    }\r\n                }).join(';');\r\n                span.remove();\r\n                return style;\r\n            },\r\n            getEffectiveBackground: function (element) {\r\n                var backgroundStyle = element.css('background-color');\r\n                if (backgroundStyle.indexOf('rgba(0, 0, 0, 0') < 0 && backgroundStyle !== 'transparent') {\r\n                    return backgroundStyle;\r\n                } else if (element[0].tagName.toLowerCase() === 'html') {\r\n                    return 'Window';\r\n                } else {\r\n                    return Dom.getEffectiveBackground(element.parent());\r\n                }\r\n            },\r\n            innerText: function (node) {\r\n                var text = node.innerHTML;\r\n                text = text.replace(/<!--(.|\\s)*?-->/gi, '');\r\n                text = text.replace(/<\\/?[^>]+?\\/?>/gm, '');\r\n                return text;\r\n            },\r\n            removeClass: function (node, classNames) {\r\n                var className = ' ' + node.className + ' ', classes = classNames.split(' '), i, len;\r\n                for (i = 0, len = classes.length; i < len; i++) {\r\n                    className = className.replace(' ' + classes[i] + ' ', ' ');\r\n                }\r\n                className = $.trim(className);\r\n                if (className.length) {\r\n                    node.className = className;\r\n                } else {\r\n                    node.removeAttribute(CLASS);\r\n                }\r\n            },\r\n            commonAncestor: function () {\r\n                var count = arguments.length, paths = [], minPathLength = Infinity, output = null, i, ancestors, node, first, j;\r\n                if (!count) {\r\n                    return null;\r\n                }\r\n                if (count == 1) {\r\n                    return arguments[0];\r\n                }\r\n                for (i = 0; i < count; i++) {\r\n                    ancestors = [];\r\n                    node = arguments[i];\r\n                    while (node) {\r\n                        ancestors.push(node);\r\n                        node = node.parentNode;\r\n                    }\r\n                    paths.push(ancestors.reverse());\r\n                    minPathLength = Math.min(minPathLength, ancestors.length);\r\n                }\r\n                if (count == 1) {\r\n                    return paths[0][0];\r\n                }\r\n                for (i = 0; i < minPathLength; i++) {\r\n                    first = paths[0][i];\r\n                    for (j = 1; j < count; j++) {\r\n                        if (first != paths[j][i]) {\r\n                            return output;\r\n                        }\r\n                    }\r\n                    output = first;\r\n                }\r\n                return output;\r\n            },\r\n            closestSplittableParent: function (nodes) {\r\n                var result;\r\n                if (nodes.length == 1) {\r\n                    result = Dom.parentOfType(nodes[0], [\r\n                        'ul',\r\n                        'ol'\r\n                    ]);\r\n                } else {\r\n                    result = Dom.commonAncestor.apply(null, nodes);\r\n                }\r\n                if (!result) {\r\n                    result = Dom.parentOfType(nodes[0], [\r\n                        'p',\r\n                        'td'\r\n                    ]) || nodes[0].ownerDocument.body;\r\n                }\r\n                if (Dom.isInline(result)) {\r\n                    result = Dom.blockParentOrBody(result);\r\n                }\r\n                var editableParents = map(nodes, Dom.editableParent);\r\n                var editableAncestor = Dom.commonAncestor(editableParents)[0];\r\n                if ($.contains(result, editableAncestor)) {\r\n                    result = editableAncestor;\r\n                }\r\n                return result;\r\n            },\r\n            closestEditable: function (node, types) {\r\n                var closest;\r\n                var editable = Dom.editableParent(node);\r\n                if (Dom.ofType(node, types)) {\r\n                    closest = node;\r\n                } else {\r\n                    closest = Dom.parentOfType(node, types);\r\n                }\r\n                if (closest && editable && $.contains(closest, editable)) {\r\n                    closest = editable;\r\n                } else if (!closest && editable) {\r\n                    closest = editable;\r\n                }\r\n                return closest;\r\n            },\r\n            closestEditableOfType: function (node, types) {\r\n                var editable = Dom.closestEditable(node, types);\r\n                if (editable && Dom.ofType(editable, types)) {\r\n                    return editable;\r\n                }\r\n            },\r\n            filter: function (tagName, nodes, invert) {\r\n                var i = 0;\r\n                var len = nodes.length;\r\n                var result = [];\r\n                var name;\r\n                for (; i < len; i++) {\r\n                    name = Dom.name(nodes[i]);\r\n                    if (!invert && name == tagName || invert && name != tagName) {\r\n                        result.push(nodes[i]);\r\n                    }\r\n                }\r\n                return result;\r\n            },\r\n            ensureTrailingBreaks: function (node) {\r\n                var elements = $(node).find('p,td,th');\r\n                var length = elements.length;\r\n                var i = 0;\r\n                if (length) {\r\n                    for (; i < length; i++) {\r\n                        Dom.ensureTrailingBreak(elements[i]);\r\n                    }\r\n                } else {\r\n                    Dom.ensureTrailingBreak(node);\r\n                }\r\n            },\r\n            removeTrailingBreak: function (node) {\r\n                $(node).find('br[type=_moz],.k-br').remove();\r\n            },\r\n            ensureTrailingBreak: function (node) {\r\n                Dom.removeTrailingBreak(node);\r\n                var lastChild = node.lastChild;\r\n                var name = lastChild && Dom.name(lastChild);\r\n                var br;\r\n                if (!name || name != 'br' && name != 'img' || name == 'br' && lastChild.className != 'k-br') {\r\n                    br = node.ownerDocument.createElement('br');\r\n                    br.className = 'k-br';\r\n                    node.appendChild(br);\r\n                }\r\n            }\r\n        };\r\n        kendo.ui.editor.Dom = Dom;\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('editor/serializer', ['editor/dom'], f);\r\n}(function () {\r\n    (function ($, undefined) {\r\n        var kendo = window.kendo;\r\n        var Editor = kendo.ui.editor;\r\n        var dom = Editor.Dom;\r\n        var extend = $.extend;\r\n        var fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\r\n        var quoteRe = /\"/g;\r\n        var brRe = /<br[^>]*>/i;\r\n        var pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\r\n        var emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\r\n        var cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\r\n        var sizzleAttr = /^sizzle-\\d+/i;\r\n        var scriptAttr = /^k-script-/i;\r\n        var onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\r\n        var div = document.createElement('div');\r\n        div.innerHTML = ' <hr>';\r\n        var supportsLeadingWhitespace = div.firstChild.nodeType === 3;\r\n        div = null;\r\n        var isFunction = $.isFunction;\r\n        var Serializer = {\r\n            toEditableHtml: function (html) {\r\n                var br = '<br class=\"k-br\">';\r\n                html = html || '';\r\n                return html.replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, '<!--[CDATA[$1]]-->').replace(/<(\\/?)script([^>]*)>/gi, '<$1k:script$2>').replace(/<img([^>]*)>/gi, function (match) {\r\n                    return match.replace(onerrorRe, '');\r\n                }).replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/gi, '$1').replace(/^<(table|blockquote)/i, br + '<$1').replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1').replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\r\n            },\r\n            _fillEmptyElements: function (body) {\r\n                $(body).find('p,td').each(function () {\r\n                    var p = $(this);\r\n                    if (/^\\s*$/g.test(p.text()) && !p.find('img,input').length) {\r\n                        var node = this;\r\n                        while (node.firstChild && node.firstChild.nodeType != 3) {\r\n                            node = node.firstChild;\r\n                        }\r\n                        if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\r\n                            node.innerHTML = kendo.ui.editor.emptyElementContent;\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            _removeSystemElements: function (body) {\r\n                $('.k-paste-container', body).remove();\r\n            },\r\n            _resetOrderedLists: function (root) {\r\n                var ols = root.getElementsByTagName('ol'), i, ol, originalStart;\r\n                for (i = 0; i < ols.length; i++) {\r\n                    ol = ols[i];\r\n                    originalStart = ol.getAttribute('start');\r\n                    ol.setAttribute('start', 1);\r\n                    if (originalStart) {\r\n                        ol.setAttribute('start', originalStart);\r\n                    } else {\r\n                        ol.removeAttribute(originalStart);\r\n                    }\r\n                }\r\n            },\r\n            _preventScriptExecution: function (root) {\r\n                $(root).find('*').each(function () {\r\n                    var attributes = this.attributes;\r\n                    var attribute, i, l, name;\r\n                    for (i = 0, l = attributes.length; i < l; i++) {\r\n                        attribute = attributes[i];\r\n                        name = attribute.nodeName;\r\n                        if (attribute.specified && /^on/i.test(name)) {\r\n                            this.setAttribute('k-script-' + name, attribute.value);\r\n                            this.removeAttribute(name);\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            htmlToDom: function (html, root, options) {\r\n                var browser = kendo.support.browser;\r\n                var msie = browser.msie;\r\n                var legacyIE = msie && browser.version < 9;\r\n                var originalSrc = 'originalsrc';\r\n                var originalHref = 'originalhref';\r\n                var o = options || {};\r\n                html = Serializer.toEditableHtml(html);\r\n                if (legacyIE) {\r\n                    html = '<br/>' + html;\r\n                    html = html.replace(/href\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalHref + '=\"$1\"');\r\n                    html = html.replace(/src\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalSrc + '=\"$1\"');\r\n                }\r\n                if (isFunction(o.custom)) {\r\n                    html = o.custom(html) || html;\r\n                }\r\n                root.innerHTML = html;\r\n                if (legacyIE) {\r\n                    dom.remove(root.firstChild);\r\n                    $(root).find('k\\\\:script,script,link,img,a').each(function () {\r\n                        var node = this;\r\n                        if (node[originalHref]) {\r\n                            node.setAttribute('href', node[originalHref]);\r\n                            node.removeAttribute(originalHref);\r\n                        }\r\n                        if (node[originalSrc]) {\r\n                            node.setAttribute('src', node[originalSrc]);\r\n                            node.removeAttribute(originalSrc);\r\n                        }\r\n                    });\r\n                } else if (msie) {\r\n                    dom.normalize(root);\r\n                    Serializer._resetOrderedLists(root);\r\n                }\r\n                Serializer._preventScriptExecution(root);\r\n                Serializer._fillEmptyElements(root);\r\n                Serializer._removeSystemElements(root);\r\n                $('table', root).addClass('k-table');\r\n                return root;\r\n            },\r\n            domToXhtml: function (root, options) {\r\n                var result = [];\r\n                function semanticFilter(attributes) {\r\n                    return $.grep(attributes, function (attr) {\r\n                        return attr.name != 'style';\r\n                    });\r\n                }\r\n                var tagMap = {\r\n                    iframe: {\r\n                        start: function (node) {\r\n                            result.push('<iframe');\r\n                            attr(node);\r\n                            result.push('>');\r\n                        },\r\n                        end: function () {\r\n                            result.push('</iframe>');\r\n                        }\r\n                    },\r\n                    'k:script': {\r\n                        start: function (node) {\r\n                            result.push('<script');\r\n                            attr(node);\r\n                            result.push('>');\r\n                        },\r\n                        end: function () {\r\n                            result.push('</script>');\r\n                        },\r\n                        skipEncoding: true\r\n                    },\r\n                    span: {\r\n                        semantic: true,\r\n                        start: function (node) {\r\n                            var style = node.style;\r\n                            var attributes = specifiedAttributes(node);\r\n                            var semanticAttributes = semanticFilter(attributes);\r\n                            if (semanticAttributes.length) {\r\n                                result.push('<span');\r\n                                attr(node, semanticAttributes);\r\n                                result.push('>');\r\n                            }\r\n                            if (style.textDecoration == 'underline') {\r\n                                result.push('<u>');\r\n                            }\r\n                            var font = [];\r\n                            if (style.color) {\r\n                                font.push('color=\"' + dom.toHex(style.color) + '\"');\r\n                            }\r\n                            if (style.fontFamily) {\r\n                                font.push('face=\"' + style.fontFamily + '\"');\r\n                            }\r\n                            if (style.fontSize) {\r\n                                var size = $.inArray(style.fontSize, fontSizeMappings);\r\n                                font.push('size=\"' + size + '\"');\r\n                            }\r\n                            if (font.length) {\r\n                                result.push('<font ' + font.join(' ') + '>');\r\n                            }\r\n                        },\r\n                        end: function (node) {\r\n                            var style = node.style;\r\n                            if (style.color || style.fontFamily || style.fontSize) {\r\n                                result.push('</font>');\r\n                            }\r\n                            if (style.textDecoration == 'underline') {\r\n                                result.push('</u>');\r\n                            }\r\n                            if (semanticFilter(specifiedAttributes(node)).length) {\r\n                                result.push('</span>');\r\n                            }\r\n                        }\r\n                    },\r\n                    strong: {\r\n                        semantic: true,\r\n                        start: function () {\r\n                            result.push('<b>');\r\n                        },\r\n                        end: function () {\r\n                            result.push('</b>');\r\n                        }\r\n                    },\r\n                    em: {\r\n                        semantic: true,\r\n                        start: function () {\r\n                            result.push('<i>');\r\n                        },\r\n                        end: function () {\r\n                            result.push('</i>');\r\n                        }\r\n                    },\r\n                    b: {\r\n                        semantic: false,\r\n                        start: function () {\r\n                            result.push('<strong>');\r\n                        },\r\n                        end: function () {\r\n                            result.push('</strong>');\r\n                        }\r\n                    },\r\n                    i: {\r\n                        semantic: false,\r\n                        start: function () {\r\n                            result.push('<em>');\r\n                        },\r\n                        end: function () {\r\n                            result.push('</em>');\r\n                        }\r\n                    },\r\n                    u: {\r\n                        semantic: false,\r\n                        start: function () {\r\n                            result.push('<span style=\"text-decoration:underline;\">');\r\n                        },\r\n                        end: function () {\r\n                            result.push('</span>');\r\n                        }\r\n                    },\r\n                    font: {\r\n                        semantic: false,\r\n                        start: function (node) {\r\n                            result.push('<span style=\"');\r\n                            var color = node.getAttribute('color');\r\n                            var size = fontSizeMappings[node.getAttribute('size')];\r\n                            var face = node.getAttribute('face');\r\n                            if (color) {\r\n                                result.push('color:');\r\n                                result.push(dom.toHex(color));\r\n                                result.push(';');\r\n                            }\r\n                            if (face) {\r\n                                result.push('font-family:');\r\n                                result.push(face);\r\n                                result.push(';');\r\n                            }\r\n                            if (size) {\r\n                                result.push('font-size:');\r\n                                result.push(size);\r\n                                result.push(';');\r\n                            }\r\n                            result.push('\">');\r\n                        },\r\n                        end: function () {\r\n                            result.push('</span>');\r\n                        }\r\n                    }\r\n                };\r\n                tagMap.script = tagMap['k:script'];\r\n                options = options || {};\r\n                if (typeof options.semantic == 'undefined') {\r\n                    options.semantic = true;\r\n                }\r\n                function cssProperties(cssText) {\r\n                    var trim = $.trim;\r\n                    var css = trim(cssText);\r\n                    var match;\r\n                    var property, value;\r\n                    var properties = [];\r\n                    cssDeclaration.lastIndex = 0;\r\n                    while (true) {\r\n                        match = cssDeclaration.exec(css);\r\n                        if (!match) {\r\n                            break;\r\n                        }\r\n                        property = trim(match[1].toLowerCase());\r\n                        value = trim(match[2]);\r\n                        if (property == 'font-size-adjust' || property == 'font-stretch') {\r\n                            continue;\r\n                        }\r\n                        if (property.indexOf('color') >= 0) {\r\n                            value = dom.toHex(value);\r\n                        } else if (property.indexOf('font') >= 0) {\r\n                            value = value.replace(quoteRe, '\\'');\r\n                        } else if (/\\burl\\(/g.test(value)) {\r\n                            value = value.replace(quoteRe, '');\r\n                        }\r\n                        properties.push({\r\n                            property: property,\r\n                            value: value\r\n                        });\r\n                    }\r\n                    return properties;\r\n                }\r\n                function styleAttr(cssText) {\r\n                    var properties = cssProperties(cssText);\r\n                    var i;\r\n                    for (i = 0; i < properties.length; i++) {\r\n                        result.push(properties[i].property);\r\n                        result.push(':');\r\n                        result.push(properties[i].value);\r\n                        result.push(';');\r\n                    }\r\n                }\r\n                function specifiedAttributes(node) {\r\n                    var result = [];\r\n                    var attributes = node.attributes;\r\n                    var attribute, i, l;\r\n                    var name, value, specified;\r\n                    for (i = 0, l = attributes.length; i < l; i++) {\r\n                        attribute = attributes[i];\r\n                        name = attribute.nodeName;\r\n                        value = attribute.value;\r\n                        specified = attribute.specified;\r\n                        if (name == 'value' && 'value' in node && node.value) {\r\n                            specified = true;\r\n                        } else if (name == 'type' && value == 'text') {\r\n                            specified = true;\r\n                        } else if (name == 'class' && !value) {\r\n                            specified = false;\r\n                        } else if (sizzleAttr.test(name)) {\r\n                            specified = false;\r\n                        } else if (name == 'complete') {\r\n                            specified = false;\r\n                        } else if (name == 'altHtml') {\r\n                            specified = false;\r\n                        } else if (name == 'start' && dom.is(node, 'ul')) {\r\n                            specified = false;\r\n                        } else if (name == 'start' && dom.is(node, 'ol') && value == '1') {\r\n                            specified = false;\r\n                        } else if (name.indexOf('_moz') >= 0) {\r\n                            specified = false;\r\n                        } else if (scriptAttr.test(name)) {\r\n                            specified = !!options.scripts;\r\n                        }\r\n                        if (specified) {\r\n                            result.push(attribute);\r\n                        }\r\n                    }\r\n                    return result;\r\n                }\r\n                function attr(node, attributes) {\r\n                    var i, l, attribute, name, value;\r\n                    attributes = attributes || specifiedAttributes(node);\r\n                    if (dom.is(node, 'img')) {\r\n                        var width = node.style.width, height = node.style.height, $node = $(node);\r\n                        if (width && pixelRe.test(width)) {\r\n                            $node.attr('width', parseInt(width, 10));\r\n                            dom.unstyle(node, { width: undefined });\r\n                        }\r\n                        if (height && pixelRe.test(height)) {\r\n                            $node.attr('height', parseInt(height, 10));\r\n                            dom.unstyle(node, { height: undefined });\r\n                        }\r\n                    }\r\n                    if (!attributes.length) {\r\n                        return;\r\n                    }\r\n                    attributes.sort(function (a, b) {\r\n                        return a.nodeName > b.nodeName ? 1 : a.nodeName < b.nodeName ? -1 : 0;\r\n                    });\r\n                    for (i = 0, l = attributes.length; i < l; i++) {\r\n                        attribute = attributes[i];\r\n                        name = attribute.nodeName;\r\n                        value = attribute.value;\r\n                        if (name == 'class' && value == 'k-table') {\r\n                            continue;\r\n                        }\r\n                        name = name.replace(scriptAttr, '');\r\n                        result.push(' ');\r\n                        result.push(name);\r\n                        result.push('=\"');\r\n                        if (name == 'style') {\r\n                            styleAttr(value || node.style.cssText);\r\n                        } else if (name == 'src' || name == 'href') {\r\n                            result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\r\n                        } else {\r\n                            result.push(dom.fillAttrs[name] ? name : value);\r\n                        }\r\n                        result.push('\"');\r\n                    }\r\n                }\r\n                function children(node, skip, skipEncoding) {\r\n                    for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\r\n                        child(childNode, skip, skipEncoding);\r\n                    }\r\n                }\r\n                function text(node) {\r\n                    return node.nodeValue.replace(/\\ufeff/g, '');\r\n                }\r\n                function isEmptyBomNode(node) {\r\n                    if (node.nodeValue === '\\uFEFF') {\r\n                        do {\r\n                            node = node.parentNode;\r\n                            if (dom.is(node, 'td') || node.childNodes.length !== 1) {\r\n                                return false;\r\n                            }\r\n                        } while (!dom.isBlock(node));\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                }\r\n                function child(node, skip, skipEncoding) {\r\n                    var nodeType = node.nodeType, tagName, mapper, parent, value, previous;\r\n                    if (nodeType == 1) {\r\n                        tagName = dom.name(node);\r\n                        if (!tagName || dom.insignificant(node)) {\r\n                            return;\r\n                        }\r\n                        if (!options.scripts && (tagName == 'script' || tagName == 'k:script')) {\r\n                            return;\r\n                        }\r\n                        mapper = tagMap[tagName];\r\n                        if (mapper) {\r\n                            if (typeof mapper.semantic == 'undefined' || options.semantic ^ mapper.semantic) {\r\n                                mapper.start(node);\r\n                                children(node, false, mapper.skipEncoding);\r\n                                mapper.end(node);\r\n                                return;\r\n                            }\r\n                        }\r\n                        result.push('<');\r\n                        result.push(tagName);\r\n                        attr(node);\r\n                        if (dom.empty[tagName]) {\r\n                            result.push(' />');\r\n                        } else {\r\n                            result.push('>');\r\n                            children(node, skip || dom.is(node, 'pre'));\r\n                            result.push('</');\r\n                            result.push(tagName);\r\n                            result.push('>');\r\n                        }\r\n                    } else if (nodeType == 3) {\r\n                        if (isEmptyBomNode(node)) {\r\n                            result.push('&nbsp;');\r\n                            return;\r\n                        }\r\n                        value = text(node);\r\n                        if (!skip && supportsLeadingWhitespace) {\r\n                            parent = node.parentNode;\r\n                            previous = node.previousSibling;\r\n                            if (!previous) {\r\n                                previous = (dom.isInline(parent) ? parent : node).previousSibling;\r\n                            }\r\n                            if (!previous || previous.innerHTML === '' || dom.isBlock(previous)) {\r\n                                value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\r\n                            }\r\n                            value = value.replace(/ +/, ' ');\r\n                        }\r\n                        result.push(skipEncoding ? value : dom.encode(value, options));\r\n                    } else if (nodeType == 4) {\r\n                        result.push('<![CDATA[');\r\n                        result.push(node.data);\r\n                        result.push(']]>');\r\n                    } else if (nodeType == 8) {\r\n                        if (node.data.indexOf('[CDATA[') < 0) {\r\n                            result.push('<!--');\r\n                            result.push(node.data);\r\n                            result.push('-->');\r\n                        } else {\r\n                            result.push('<!');\r\n                            result.push(node.data);\r\n                            result.push('>');\r\n                        }\r\n                    }\r\n                }\r\n                function textOnly(root) {\r\n                    var childrenCount = root.childNodes.length;\r\n                    var textChild = childrenCount && root.firstChild.nodeType == 3;\r\n                    return textChild && (childrenCount == 1 || childrenCount == 2 && dom.insignificant(root.lastChild));\r\n                }\r\n                function runCustom() {\r\n                    if ($.isFunction(options.custom)) {\r\n                        result = options.custom(result) || result;\r\n                    }\r\n                }\r\n                if (textOnly(root)) {\r\n                    result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\r\n                    runCustom();\r\n                    return result;\r\n                }\r\n                children(root);\r\n                result = result.join('');\r\n                runCustom();\r\n                if (result.replace(brRe, '').replace(emptyPRe, '') === '') {\r\n                    return '';\r\n                }\r\n                return result;\r\n            }\r\n        };\r\n        extend(Editor, { Serializer: Serializer });\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('editor/range', ['editor/serializer'], f);\r\n}(function () {\r\n    (function ($) {\r\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, browser = kendo.support.browser, dom = Editor.Dom, findNodeIndex = dom.findNodeIndex, isDataNode = dom.isDataNode, findClosestAncestor = dom.findClosestAncestor, getNodeLength = dom.getNodeLength, normalize = dom.normalize;\r\n        var SelectionUtils = {\r\n            selectionFromWindow: function (window) {\r\n                if (!('getSelection' in window)) {\r\n                    return new W3CSelection(window.document);\r\n                }\r\n                return window.getSelection();\r\n            },\r\n            selectionFromRange: function (range) {\r\n                var rangeDocument = RangeUtils.documentFromRange(range);\r\n                return SelectionUtils.selectionFromDocument(rangeDocument);\r\n            },\r\n            selectionFromDocument: function (document) {\r\n                return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\r\n            }\r\n        };\r\n        var W3CRange = Class.extend({\r\n            init: function (doc) {\r\n                $.extend(this, {\r\n                    ownerDocument: doc,\r\n                    startContainer: doc,\r\n                    endContainer: doc,\r\n                    commonAncestorContainer: doc,\r\n                    startOffset: 0,\r\n                    endOffset: 0,\r\n                    collapsed: true\r\n                });\r\n            },\r\n            setStart: function (node, offset) {\r\n                this.startContainer = node;\r\n                this.startOffset = offset;\r\n                updateRangeProperties(this);\r\n                fixIvalidRange(this, true);\r\n            },\r\n            setEnd: function (node, offset) {\r\n                this.endContainer = node;\r\n                this.endOffset = offset;\r\n                updateRangeProperties(this);\r\n                fixIvalidRange(this, false);\r\n            },\r\n            setStartBefore: function (node) {\r\n                this.setStart(node.parentNode, findNodeIndex(node));\r\n            },\r\n            setStartAfter: function (node) {\r\n                this.setStart(node.parentNode, findNodeIndex(node) + 1);\r\n            },\r\n            setEndBefore: function (node) {\r\n                this.setEnd(node.parentNode, findNodeIndex(node));\r\n            },\r\n            setEndAfter: function (node) {\r\n                this.setEnd(node.parentNode, findNodeIndex(node) + 1);\r\n            },\r\n            selectNode: function (node) {\r\n                this.setStartBefore(node);\r\n                this.setEndAfter(node);\r\n            },\r\n            selectNodeContents: function (node) {\r\n                this.setStart(node, 0);\r\n                this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\r\n            },\r\n            collapse: function (toStart) {\r\n                var that = this;\r\n                if (toStart) {\r\n                    that.setEnd(that.startContainer, that.startOffset);\r\n                } else {\r\n                    that.setStart(that.endContainer, that.endOffset);\r\n                }\r\n            },\r\n            deleteContents: function () {\r\n                var that = this, range = that.cloneRange();\r\n                if (that.startContainer != that.commonAncestorContainer) {\r\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\r\n                }\r\n                that.collapse(true);\r\n                (function deleteSubtree(iterator) {\r\n                    while (iterator.next()) {\r\n                        if (iterator.hasPartialSubtree()) {\r\n                            deleteSubtree(iterator.getSubtreeIterator());\r\n                        } else {\r\n                            iterator.remove();\r\n                        }\r\n                    }\r\n                }(new RangeIterator(range)));\r\n            },\r\n            cloneContents: function () {\r\n                var document = RangeUtils.documentFromRange(this);\r\n                return function cloneSubtree(iterator) {\r\n                    var node, frag = document.createDocumentFragment();\r\n                    while (node = iterator.next()) {\r\n                        node = node.cloneNode(!iterator.hasPartialSubtree());\r\n                        if (iterator.hasPartialSubtree()) {\r\n                            node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\r\n                        }\r\n                        frag.appendChild(node);\r\n                    }\r\n                    return frag;\r\n                }(new RangeIterator(this));\r\n            },\r\n            extractContents: function () {\r\n                var that = this, range = that.cloneRange();\r\n                if (that.startContainer != that.commonAncestorContainer) {\r\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\r\n                }\r\n                that.collapse(true);\r\n                var document = RangeUtils.documentFromRange(that);\r\n                return function extractSubtree(iterator) {\r\n                    var node, frag = document.createDocumentFragment();\r\n                    while (node = iterator.next()) {\r\n                        if (iterator.hasPartialSubtree()) {\r\n                            node = node.cloneNode(false);\r\n                            node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\r\n                        } else {\r\n                            iterator.remove(that.originalRange);\r\n                        }\r\n                        frag.appendChild(node);\r\n                    }\r\n                    return frag;\r\n                }(new RangeIterator(range));\r\n            },\r\n            insertNode: function (node) {\r\n                var that = this;\r\n                if (isDataNode(that.startContainer)) {\r\n                    if (that.startOffset != that.startContainer.nodeValue.length) {\r\n                        dom.splitDataNode(that.startContainer, that.startOffset);\r\n                    }\r\n                    dom.insertAfter(node, that.startContainer);\r\n                } else {\r\n                    dom.insertAt(that.startContainer, node, that.startOffset);\r\n                }\r\n                that.setStart(that.startContainer, that.startOffset);\r\n            },\r\n            cloneRange: function () {\r\n                return $.extend(new W3CRange(this.ownerDocument), {\r\n                    startContainer: this.startContainer,\r\n                    endContainer: this.endContainer,\r\n                    commonAncestorContainer: this.commonAncestorContainer,\r\n                    startOffset: this.startOffset,\r\n                    endOffset: this.endOffset,\r\n                    collapsed: this.collapsed,\r\n                    originalRange: this\r\n                });\r\n            },\r\n            toString: function () {\r\n                var startNodeName = this.startContainer.nodeName, endNodeName = this.endContainer.nodeName;\r\n                return [\r\n                    startNodeName == '#text' ? this.startContainer.nodeValue : startNodeName,\r\n                    '(',\r\n                    this.startOffset,\r\n                    ') : ',\r\n                    endNodeName == '#text' ? this.endContainer.nodeValue : endNodeName,\r\n                    '(',\r\n                    this.endOffset,\r\n                    ')'\r\n                ].join('');\r\n            }\r\n        });\r\n        W3CRange.fromNode = function (node) {\r\n            return new W3CRange(node.ownerDocument);\r\n        };\r\n        function compareBoundaries(start, end, startOffset, endOffset) {\r\n            if (start == end) {\r\n                return endOffset - startOffset;\r\n            }\r\n            var container = end;\r\n            while (container && container.parentNode != start) {\r\n                container = container.parentNode;\r\n            }\r\n            if (container) {\r\n                return findNodeIndex(container) - startOffset;\r\n            }\r\n            container = start;\r\n            while (container && container.parentNode != end) {\r\n                container = container.parentNode;\r\n            }\r\n            if (container) {\r\n                return endOffset - findNodeIndex(container) - 1;\r\n            }\r\n            var root = dom.commonAncestor(start, end);\r\n            var startAncestor = start;\r\n            while (startAncestor && startAncestor.parentNode != root) {\r\n                startAncestor = startAncestor.parentNode;\r\n            }\r\n            if (!startAncestor) {\r\n                startAncestor = root;\r\n            }\r\n            var endAncestor = end;\r\n            while (endAncestor && endAncestor.parentNode != root) {\r\n                endAncestor = endAncestor.parentNode;\r\n            }\r\n            if (!endAncestor) {\r\n                endAncestor = root;\r\n            }\r\n            if (startAncestor == endAncestor) {\r\n                return 0;\r\n            }\r\n            return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\r\n        }\r\n        function fixIvalidRange(range, toStart) {\r\n            function isInvalidRange(range) {\r\n                try {\r\n                    return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\r\n                } catch (ex) {\r\n                    return true;\r\n                }\r\n            }\r\n            if (isInvalidRange(range)) {\r\n                if (toStart) {\r\n                    range.commonAncestorContainer = range.endContainer = range.startContainer;\r\n                    range.endOffset = range.startOffset;\r\n                } else {\r\n                    range.commonAncestorContainer = range.startContainer = range.endContainer;\r\n                    range.startOffset = range.endOffset;\r\n                }\r\n                range.collapsed = true;\r\n            }\r\n        }\r\n        function updateRangeProperties(range) {\r\n            range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\r\n            var node = range.startContainer;\r\n            while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\r\n                node = node.parentNode;\r\n            }\r\n            range.commonAncestorContainer = node;\r\n        }\r\n        var RangeIterator = Class.extend({\r\n            init: function (range) {\r\n                $.extend(this, {\r\n                    range: range,\r\n                    _current: null,\r\n                    _next: null,\r\n                    _end: null\r\n                });\r\n                if (range.collapsed) {\r\n                    return;\r\n                }\r\n                var root = range.commonAncestorContainer;\r\n                this._next = range.startContainer == root && !isDataNode(range.startContainer) ? range.startContainer.childNodes[range.startOffset] : findClosestAncestor(root, range.startContainer);\r\n                this._end = range.endContainer == root && !isDataNode(range.endContainer) ? range.endContainer.childNodes[range.endOffset] : findClosestAncestor(root, range.endContainer).nextSibling;\r\n            },\r\n            hasNext: function () {\r\n                return !!this._next;\r\n            },\r\n            next: function () {\r\n                var that = this, current = that._current = that._next;\r\n                that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\r\n                if (isDataNode(that._current)) {\r\n                    if (that.range.endContainer == that._current) {\r\n                        current = current.cloneNode(true);\r\n                        current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\r\n                    }\r\n                    if (that.range.startContainer == that._current) {\r\n                        current = current.cloneNode(true);\r\n                        current.deleteData(0, that.range.startOffset);\r\n                    }\r\n                }\r\n                return current;\r\n            },\r\n            traverse: function (callback) {\r\n                var that = this, current;\r\n                function next() {\r\n                    that._current = that._next;\r\n                    that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\r\n                    return that._current;\r\n                }\r\n                while (current = next()) {\r\n                    if (that.hasPartialSubtree()) {\r\n                        that.getSubtreeIterator().traverse(callback);\r\n                    } else {\r\n                        callback(current);\r\n                    }\r\n                }\r\n                return current;\r\n            },\r\n            remove: function (originalRange) {\r\n                var that = this, inStartContainer = that.range.startContainer == that._current, inEndContainer = that.range.endContainer == that._current, start, end, delta;\r\n                if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\r\n                    start = inStartContainer ? that.range.startOffset : 0;\r\n                    end = inEndContainer ? that.range.endOffset : that._current.length;\r\n                    delta = end - start;\r\n                    if (originalRange && (inStartContainer || inEndContainer)) {\r\n                        if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\r\n                            originalRange.startOffset -= delta;\r\n                        }\r\n                        if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\r\n                            originalRange.endOffset -= delta;\r\n                        }\r\n                    }\r\n                    that._current.deleteData(start, delta);\r\n                } else {\r\n                    var parent = that._current.parentNode;\r\n                    if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\r\n                        var nodeIndex = findNodeIndex(that._current);\r\n                        if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\r\n                            originalRange.startOffset -= 1;\r\n                        }\r\n                        if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\r\n                            originalRange.endOffset -= 1;\r\n                        }\r\n                    }\r\n                    dom.remove(that._current);\r\n                }\r\n            },\r\n            hasPartialSubtree: function () {\r\n                return !isDataNode(this._current) && (dom.isAncestorOrSelf(this._current, this.range.startContainer) || dom.isAncestorOrSelf(this._current, this.range.endContainer));\r\n            },\r\n            getSubtreeIterator: function () {\r\n                var that = this, subRange = that.range.cloneRange();\r\n                subRange.selectNodeContents(that._current);\r\n                if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\r\n                    subRange.setStart(that.range.startContainer, that.range.startOffset);\r\n                }\r\n                if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\r\n                    subRange.setEnd(that.range.endContainer, that.range.endOffset);\r\n                }\r\n                return new RangeIterator(subRange);\r\n            }\r\n        });\r\n        var W3CSelection = Class.extend({\r\n            init: function (doc) {\r\n                this.ownerDocument = doc;\r\n                this.rangeCount = 1;\r\n            },\r\n            addRange: function (range) {\r\n                var textRange = this.ownerDocument.body.createTextRange();\r\n                adoptContainer(textRange, range, false);\r\n                adoptContainer(textRange, range, true);\r\n                textRange.select();\r\n            },\r\n            removeAllRanges: function () {\r\n                var selection = this.ownerDocument.selection;\r\n                if (selection.type != 'None') {\r\n                    selection.empty();\r\n                }\r\n            },\r\n            getRangeAt: function () {\r\n                var textRange, range = new W3CRange(this.ownerDocument), selection = this.ownerDocument.selection, element, commonAncestor;\r\n                try {\r\n                    textRange = selection.createRange();\r\n                    element = textRange.item ? textRange.item(0) : textRange.parentElement();\r\n                    if (element.ownerDocument != this.ownerDocument) {\r\n                        return range;\r\n                    }\r\n                } catch (ex) {\r\n                    return range;\r\n                }\r\n                if (selection.type == 'Control') {\r\n                    range.selectNode(textRange.item(0));\r\n                } else {\r\n                    commonAncestor = textRangeContainer(textRange);\r\n                    adoptEndPoint(textRange, range, commonAncestor, true);\r\n                    adoptEndPoint(textRange, range, commonAncestor, false);\r\n                    if (range.startContainer.nodeType == 9) {\r\n                        range.setStart(range.endContainer, range.startOffset);\r\n                    }\r\n                    if (range.endContainer.nodeType == 9) {\r\n                        range.setEnd(range.startContainer, range.endOffset);\r\n                    }\r\n                    if (textRange.compareEndPoints('StartToEnd', textRange) === 0) {\r\n                        range.collapse(false);\r\n                    }\r\n                    var startContainer = range.startContainer, endContainer = range.endContainer, body = this.ownerDocument.body;\r\n                    if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) {\r\n                        var movedStart = false, movedEnd = false;\r\n                        while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\r\n                            startContainer = startContainer.parentNode;\r\n                            movedStart = true;\r\n                        }\r\n                        while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\r\n                            endContainer = endContainer.parentNode;\r\n                            movedEnd = true;\r\n                        }\r\n                        if (startContainer == body && endContainer == body && movedStart && movedEnd) {\r\n                            range.setStart(startContainer, 0);\r\n                            range.setEnd(endContainer, getNodeLength(body));\r\n                        }\r\n                    }\r\n                }\r\n                return range;\r\n            }\r\n        });\r\n        function textRangeContainer(textRange) {\r\n            var left = textRange.duplicate(), right = textRange.duplicate();\r\n            left.collapse(true);\r\n            right.collapse(false);\r\n            return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\r\n        }\r\n        function adoptContainer(textRange, range, start) {\r\n            var container = range[start ? 'startContainer' : 'endContainer'], offset = range[start ? 'startOffset' : 'endOffset'], textOffset = 0, isData = isDataNode(container), anchorNode = isData ? container : container.childNodes[offset] || null, anchorParent = isData ? container.parentNode : container, doc = range.ownerDocument, cursor = doc.body.createTextRange(), cursorNode;\r\n            if (container.nodeType == 3 || container.nodeType == 4) {\r\n                textOffset = offset;\r\n            }\r\n            if (!anchorParent) {\r\n                anchorParent = doc.body;\r\n            }\r\n            if (anchorParent.nodeName.toLowerCase() == 'img') {\r\n                cursor.moveToElementText(anchorParent);\r\n                cursor.collapse(false);\r\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\r\n            } else {\r\n                cursorNode = anchorParent.insertBefore(dom.create(doc, 'a'), anchorNode);\r\n                cursor.moveToElementText(cursorNode);\r\n                dom.remove(cursorNode);\r\n                cursor[start ? 'moveStart' : 'moveEnd']('character', textOffset);\r\n                cursor.collapse(false);\r\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\r\n            }\r\n        }\r\n        function adoptEndPoint(textRange, range, commonAncestor, start) {\r\n            var cursorNode = dom.create(range.ownerDocument, 'a'), cursor = textRange.duplicate(), comparison = start ? 'StartToStart' : 'StartToEnd', result, parent, target, previous, next, args, index, appended = false;\r\n            cursorNode.innerHTML = '\\uFEFF';\r\n            cursor.collapse(start);\r\n            parent = cursor.parentElement();\r\n            if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\r\n                parent = commonAncestor;\r\n            }\r\n            do {\r\n                if (appended) {\r\n                    parent.insertBefore(cursorNode, cursorNode.previousSibling);\r\n                } else {\r\n                    parent.appendChild(cursorNode);\r\n                    appended = true;\r\n                }\r\n                cursor.moveToElementText(cursorNode);\r\n            } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\r\n            target = cursorNode.nextSibling;\r\n            if (result == -1 && isDataNode(target)) {\r\n                cursor.setEndPoint(start ? 'EndToStart' : 'EndToEnd', textRange);\r\n                dom.remove(cursorNode);\r\n                args = [\r\n                    target,\r\n                    cursor.text.length\r\n                ];\r\n            } else {\r\n                previous = !start && cursorNode.previousSibling;\r\n                next = start && cursorNode.nextSibling;\r\n                if (isDataNode(next)) {\r\n                    args = [\r\n                        next,\r\n                        0\r\n                    ];\r\n                } else if (isDataNode(previous)) {\r\n                    args = [\r\n                        previous,\r\n                        previous.length\r\n                    ];\r\n                } else {\r\n                    index = findNodeIndex(cursorNode);\r\n                    if (parent.nextSibling && index == parent.childNodes.length - 1) {\r\n                        args = [\r\n                            parent.nextSibling,\r\n                            0\r\n                        ];\r\n                    } else {\r\n                        args = [\r\n                            parent,\r\n                            index\r\n                        ];\r\n                    }\r\n                }\r\n                dom.remove(cursorNode);\r\n            }\r\n            range[start ? 'setStart' : 'setEnd'].apply(range, args);\r\n        }\r\n        var RangeEnumerator = Class.extend({\r\n            init: function (range) {\r\n                this.enumerate = function () {\r\n                    var nodes = [];\r\n                    function visit(node) {\r\n                        if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\r\n                            nodes.push(node);\r\n                        } else {\r\n                            node = node.firstChild;\r\n                            while (node) {\r\n                                visit(node);\r\n                                node = node.nextSibling;\r\n                            }\r\n                        }\r\n                    }\r\n                    new RangeIterator(range).traverse(visit);\r\n                    return nodes;\r\n                };\r\n            }\r\n        });\r\n        var RestorePoint = Class.extend({\r\n            init: function (range, body) {\r\n                var that = this;\r\n                that.range = range;\r\n                that.rootNode = RangeUtils.documentFromRange(range);\r\n                that.body = body || that.getEditable(range);\r\n                if (dom.name(that.body) != 'body') {\r\n                    that.rootNode = that.body;\r\n                }\r\n                that.html = that.body.innerHTML;\r\n                that.startContainer = that.nodeToPath(range.startContainer);\r\n                that.endContainer = that.nodeToPath(range.endContainer);\r\n                that.startOffset = that.offset(range.startContainer, range.startOffset);\r\n                that.endOffset = that.offset(range.endContainer, range.endOffset);\r\n            },\r\n            index: function (node) {\r\n                var result = 0, lastType = node.nodeType;\r\n                while (node = node.previousSibling) {\r\n                    var nodeType = node.nodeType;\r\n                    if (nodeType != 3 || lastType != nodeType) {\r\n                        result++;\r\n                    }\r\n                    lastType = nodeType;\r\n                }\r\n                return result;\r\n            },\r\n            getEditable: function (range) {\r\n                var root = range.commonAncestorContainer;\r\n                while (root && (root.nodeType == 3 || root.attributes && !root.attributes.contentEditable)) {\r\n                    root = root.parentNode;\r\n                }\r\n                return root;\r\n            },\r\n            restoreHtml: function () {\r\n                this.body.innerHTML = this.html;\r\n            },\r\n            offset: function (node, value) {\r\n                if (node.nodeType == 3) {\r\n                    while ((node = node.previousSibling) && node.nodeType == 3) {\r\n                        value += node.nodeValue.length;\r\n                    }\r\n                }\r\n                return value;\r\n            },\r\n            nodeToPath: function (node) {\r\n                var path = [];\r\n                while (node != this.rootNode) {\r\n                    path.push(this.index(node));\r\n                    node = node.parentNode;\r\n                }\r\n                return path;\r\n            },\r\n            toRangePoint: function (range, start, path, denormalizedOffset) {\r\n                var node = this.rootNode, length = path.length, offset = denormalizedOffset;\r\n                while (length--) {\r\n                    node = node.childNodes[path[length]];\r\n                }\r\n                while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\r\n                    offset -= node.nodeValue.length;\r\n                    node = node.nextSibling;\r\n                }\r\n                if (node && offset >= 0) {\r\n                    range[start ? 'setStart' : 'setEnd'](node, offset);\r\n                }\r\n            },\r\n            toRange: function () {\r\n                var that = this, result = that.range.cloneRange();\r\n                that.toRangePoint(result, true, that.startContainer, that.startOffset);\r\n                that.toRangePoint(result, false, that.endContainer, that.endOffset);\r\n                return result;\r\n            }\r\n        });\r\n        var Marker = Class.extend({\r\n            init: function () {\r\n                this.caret = null;\r\n            },\r\n            addCaret: function (range) {\r\n                var that = this;\r\n                that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\r\n                range.insertNode(that.caret);\r\n                range.selectNode(that.caret);\r\n                return that.caret;\r\n            },\r\n            removeCaret: function (range) {\r\n                var that = this, previous = that.caret.previousSibling, startOffset = 0;\r\n                if (previous) {\r\n                    startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\r\n                }\r\n                var container = that.caret.parentNode;\r\n                var containerIndex = previous ? findNodeIndex(previous) : 0;\r\n                dom.remove(that.caret);\r\n                normalize(container);\r\n                var node = container.childNodes[containerIndex];\r\n                if (isDataNode(node)) {\r\n                    range.setStart(node, startOffset);\r\n                } else if (node) {\r\n                    var textNode = dom.lastTextNode(node);\r\n                    if (textNode) {\r\n                        range.setStart(textNode, textNode.nodeValue.length);\r\n                    } else {\r\n                        range[previous ? 'setStartAfter' : 'setStartBefore'](node);\r\n                    }\r\n                } else {\r\n                    if (!browser.msie && !container.innerHTML) {\r\n                        container.innerHTML = '<br _moz_dirty=\"\" />';\r\n                    }\r\n                    range.selectNodeContents(container);\r\n                }\r\n                range.collapse(true);\r\n            },\r\n            add: function (range, expand) {\r\n                var that = this;\r\n                var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\r\n                var doc = RangeUtils.documentFromRange(range);\r\n                if (expand && range.collapsed) {\r\n                    that.addCaret(range);\r\n                    range = RangeUtils.expand(range);\r\n                }\r\n                var rangeBoundary = range.cloneRange();\r\n                rangeBoundary.collapse(false);\r\n                that.end = dom.create(doc, 'span', { className: 'k-marker' });\r\n                rangeBoundary.insertNode(that.end);\r\n                rangeBoundary = range.cloneRange();\r\n                rangeBoundary.collapse(true);\r\n                that.start = that.end.cloneNode(true);\r\n                rangeBoundary.insertNode(that.start);\r\n                that._removeDeadMarkers(that.start, that.end);\r\n                if (collapsed) {\r\n                    var bom = doc.createTextNode('\\uFEFF');\r\n                    dom.insertAfter(bom.cloneNode(), that.start);\r\n                    dom.insertBefore(bom, that.end);\r\n                }\r\n                normalize(range.commonAncestorContainer);\r\n                range.setStartBefore(that.start);\r\n                range.setEndAfter(that.end);\r\n                return range;\r\n            },\r\n            _removeDeadMarkers: function (start, end) {\r\n                if (start.previousSibling && start.previousSibling.nodeValue == '\\uFEFF') {\r\n                    dom.remove(start.previousSibling);\r\n                }\r\n                if (end.nextSibling && end.nextSibling.nodeValue == '\\uFEFF') {\r\n                    dom.remove(end.nextSibling);\r\n                }\r\n            },\r\n            _normalizedIndex: function (node) {\r\n                var index = findNodeIndex(node);\r\n                var pointer = node;\r\n                while (pointer.previousSibling) {\r\n                    if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\r\n                        index--;\r\n                    }\r\n                    pointer = pointer.previousSibling;\r\n                }\r\n                return index;\r\n            },\r\n            remove: function (range) {\r\n                var that = this, start = that.start, end = that.end, shouldNormalizeStart, shouldNormalizeEnd, shouldNormalize;\r\n                normalize(range.commonAncestorContainer);\r\n                while (!start.nextSibling && start.parentNode) {\r\n                    start = start.parentNode;\r\n                }\r\n                while (!end.previousSibling && end.parentNode) {\r\n                    end = end.parentNode;\r\n                }\r\n                shouldNormalizeStart = start.previousSibling && start.previousSibling.nodeType == 3 && (start.nextSibling && start.nextSibling.nodeType == 3);\r\n                shouldNormalizeEnd = end.previousSibling && end.previousSibling.nodeType == 3 && (end.nextSibling && end.nextSibling.nodeType == 3);\r\n                shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\r\n                start = start.nextSibling;\r\n                end = end.previousSibling;\r\n                var collapsed = false;\r\n                var collapsedToStart = false;\r\n                if (start == that.end) {\r\n                    collapsedToStart = !!that.start.previousSibling;\r\n                    start = end = that.start.previousSibling || that.end.nextSibling;\r\n                    collapsed = true;\r\n                }\r\n                dom.remove(that.start);\r\n                dom.remove(that.end);\r\n                if (!start || !end) {\r\n                    range.selectNodeContents(range.commonAncestorContainer);\r\n                    range.collapse(true);\r\n                    return;\r\n                }\r\n                var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\r\n                var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\r\n                if (start.nodeType == 3) {\r\n                    while (start.previousSibling && start.previousSibling.nodeType == 3) {\r\n                        start = start.previousSibling;\r\n                        startOffset += start.nodeValue.length;\r\n                    }\r\n                }\r\n                if (end.nodeType == 3) {\r\n                    while (end.previousSibling && end.previousSibling.nodeType == 3) {\r\n                        end = end.previousSibling;\r\n                        endOffset += end.nodeValue.length;\r\n                    }\r\n                }\r\n                var startParent = start.parentNode;\r\n                var endParent = end.parentNode;\r\n                var startIndex = this._normalizedIndex(start);\r\n                var endIndex = this._normalizedIndex(end);\r\n                normalize(startParent);\r\n                if (start.nodeType == 3) {\r\n                    start = startParent.childNodes[startIndex];\r\n                }\r\n                normalize(endParent);\r\n                if (end.nodeType == 3) {\r\n                    end = endParent.childNodes[endIndex];\r\n                }\r\n                if (collapsed) {\r\n                    if (start.nodeType == 3) {\r\n                        range.setStart(start, startOffset);\r\n                    } else {\r\n                        range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\r\n                    }\r\n                    range.collapse(true);\r\n                } else {\r\n                    if (start.nodeType == 3) {\r\n                        range.setStart(start, startOffset);\r\n                    } else {\r\n                        range.setStartBefore(start);\r\n                    }\r\n                    if (end.nodeType == 3) {\r\n                        range.setEnd(end, endOffset);\r\n                    } else {\r\n                        range.setEndAfter(end);\r\n                    }\r\n                }\r\n                if (that.caret) {\r\n                    that.removeCaret(range);\r\n                }\r\n            }\r\n        });\r\n        var boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\r\n        var RangeUtils = {\r\n            nodes: function (range) {\r\n                var nodes = RangeUtils.textNodes(range);\r\n                if (!nodes.length) {\r\n                    range.selectNodeContents(range.commonAncestorContainer);\r\n                    nodes = RangeUtils.textNodes(range);\r\n                    if (!nodes.length) {\r\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\r\n                    }\r\n                }\r\n                return nodes;\r\n            },\r\n            textNodes: function (range) {\r\n                return new RangeEnumerator(range).enumerate();\r\n            },\r\n            documentFromRange: function (range) {\r\n                var startContainer = range.startContainer;\r\n                return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\r\n            },\r\n            createRange: function (document) {\r\n                if (browser.msie && browser.version < 9) {\r\n                    return new W3CRange(document);\r\n                }\r\n                return document.createRange();\r\n            },\r\n            selectRange: function (range) {\r\n                var image = RangeUtils.image(range);\r\n                if (image) {\r\n                    range.setStartAfter(image);\r\n                    range.setEndAfter(image);\r\n                }\r\n                var selection = SelectionUtils.selectionFromRange(range);\r\n                selection.removeAllRanges();\r\n                selection.addRange(range);\r\n            },\r\n            stringify: function (range) {\r\n                return kendo.format('{0}:{1} - {2}:{3}', dom.name(range.startContainer), range.startOffset, dom.name(range.endContainer), range.endOffset);\r\n            },\r\n            split: function (range, node, trim) {\r\n                function partition(start) {\r\n                    var partitionRange = range.cloneRange();\r\n                    partitionRange.collapse(start);\r\n                    partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\r\n                    var contents = partitionRange.extractContents();\r\n                    if (trim) {\r\n                        contents = dom.trim(contents);\r\n                    }\r\n                    dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\r\n                }\r\n                partition(true);\r\n                partition(false);\r\n            },\r\n            mapAll: function (range, map) {\r\n                var nodes = [];\r\n                new RangeIterator(range).traverse(function (node) {\r\n                    var mapped = map(node);\r\n                    if (mapped && $.inArray(mapped, nodes) < 0) {\r\n                        nodes.push(mapped);\r\n                    }\r\n                });\r\n                return nodes;\r\n            },\r\n            getAll: function (range, predicate) {\r\n                var selector = predicate;\r\n                if (typeof predicate == 'string') {\r\n                    predicate = function (node) {\r\n                        return dom.is(node, selector);\r\n                    };\r\n                }\r\n                return RangeUtils.mapAll(range, function (node) {\r\n                    if (predicate(node)) {\r\n                        return node;\r\n                    }\r\n                });\r\n            },\r\n            getMarkers: function (range) {\r\n                return RangeUtils.getAll(range, function (node) {\r\n                    return node.className == 'k-marker';\r\n                });\r\n            },\r\n            image: function (range) {\r\n                var nodes = RangeUtils.getAll(range, 'img');\r\n                if (nodes.length == 1) {\r\n                    return nodes[0];\r\n                }\r\n            },\r\n            isStartOf: function (originalRange, node) {\r\n                if (originalRange.startOffset !== 0) {\r\n                    return false;\r\n                }\r\n                var range = originalRange.cloneRange();\r\n                while (range.startOffset === 0 && range.startContainer != node) {\r\n                    var index = dom.findNodeIndex(range.startContainer);\r\n                    var parent = range.startContainer.parentNode;\r\n                    while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\r\n                        index--;\r\n                    }\r\n                    range.setStart(parent, index);\r\n                }\r\n                return range.startOffset === 0 && range.startContainer == node;\r\n            },\r\n            isEndOf: function (originalRange, node) {\r\n                var range = originalRange.cloneRange();\r\n                range.collapse(false);\r\n                var start = range.startContainer;\r\n                if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\r\n                    range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\r\n                    range.collapse(true);\r\n                }\r\n                range.setEnd(node, dom.getNodeLength(node));\r\n                var nodes = [];\r\n                function visit(node) {\r\n                    if (!dom.insignificant(node)) {\r\n                        nodes.push(node);\r\n                    }\r\n                }\r\n                new RangeIterator(range).traverse(visit);\r\n                return !nodes.length;\r\n            },\r\n            wrapSelectedElements: function (range) {\r\n                var startEditable = dom.editableParent(range.startContainer);\r\n                var endEditable = dom.editableParent(range.endContainer);\r\n                while (range.startOffset === 0 && range.startContainer != startEditable) {\r\n                    range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\r\n                }\r\n                function isEnd(offset, container) {\r\n                    var length = dom.getNodeLength(container);\r\n                    if (offset == length) {\r\n                        return true;\r\n                    }\r\n                    for (var i = offset; i < length; i++) {\r\n                        if (!dom.insignificant(container.childNodes[i])) {\r\n                            return false;\r\n                        }\r\n                    }\r\n                    return true;\r\n                }\r\n                while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\r\n                    range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\r\n                }\r\n                return range;\r\n            },\r\n            expand: function (range) {\r\n                var result = range.cloneRange();\r\n                var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\r\n                var endContainer = result.endContainer.childNodes[result.endOffset];\r\n                if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\r\n                    return result;\r\n                }\r\n                var beforeCaret = startContainer.nodeValue;\r\n                var afterCaret = endContainer.nodeValue;\r\n                if (!beforeCaret || !afterCaret) {\r\n                    return result;\r\n                }\r\n                var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\r\n                var endOffset = afterCaret.search(boundary);\r\n                if (!startOffset || !endOffset) {\r\n                    return result;\r\n                }\r\n                endOffset = endOffset == -1 ? afterCaret.length : endOffset;\r\n                startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\r\n                result.setStart(startContainer, startOffset);\r\n                result.setEnd(endContainer, endOffset);\r\n                return result;\r\n            },\r\n            isExpandable: function (range) {\r\n                var node = range.startContainer;\r\n                var rangeDocument = RangeUtils.documentFromRange(range);\r\n                if (node == rangeDocument || node == rangeDocument.body) {\r\n                    return false;\r\n                }\r\n                var result = range.cloneRange();\r\n                var value = node.nodeValue;\r\n                if (!value) {\r\n                    return false;\r\n                }\r\n                var beforeCaret = value.substring(0, result.startOffset);\r\n                var afterCaret = value.substring(result.startOffset);\r\n                var startOffset = 0, endOffset = 0;\r\n                if (beforeCaret) {\r\n                    startOffset = beforeCaret.split('').reverse().join('').search(boundary);\r\n                }\r\n                if (afterCaret) {\r\n                    endOffset = afterCaret.search(boundary);\r\n                }\r\n                return startOffset && endOffset;\r\n            }\r\n        };\r\n        extend(Editor, {\r\n            SelectionUtils: SelectionUtils,\r\n            W3CRange: W3CRange,\r\n            RangeIterator: RangeIterator,\r\n            W3CSelection: W3CSelection,\r\n            RangeEnumerator: RangeEnumerator,\r\n            RestorePoint: RestorePoint,\r\n            Marker: Marker,\r\n            RangeUtils: RangeUtils\r\n        });\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('editor/system', ['editor/range'], f);\r\n}(function () {\r\n    (function ($) {\r\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, dom = editorNS.Dom, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, extend = $.extend;\r\n        function finishUpdate(editor, startRestorePoint) {\r\n            var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange());\r\n            var command = new GenericCommand(startRestorePoint, endRestorePoint);\r\n            command.editor = editor;\r\n            editor.undoRedoStack.push(command);\r\n            return endRestorePoint;\r\n        }\r\n        var Command = Class.extend({\r\n            init: function (options) {\r\n                this.options = options;\r\n                this.restorePoint = new RestorePoint(options.range);\r\n                this.marker = new Marker();\r\n                this.formatter = options.formatter;\r\n            },\r\n            getRange: function () {\r\n                return this.restorePoint.toRange();\r\n            },\r\n            lockRange: function (expand) {\r\n                return this.marker.add(this.getRange(), expand);\r\n            },\r\n            releaseRange: function (range) {\r\n                this.marker.remove(range);\r\n                this.editor.selectRange(range);\r\n            },\r\n            undo: function () {\r\n                var point = this.restorePoint;\r\n                point.restoreHtml();\r\n                this.editor.selectRange(point.toRange());\r\n            },\r\n            redo: function () {\r\n                this.exec();\r\n            },\r\n            createDialog: function (content, options) {\r\n                var editor = this.editor;\r\n                return $(content).appendTo(document.body).kendoWindow(extend({}, editor.options.dialogOptions, options)).closest('.k-window').toggleClass('k-rtl', kendo.support.isRtl(editor.wrapper)).end();\r\n            },\r\n            exec: function () {\r\n                var range = this.lockRange(true);\r\n                this.formatter.editor = this.editor;\r\n                this.formatter.toggle(range);\r\n                this.releaseRange(range);\r\n            }\r\n        });\r\n        var GenericCommand = Class.extend({\r\n            init: function (startRestorePoint, endRestorePoint) {\r\n                this.body = startRestorePoint.body;\r\n                this.startRestorePoint = startRestorePoint;\r\n                this.endRestorePoint = endRestorePoint;\r\n            },\r\n            redo: function () {\r\n                this.body.innerHTML = this.endRestorePoint.html;\r\n                this.editor.selectRange(this.endRestorePoint.toRange());\r\n            },\r\n            undo: function () {\r\n                this.body.innerHTML = this.startRestorePoint.html;\r\n                this.editor.selectRange(this.startRestorePoint.toRange());\r\n            }\r\n        });\r\n        var InsertHtmlCommand = Command.extend({\r\n            init: function (options) {\r\n                Command.fn.init.call(this, options);\r\n                this.managesUndoRedo = true;\r\n            },\r\n            exec: function () {\r\n                var editor = this.editor;\r\n                var options = this.options;\r\n                var range = options.range;\r\n                var body = editor.body;\r\n                var startRestorePoint = new RestorePoint(range, body);\r\n                var html = options.html || options.value || '';\r\n                editor.selectRange(range);\r\n                editor.clipboard.paste(html, options);\r\n                if (options.postProcess) {\r\n                    options.postProcess(editor, editor.getRange());\r\n                }\r\n                var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\r\n                genericCommand.editor = editor;\r\n                editor.undoRedoStack.push(genericCommand);\r\n                editor.focus();\r\n            }\r\n        });\r\n        var InsertHtmlTool = Tool.extend({\r\n            initialize: function (ui, initOptions) {\r\n                var editor = initOptions.editor, options = this.options, dataSource = options.items ? options.items : editor.options.insertHtml;\r\n                this._selectBox = new editorNS.SelectBox(ui, {\r\n                    dataSource: dataSource,\r\n                    dataTextField: 'text',\r\n                    dataValueField: 'value',\r\n                    change: function () {\r\n                        Tool.exec(editor, 'insertHtml', this.value());\r\n                    },\r\n                    title: editor.options.messages.insertHtml,\r\n                    highlightFirst: false\r\n                });\r\n            },\r\n            command: function (commandArguments) {\r\n                return new InsertHtmlCommand(commandArguments);\r\n            },\r\n            update: function (ui) {\r\n                var selectbox = ui.data('kendoSelectBox') || ui.find('select').data('kendoSelectBox');\r\n                selectbox.close();\r\n                selectbox.value(selectbox.options.title);\r\n            }\r\n        });\r\n        var TypingHandler = Class.extend({\r\n            init: function (editor) {\r\n                this.editor = editor;\r\n            },\r\n            keydown: function (e) {\r\n                var that = this, editor = that.editor, keyboard = editor.keyboard, isTypingKey = keyboard.isTypingKey(e), evt = extend($.Event(), e);\r\n                that.editor.trigger('keydown', evt);\r\n                if (evt.isDefaultPrevented()) {\r\n                    e.preventDefault();\r\n                    return true;\r\n                }\r\n                if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\r\n                    var range = editor.getRange();\r\n                    that.startRestorePoint = new RestorePoint(range);\r\n                    keyboard.startTyping(function () {\r\n                        that.endRestorePoint = finishUpdate(editor, that.startRestorePoint);\r\n                    });\r\n                    return true;\r\n                }\r\n                return false;\r\n            },\r\n            keyup: function (e) {\r\n                var keyboard = this.editor.keyboard;\r\n                this.editor.trigger('keyup', e);\r\n                if (keyboard.isTypingInProgress()) {\r\n                    keyboard.endTyping();\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n        });\r\n        var BackspaceHandler = Class.extend({\r\n            init: function (editor) {\r\n                this.editor = editor;\r\n            },\r\n            _addCaret: function (container) {\r\n                var caret = dom.create(this.editor.document, 'a');\r\n                dom.insertAt(container, caret, 0);\r\n                return caret;\r\n            },\r\n            _restoreCaret: function (caret) {\r\n                var range = this.editor.createRange();\r\n                range.setStartAfter(caret);\r\n                range.collapse(true);\r\n                this.editor.selectRange(range);\r\n                dom.remove(caret);\r\n            },\r\n            _handleDelete: function (range) {\r\n                var node = range.endContainer;\r\n                var block = dom.closestEditableOfType(node, dom.blockElements);\r\n                if (block && editorNS.RangeUtils.isEndOf(range, block)) {\r\n                    var next = dom.next(block);\r\n                    if (!next || dom.name(next) != 'p') {\r\n                        return false;\r\n                    }\r\n                    var caret = this._addCaret(next);\r\n                    this._merge(block, next);\r\n                    this._restoreCaret(caret);\r\n                    return true;\r\n                }\r\n                return false;\r\n            },\r\n            _cleanBomBefore: function (range) {\r\n                var offset = range.startOffset;\r\n                var node = range.startContainer;\r\n                var text = node.nodeValue;\r\n                var count = 0;\r\n                while (offset - count >= 0 && text[offset - count - 1] == '\\uFEFF') {\r\n                    count++;\r\n                }\r\n                if (count > 0) {\r\n                    node.deleteData(offset - count, count);\r\n                    range.setStart(node, Math.max(0, offset - count));\r\n                    range.collapse(true);\r\n                    this.editor.selectRange(range);\r\n                }\r\n            },\r\n            _handleBackspace: function (range) {\r\n                var node = range.startContainer;\r\n                var li = dom.closestEditableOfType(node, ['li']);\r\n                var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\r\n                if (dom.isDataNode(node)) {\r\n                    this._cleanBomBefore(range);\r\n                }\r\n                if (block && block.previousSibling && editorNS.RangeUtils.isStartOf(range, block)) {\r\n                    var prev = block.previousSibling;\r\n                    var caret = this._addCaret(block);\r\n                    this._merge(prev, block);\r\n                    this._restoreCaret(caret);\r\n                    return true;\r\n                }\r\n                if (li && editorNS.RangeUtils.isStartOf(range, li)) {\r\n                    var child = li.firstChild;\r\n                    if (!child) {\r\n                        li.innerHTML = editorNS.emptyElementContent;\r\n                        child = li.firstChild;\r\n                    }\r\n                    var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), 'p');\r\n                    range.selectNodeContents(li);\r\n                    formatter.toggle(range);\r\n                    if (dom.insignificant(child)) {\r\n                        range.setStartBefore(child);\r\n                    } else {\r\n                        range.setStart(child, 0);\r\n                    }\r\n                    this.editor.selectRange(range);\r\n                    return true;\r\n                }\r\n                return false;\r\n            },\r\n            _handleSelection: function (range) {\r\n                var ancestor = range.commonAncestorContainer;\r\n                var table = dom.closest(ancestor, 'table');\r\n                var emptyParagraphContent = editorNS.emptyElementContent;\r\n                if (/t(able|body)/i.test(dom.name(ancestor))) {\r\n                    range.selectNode(table);\r\n                }\r\n                var marker = new Marker();\r\n                marker.add(range, false);\r\n                range.setStartAfter(marker.start);\r\n                range.setEndBefore(marker.end);\r\n                var start = range.startContainer;\r\n                var end = range.endContainer;\r\n                range.deleteContents();\r\n                if (table && $(table).text() === '') {\r\n                    range.selectNode(table);\r\n                    range.deleteContents();\r\n                }\r\n                ancestor = range.commonAncestorContainer;\r\n                if (dom.name(ancestor) === 'p' && ancestor.innerHTML === '') {\r\n                    ancestor.innerHTML = emptyParagraphContent;\r\n                    range.setStart(ancestor, 0);\r\n                }\r\n                this._join(start, end);\r\n                dom.insertAfter(this.editor.document.createTextNode('\\uFEFF'), marker.start);\r\n                marker.remove(range);\r\n                start = range.startContainer;\r\n                if (dom.name(start) == 'tr') {\r\n                    start = start.childNodes[Math.max(0, range.startOffset - 1)];\r\n                    range.setStart(start, dom.getNodeLength(start));\r\n                }\r\n                range.collapse(true);\r\n                this.editor.selectRange(range);\r\n                return true;\r\n            },\r\n            _root: function (node) {\r\n                while (node && node.parentNode && dom.name(node.parentNode) != 'body') {\r\n                    node = node.parentNode;\r\n                }\r\n                return node;\r\n            },\r\n            _join: function (start, end) {\r\n                start = this._root(start);\r\n                end = this._root(end);\r\n                if (start != end && dom.is(end, 'p')) {\r\n                    this._merge(start, end);\r\n                }\r\n            },\r\n            _merge: function (dest, src) {\r\n                dom.removeTrailingBreak(dest);\r\n                while (src.firstChild) {\r\n                    if (dest.nodeType == 1) {\r\n                        dest.appendChild(src.firstChild);\r\n                    } else {\r\n                        dest.parentNode.appendChild(src.firstChild);\r\n                    }\r\n                }\r\n                dom.remove(src);\r\n            },\r\n            keydown: function (e) {\r\n                var method, startRestorePoint;\r\n                var range = this.editor.getRange();\r\n                var keyCode = e.keyCode;\r\n                var keys = kendo.keys;\r\n                var backspace = keyCode === keys.BACKSPACE;\r\n                var del = keyCode == keys.DELETE;\r\n                if ((backspace || del) && !range.collapsed) {\r\n                    method = '_handleSelection';\r\n                } else if (backspace) {\r\n                    method = '_handleBackspace';\r\n                } else if (del) {\r\n                    method = '_handleDelete';\r\n                }\r\n                if (!method) {\r\n                    return;\r\n                }\r\n                startRestorePoint = new RestorePoint(range);\r\n                if (this[method](range)) {\r\n                    e.preventDefault();\r\n                    finishUpdate(this.editor, startRestorePoint);\r\n                }\r\n            },\r\n            keyup: $.noop\r\n        });\r\n        var SystemHandler = Class.extend({\r\n            init: function (editor) {\r\n                this.editor = editor;\r\n                this.systemCommandIsInProgress = false;\r\n            },\r\n            createUndoCommand: function () {\r\n                this.startRestorePoint = this.endRestorePoint = finishUpdate(this.editor, this.startRestorePoint);\r\n            },\r\n            changed: function () {\r\n                if (this.startRestorePoint) {\r\n                    return this.startRestorePoint.html != this.editor.body.innerHTML;\r\n                }\r\n                return false;\r\n            },\r\n            keydown: function (e) {\r\n                var that = this, editor = that.editor, keyboard = editor.keyboard;\r\n                if (keyboard.isModifierKey(e)) {\r\n                    if (keyboard.isTypingInProgress()) {\r\n                        keyboard.endTyping(true);\r\n                    }\r\n                    that.startRestorePoint = new RestorePoint(editor.getRange());\r\n                    return true;\r\n                }\r\n                if (keyboard.isSystem(e)) {\r\n                    that.systemCommandIsInProgress = true;\r\n                    if (that.changed()) {\r\n                        that.systemCommandIsInProgress = false;\r\n                        that.createUndoCommand();\r\n                    }\r\n                    return true;\r\n                }\r\n                return false;\r\n            },\r\n            keyup: function () {\r\n                var that = this;\r\n                if (that.systemCommandIsInProgress && that.changed()) {\r\n                    that.systemCommandIsInProgress = false;\r\n                    that.createUndoCommand();\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n        });\r\n        var Keyboard = Class.extend({\r\n            init: function (handlers) {\r\n                this.handlers = handlers;\r\n                this.typingInProgress = false;\r\n            },\r\n            isCharacter: function (keyCode) {\r\n                return keyCode >= 48 && keyCode <= 90 || keyCode >= 96 && keyCode <= 111 || keyCode >= 186 && keyCode <= 192 || keyCode >= 219 && keyCode <= 222 || keyCode == 229;\r\n            },\r\n            toolFromShortcut: function (tools, e) {\r\n                var key = String.fromCharCode(e.keyCode), toolName, toolOptions;\r\n                for (toolName in tools) {\r\n                    toolOptions = $.extend({\r\n                        ctrl: false,\r\n                        alt: false,\r\n                        shift: false\r\n                    }, tools[toolName].options);\r\n                    if ((toolOptions.key == key || toolOptions.key == e.keyCode) && toolOptions.ctrl == e.ctrlKey && toolOptions.alt == e.altKey && toolOptions.shift == e.shiftKey) {\r\n                        return toolName;\r\n                    }\r\n                }\r\n            },\r\n            toolsFromShortcut: function (tools, e) {\r\n                var key = String.fromCharCode(e.keyCode), toolName, o, matchesKey, found = [];\r\n                var matchKey = function (toolKey) {\r\n                    return toolKey == key || toolKey == e.keyCode;\r\n                };\r\n                for (toolName in tools) {\r\n                    o = $.extend({\r\n                        ctrl: false,\r\n                        alt: false,\r\n                        shift: false\r\n                    }, tools[toolName].options);\r\n                    matchesKey = $.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\r\n                    if (matchesKey && o.ctrl == e.ctrlKey && o.alt == e.altKey && o.shift == e.shiftKey) {\r\n                        found.push(tools[toolName]);\r\n                    }\r\n                }\r\n                return found;\r\n            },\r\n            isTypingKey: function (e) {\r\n                var keyCode = e.keyCode;\r\n                return this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey || keyCode == 32 || keyCode == 13 || keyCode == 8 || keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey;\r\n            },\r\n            isModifierKey: function (e) {\r\n                var keyCode = e.keyCode;\r\n                return keyCode == 17 && !e.shiftKey && !e.altKey || keyCode == 16 && !e.ctrlKey && !e.altKey || keyCode == 18 && !e.ctrlKey && !e.shiftKey;\r\n            },\r\n            isSystem: function (e) {\r\n                return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\r\n            },\r\n            startTyping: function (callback) {\r\n                this.onEndTyping = callback;\r\n                this.typingInProgress = true;\r\n            },\r\n            stopTyping: function () {\r\n                if (this.typingInProgress && this.onEndTyping) {\r\n                    this.onEndTyping();\r\n                }\r\n                this.typingInProgress = false;\r\n            },\r\n            endTyping: function (force) {\r\n                var that = this;\r\n                that.clearTimeout();\r\n                if (force) {\r\n                    that.stopTyping();\r\n                } else {\r\n                    that.timeout = window.setTimeout($.proxy(that.stopTyping, that), 1000);\r\n                }\r\n            },\r\n            isTypingInProgress: function () {\r\n                return this.typingInProgress;\r\n            },\r\n            clearTimeout: function () {\r\n                window.clearTimeout(this.timeout);\r\n            },\r\n            notify: function (e, what) {\r\n                var i, handlers = this.handlers;\r\n                for (i = 0; i < handlers.length; i++) {\r\n                    if (handlers[i][what](e)) {\r\n                        break;\r\n                    }\r\n                }\r\n            },\r\n            keydown: function (e) {\r\n                this.notify(e, 'keydown');\r\n            },\r\n            keyup: function (e) {\r\n                this.notify(e, 'keyup');\r\n            }\r\n        });\r\n        var Clipboard = Class.extend({\r\n            init: function (editor) {\r\n                this.editor = editor;\r\n                var pasteCleanup = editor.options.pasteCleanup;\r\n                this.cleaners = [\r\n                    new ScriptCleaner(pasteCleanup),\r\n                    new TabCleaner(pasteCleanup),\r\n                    new MSWordFormatCleaner(pasteCleanup),\r\n                    new WebkitFormatCleaner(pasteCleanup),\r\n                    new HtmlTagsCleaner(pasteCleanup),\r\n                    new HtmlAttrCleaner(pasteCleanup),\r\n                    new HtmlContentCleaner(pasteCleanup),\r\n                    new CustomCleaner(pasteCleanup)\r\n                ];\r\n            },\r\n            htmlToFragment: function (html) {\r\n                var editor = this.editor, doc = editor.document, container = dom.create(doc, 'div'), fragment = doc.createDocumentFragment();\r\n                container.innerHTML = html;\r\n                while (container.firstChild) {\r\n                    fragment.appendChild(container.firstChild);\r\n                }\r\n                return fragment;\r\n            },\r\n            isBlock: function (html) {\r\n                return /<(div|p|ul|ol|table|h[1-6])/i.test(html);\r\n            },\r\n            _startModification: function () {\r\n                var range;\r\n                var restorePoint;\r\n                var editor = this.editor;\r\n                if (this._inProgress) {\r\n                    return;\r\n                }\r\n                this._inProgress = true;\r\n                range = editor.getRange();\r\n                restorePoint = new RestorePoint(range);\r\n                dom.persistScrollTop(editor.document);\r\n                return {\r\n                    range: range,\r\n                    restorePoint: restorePoint\r\n                };\r\n            },\r\n            _endModification: function (modificationInfo) {\r\n                finishUpdate(this.editor, modificationInfo.restorePoint);\r\n                this.editor._selectionChange();\r\n                this._inProgress = false;\r\n            },\r\n            _contentModification: function (before, after) {\r\n                var that = this;\r\n                var editor = that.editor;\r\n                var modificationInfo = that._startModification();\r\n                if (!modificationInfo) {\r\n                    return;\r\n                }\r\n                before.call(that, editor, modificationInfo.range);\r\n                setTimeout(function () {\r\n                    after.call(that, editor, modificationInfo.range);\r\n                    that._endModification(modificationInfo);\r\n                });\r\n            },\r\n            _removeBomNodes: function (range) {\r\n                var nodes = editorNS.RangeUtils.textNodes(range);\r\n                for (var i = 0; i < nodes.length; i++) {\r\n                    nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue);\r\n                }\r\n            },\r\n            _onBeforeCopy: function (range) {\r\n                var marker = new Marker();\r\n                marker.add(range);\r\n                this._removeBomNodes(range);\r\n                marker.remove(range);\r\n                this.editor.selectRange(range);\r\n            },\r\n            oncopy: function () {\r\n                this._onBeforeCopy(this.editor.getRange());\r\n            },\r\n            oncut: function () {\r\n                this._onBeforeCopy(this.editor.getRange());\r\n                this._contentModification($.noop, $.noop);\r\n            },\r\n            _fileToDataURL: function (blob) {\r\n                var deferred = $.Deferred();\r\n                var reader = new FileReader();\r\n                if (!(blob instanceof window.File) && blob.getAsFile) {\r\n                    blob = blob.getAsFile();\r\n                }\r\n                reader.onload = $.proxy(deferred.resolve, deferred);\r\n                reader.readAsDataURL(blob);\r\n                return deferred.promise();\r\n            },\r\n            _triggerPaste: function (html, options) {\r\n                var args = { html: html || '' };\r\n                args.html = args.html.replace(/\\ufeff/g, '');\r\n                this.editor.trigger('paste', args);\r\n                this.paste(args.html, options || {});\r\n            },\r\n            _handleImagePaste: function (e) {\r\n                if (!('FileReader' in window)) {\r\n                    return;\r\n                }\r\n                var clipboardData = e.clipboardData || e.originalEvent.clipboardData || window.clipboardData || {};\r\n                var items = clipboardData.items || clipboardData.files;\r\n                if (!items) {\r\n                    return;\r\n                }\r\n                var images = $.grep(items, function (item) {\r\n                    return /^image\\//i.test(item.type);\r\n                });\r\n                var html = $.grep(items, function (item) {\r\n                    return /^text\\/html/i.test(item.type);\r\n                });\r\n                if (html.length || !images.length) {\r\n                    return;\r\n                }\r\n                var modificationInfo = this._startModification();\r\n                if (!modificationInfo) {\r\n                    return;\r\n                }\r\n                $.when.apply($, $.map(images, this._fileToDataURL)).done($.proxy(function () {\r\n                    var results = Array.prototype.slice.call(arguments);\r\n                    var html = $.map(results, function (e) {\r\n                        return '<img src=\"' + e.target.result + '\" />';\r\n                    }).join('');\r\n                    this._triggerPaste(html);\r\n                    this._endModification(modificationInfo);\r\n                }, this));\r\n                return true;\r\n            },\r\n            onpaste: function (e) {\r\n                if (this._handleImagePaste(e)) {\r\n                    e.preventDefault();\r\n                    return;\r\n                }\r\n                this._contentModification(function beforePaste(editor, range) {\r\n                    var clipboardNode = dom.create(editor.document, 'div', {\r\n                        className: 'k-paste-container',\r\n                        innerHTML: '\\uFEFF'\r\n                    });\r\n                    var browser = kendo.support.browser;\r\n                    editor.body.appendChild(clipboardNode);\r\n                    if (browser.msie && browser.version < 11) {\r\n                        e.preventDefault();\r\n                        var r = editor.createRange();\r\n                        r.selectNodeContents(clipboardNode);\r\n                        editor.selectRange(r);\r\n                        var textRange = editor.document.body.createTextRange();\r\n                        textRange.moveToElementText(clipboardNode);\r\n                        $(editor.body).unbind('paste');\r\n                        textRange.execCommand('Paste');\r\n                        $(editor.body).bind('paste', $.proxy(this.onpaste, this));\r\n                    } else {\r\n                        var clipboardRange = editor.createRange();\r\n                        clipboardRange.selectNodeContents(clipboardNode);\r\n                        editor.selectRange(clipboardRange);\r\n                    }\r\n                    range.deleteContents();\r\n                }, function afterPaste(editor, range) {\r\n                    var html = '', containers;\r\n                    editor.selectRange(range);\r\n                    containers = $(editor.body).children('.k-paste-container');\r\n                    containers.each(function () {\r\n                        var lastChild = this.lastChild;\r\n                        if (lastChild && dom.is(lastChild, 'br')) {\r\n                            dom.remove(lastChild);\r\n                        }\r\n                        html += this.innerHTML;\r\n                    });\r\n                    containers.remove();\r\n                    this._triggerPaste(html, { clean: true });\r\n                });\r\n            },\r\n            splittableParent: function (block, node) {\r\n                var parentNode, body;\r\n                if (block) {\r\n                    return dom.closestEditableOfType(node, [\r\n                        'p',\r\n                        'ul',\r\n                        'ol'\r\n                    ]) || node.parentNode;\r\n                }\r\n                parentNode = node.parentNode;\r\n                body = node.ownerDocument.body;\r\n                if (dom.isInline(parentNode)) {\r\n                    while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\r\n                        parentNode = parentNode.parentNode;\r\n                    }\r\n                }\r\n                return parentNode;\r\n            },\r\n            paste: function (html, options) {\r\n                var editor = this.editor, i, l;\r\n                options = extend({\r\n                    clean: false,\r\n                    split: true\r\n                }, options);\r\n                for (i = 0, l = this.cleaners.length; i < l; i++) {\r\n                    if (this.cleaners[i].applicable(html)) {\r\n                        html = this.cleaners[i].clean(html);\r\n                    }\r\n                }\r\n                if (options.clean) {\r\n                    html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/gi, '$3');\r\n                    html = html.replace(/<(a|span)[^>]*><\\/\\1>/gi, '');\r\n                }\r\n                html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\r\n                var block = this.isBlock(html);\r\n                editor.focus();\r\n                var range = editor.getRange();\r\n                range.deleteContents();\r\n                if (range.startContainer == editor.document) {\r\n                    range.selectNodeContents(editor.body);\r\n                }\r\n                var marker = new Marker();\r\n                var caret = marker.addCaret(range);\r\n                var parent = this.splittableParent(block, caret);\r\n                var unwrap = false;\r\n                var splittable = parent != editor.body && !dom.is(parent, 'td');\r\n                if (options.split && splittable && (block || dom.isInline(parent))) {\r\n                    range.selectNode(caret);\r\n                    editorNS.RangeUtils.split(range, parent, true);\r\n                    unwrap = true;\r\n                }\r\n                var fragment = this.htmlToFragment(html);\r\n                if (fragment.firstChild && fragment.firstChild.className === 'k-paste-container') {\r\n                    var fragmentsHtml = [];\r\n                    for (i = 0, l = fragment.childNodes.length; i < l; i++) {\r\n                        fragmentsHtml.push(fragment.childNodes[i].innerHTML);\r\n                    }\r\n                    fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\r\n                }\r\n                $(fragment.childNodes).filter('table').addClass('k-table').end().find('table').addClass('k-table');\r\n                range.insertNode(fragment);\r\n                parent = this.splittableParent(block, caret);\r\n                if (unwrap) {\r\n                    while (caret.parentNode != parent) {\r\n                        dom.unwrap(caret.parentNode);\r\n                    }\r\n                    dom.unwrap(caret.parentNode);\r\n                }\r\n                dom.normalize(range.commonAncestorContainer);\r\n                caret.style.display = 'inline';\r\n                dom.restoreScrollTop(editor.document);\r\n                dom.scrollTo(caret);\r\n                marker.removeCaret(range);\r\n                var rangeEnd = range.commonAncestorContainer.parentNode;\r\n                if (range.collapsed && dom.name(rangeEnd) == 'tbody') {\r\n                    range.setStartAfter($(rangeEnd).closest('table')[0]);\r\n                    range.collapse(true);\r\n                }\r\n                editor.selectRange(range);\r\n            }\r\n        });\r\n        var Cleaner = Class.extend({\r\n            init: function (options) {\r\n                this.options = options || {};\r\n                this.replacements = [];\r\n            },\r\n            clean: function (html, customReplacements) {\r\n                var that = this, replacements = customReplacements || that.replacements, i, l;\r\n                for (i = 0, l = replacements.length; i < l; i += 2) {\r\n                    html = html.replace(replacements[i], replacements[i + 1]);\r\n                }\r\n                return html;\r\n            }\r\n        });\r\n        var ScriptCleaner = Cleaner.extend({\r\n            init: function (options) {\r\n                Cleaner.fn.init.call(this, options);\r\n                this.replacements = [\r\n                    /<(\\/?)script([^>]*)>/i,\r\n                    '<$1telerik:script$2>'\r\n                ];\r\n            },\r\n            applicable: function (html) {\r\n                return !this.options.none && /<script[^>]*>/i.test(html);\r\n            }\r\n        });\r\n        var TabCleaner = Cleaner.extend({\r\n            init: function (options) {\r\n                Cleaner.fn.init.call(this, options);\r\n                var replacement = ' ';\r\n                this.replacements = [\r\n                    /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi,\r\n                    replacement,\r\n                    /\\t/gi,\r\n                    replacement,\r\n                    /&nbsp;&nbsp; &nbsp;/gi,\r\n                    replacement\r\n                ];\r\n            },\r\n            applicable: function (html) {\r\n                return /&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i.test(html);\r\n            }\r\n        });\r\n        var MSWordFormatCleaner = Cleaner.extend({\r\n            init: function (options) {\r\n                Cleaner.fn.init.call(this, options);\r\n                this.junkReplacements = [\r\n                    /<\\?xml[^>]*>/gi,\r\n                    '',\r\n                    /<!--(.|\\n)*?-->/g,\r\n                    '',\r\n                    /&quot;/g,\r\n                    '\\'',\r\n                    /<o:p>&nbsp;<\\/o:p>/gi,\r\n                    '&nbsp;',\r\n                    /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,\r\n                    '',\r\n                    /<\\/o>/g,\r\n                    ''\r\n                ];\r\n                this.replacements = this.junkReplacements.concat([\r\n                    /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g,\r\n                    '$1',\r\n                    /<br><br>/g,\r\n                    '<BR><BR>',\r\n                    /<br>(?!\\n)/g,\r\n                    ' ',\r\n                    /<table([^>]*)>(\\s|&nbsp;)+<t/gi,\r\n                    '<table$1><t',\r\n                    /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi,\r\n                    '',\r\n                    /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi,\r\n                    '',\r\n                    /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi,\r\n                    '',\r\n                    /<BR><BR>/g,\r\n                    '<br>',\r\n                    /^\\s*(&nbsp;)+/gi,\r\n                    '',\r\n                    /(&nbsp;|<br[^>]*>)+\\s*$/gi,\r\n                    '',\r\n                    /mso-[^;\"]*;?/gi,\r\n                    '',\r\n                    /<(\\/?)b(\\s[^>]*)?>/gi,\r\n                    '<$1strong$2>',\r\n                    /<(\\/?)font(\\s[^>]*)?>/gi,\r\n                    this.convertFontMatch,\r\n                    /<(\\/?)i(\\s[^>]*)?>/gi,\r\n                    '<$1em$2>',\r\n                    /style=([\"|'])\\s*\\1/g,\r\n                    '',\r\n                    /(<br[^>]*>)?\\n/g,\r\n                    function ($0, $1) {\r\n                        return $1 ? $0 : ' ';\r\n                    }\r\n                ]);\r\n            },\r\n            convertFontMatch: function (match, closing, args) {\r\n                var faceRe = /face=['\"]([^'\"]+)['\"]/i;\r\n                var face = faceRe.exec(args);\r\n                var family = args && face && face[1];\r\n                if (closing) {\r\n                    return '</span>';\r\n                } else if (family) {\r\n                    return '<span style=\"font-family:' + family + '\">';\r\n                } else {\r\n                    return '<span>';\r\n                }\r\n            },\r\n            applicable: function (html) {\r\n                return /class=\"?Mso/i.test(html) || /style=\"[^\"]*mso-/i.test(html) || /urn:schemas-microsoft-com:office/.test(html);\r\n            },\r\n            stripEmptyAnchors: function (html) {\r\n                return html.replace(/<a([^>]*)>\\s*<\\/a>/gi, function (a, attributes) {\r\n                    if (!attributes || attributes.indexOf('href') < 0) {\r\n                        return '';\r\n                    }\r\n                    return a;\r\n                });\r\n            },\r\n            listType: function (p, listData) {\r\n                var html = p.innerHTML;\r\n                var text = dom.innerText(p);\r\n                var startingSymbol;\r\n                var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\r\n                var symbol = matchSymbol && matchSymbol[1];\r\n                var isNumber = /^[a-z\\d]/i.test(symbol);\r\n                var trimStartText = function (text) {\r\n                    return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\r\n                };\r\n                if (matchSymbol) {\r\n                    startingSymbol = true;\r\n                }\r\n                html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\xA0');\r\n                if (!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html) || startingSymbol && /^.\\u00a0+/.test(html) || symbol && !isNumber && listData) {\r\n                    return {\r\n                        tag: 'ul',\r\n                        style: this._guessUnorderedListStyle(trimStartText(text))\r\n                    };\r\n                }\r\n                if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\r\n                    return {\r\n                        tag: 'ol',\r\n                        style: this._guessOrderedListStyle(trimStartText(text))\r\n                    };\r\n                }\r\n            },\r\n            _convertToLi: function (p) {\r\n                var content;\r\n                if (p.childNodes.length == 1) {\r\n                    content = p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, '');\r\n                } else {\r\n                    dom.remove(p.firstChild);\r\n                    if (p.firstChild.nodeType == 3) {\r\n                        if (/^[ivxlcdm]+\\.$/i.test(p.firstChild.nodeValue)) {\r\n                            dom.remove(p.firstChild);\r\n                        }\r\n                    }\r\n                    if (/^(&nbsp;|\\s)+$/i.test(p.firstChild.innerHTML)) {\r\n                        dom.remove(p.firstChild);\r\n                    }\r\n                    content = p.innerHTML;\r\n                }\r\n                dom.remove(p);\r\n                return dom.create(document, 'li', { innerHTML: content });\r\n            },\r\n            _guessUnorderedListStyle: function (symbol) {\r\n                if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\r\n                    return null;\r\n                } else if (/^o/.test(symbol)) {\r\n                    return 'circle';\r\n                } else {\r\n                    return 'square';\r\n                }\r\n            },\r\n            _guessOrderedListStyle: function (symbol) {\r\n                var listType = null;\r\n                if (!/^\\d/.test(symbol)) {\r\n                    listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') + (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\r\n                }\r\n                return listType;\r\n            },\r\n            extractListLevels: function (html) {\r\n                var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\r\n                html = html.replace(msoListRegExp, function (match, list, level) {\r\n                    return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\r\n                });\r\n                return html;\r\n            },\r\n            lists: function (placeholder) {\r\n                var blockChildren = $(placeholder).find(dom.blockElements.join(',')), lastMargin = -1, name, levels = {}, li = placeholder, rootMargin, listContainer, i, p, type, margin, list, listData;\r\n                for (i = 0; i < blockChildren.length; i++) {\r\n                    p = blockChildren[i];\r\n                    listData = $(p).data();\r\n                    var listIndex = listData.list;\r\n                    name = dom.name(p);\r\n                    if (name == 'td') {\r\n                        continue;\r\n                    }\r\n                    var listType = this.listType(p, listData);\r\n                    type = listType && listType.tag;\r\n                    if (!type || name != 'p') {\r\n                        if (!p.innerHTML) {\r\n                            dom.remove(p);\r\n                        } else {\r\n                            lastMargin = -1;\r\n                            li = placeholder;\r\n                        }\r\n                        continue;\r\n                    }\r\n                    margin = parseFloat(p.style.marginLeft || 0);\r\n                    if (rootMargin === undefined) {\r\n                        rootMargin = margin;\r\n                    }\r\n                    var levelType = type + listIndex;\r\n                    if (!levels[margin]) {\r\n                        levels[margin] = {};\r\n                    }\r\n                    list = levels[margin][levelType];\r\n                    if (margin > lastMargin || !list) {\r\n                        list = dom.create(document, type, { style: { listStyleType: listType.style } });\r\n                        if (li == placeholder || margin <= lastMargin) {\r\n                            if (listContainer && rootMargin !== margin) {\r\n                                listContainer.appendChild(list);\r\n                            } else {\r\n                                dom.insertBefore(list, p);\r\n                            }\r\n                            levels[margin] = {};\r\n                        } else {\r\n                            listContainer = li;\r\n                            li.appendChild(list);\r\n                        }\r\n                        levels[margin][levelType] = list;\r\n                    }\r\n                    li = this._convertToLi(p);\r\n                    list.appendChild(li);\r\n                    lastMargin = margin;\r\n                }\r\n            },\r\n            removeAttributes: function (element) {\r\n                var attributes = element.attributes, i = attributes.length;\r\n                while (i--) {\r\n                    if (dom.name(attributes[i]) != 'colspan') {\r\n                        element.removeAttributeNode(attributes[i]);\r\n                    }\r\n                }\r\n            },\r\n            createColGroup: function (row) {\r\n                var cells = row.cells;\r\n                var table = $(row).closest('table');\r\n                var colgroup = table.children('colgroup');\r\n                if (cells.length < 2) {\r\n                    return;\r\n                } else if (colgroup.length) {\r\n                    cells = colgroup.children();\r\n                    colgroup[0].parentNode.removeChild(colgroup[0]);\r\n                }\r\n                colgroup = $($.map(cells, function (cell) {\r\n                    var width = cell.width;\r\n                    if (width && parseInt(width, 10) !== 0) {\r\n                        return kendo.format('<col style=\"width:{0}px;\"/>', width);\r\n                    }\r\n                    return '<col />';\r\n                }).join(''));\r\n                if (!colgroup.is('colgroup')) {\r\n                    colgroup = $('<colgroup/>').append(colgroup);\r\n                }\r\n                colgroup.prependTo(table);\r\n            },\r\n            convertHeaders: function (row) {\r\n                var cells = row.cells, i, boldedCells = $.map(cells, function (cell) {\r\n                        var child = $(cell).children('p').children('strong')[0];\r\n                        if (child && dom.name(child) == 'strong') {\r\n                            return child;\r\n                        }\r\n                    });\r\n                if (boldedCells.length == cells.length) {\r\n                    for (i = 0; i < boldedCells.length; i++) {\r\n                        dom.unwrap(boldedCells[i]);\r\n                    }\r\n                    $(row).closest('table').find('colgroup').after('<thead></thead>').end().find('thead').append(row);\r\n                    for (i = 0; i < cells.length; i++) {\r\n                        dom.changeTag(cells[i], 'th');\r\n                    }\r\n                }\r\n            },\r\n            removeParagraphs: function (cells) {\r\n                var i, j, len, cell, paragraphs;\r\n                for (i = 0; i < cells.length; i++) {\r\n                    this.removeAttributes(cells[i]);\r\n                    cell = $(cells[i]);\r\n                    paragraphs = cell.children('p');\r\n                    for (j = 0, len = paragraphs.length; j < len; j++) {\r\n                        if (j < len - 1) {\r\n                            dom.insertAfter(dom.create(document, 'br'), paragraphs[j]);\r\n                        }\r\n                        dom.unwrap(paragraphs[j]);\r\n                    }\r\n                }\r\n            },\r\n            removeDefaultColors: function (spans) {\r\n                for (var i = 0; i < spans.length; i++) {\r\n                    if (/^\\s*color:\\s*[^;]*;?$/i.test(spans[i].style.cssText)) {\r\n                        dom.unwrap(spans[i]);\r\n                    }\r\n                }\r\n            },\r\n            tables: function (placeholder) {\r\n                var tables = $(placeholder).find('table'), that = this, rows, firstRow, longestRow, i, j;\r\n                for (i = 0; i < tables.length; i++) {\r\n                    rows = tables[i].rows;\r\n                    longestRow = firstRow = rows[0];\r\n                    for (j = 1; j < rows.length; j++) {\r\n                        if (rows[j].cells.length > longestRow.cells.length) {\r\n                            longestRow = rows[j];\r\n                        }\r\n                    }\r\n                    that.createColGroup(longestRow);\r\n                    that.convertHeaders(firstRow);\r\n                    that.removeAttributes(tables[i]);\r\n                    that.removeParagraphs(tables.eq(i).find('td,th'));\r\n                    that.removeDefaultColors(tables.eq(i).find('span'));\r\n                }\r\n            },\r\n            headers: function (placeholder) {\r\n                var titles = $(placeholder).find('p.MsoTitle');\r\n                for (var i = 0; i < titles.length; i++) {\r\n                    dom.changeTag(titles[i], 'h1');\r\n                }\r\n            },\r\n            removeFormatting: function (placeholder) {\r\n                $(placeholder).find('*').each(function () {\r\n                    $(this).css({\r\n                        fontSize: '',\r\n                        fontFamily: ''\r\n                    });\r\n                    if (!this.getAttribute('style') && !this.style.cssText) {\r\n                        this.removeAttribute('style');\r\n                    }\r\n                });\r\n            },\r\n            clean: function (html) {\r\n                var that = this, placeholder;\r\n                var filters = this.options;\r\n                if (filters.none) {\r\n                    html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\r\n                    html = that.stripEmptyAnchors(html);\r\n                } else {\r\n                    html = this.extractListLevels(html);\r\n                    html = Cleaner.fn.clean.call(that, html);\r\n                    html = that.stripEmptyAnchors(html);\r\n                    placeholder = dom.create(document, 'div', { innerHTML: html });\r\n                    that.headers(placeholder);\r\n                    if (filters.msConvertLists) {\r\n                        that.lists(placeholder);\r\n                    }\r\n                    that.tables(placeholder);\r\n                    if (filters.msAllFormatting) {\r\n                        that.removeFormatting(placeholder);\r\n                    }\r\n                    html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/gi, '$1');\r\n                }\r\n                return html;\r\n            }\r\n        });\r\n        var WebkitFormatCleaner = Cleaner.extend({\r\n            init: function (options) {\r\n                Cleaner.fn.init.call(this, options);\r\n                this.replacements = [\r\n                    /\\s+class=\"Apple-style-span[^\"]*\"/gi,\r\n                    '',\r\n                    /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi,\r\n                    '<$1',\r\n                    /^<div>(.*)<\\/div>$/,\r\n                    '$1'\r\n                ];\r\n            },\r\n            applicable: function (html) {\r\n                return /class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i.test(html);\r\n            }\r\n        });\r\n        var DomCleaner = Cleaner.extend({\r\n            clean: function (html) {\r\n                var container = dom.create(document, 'div', { innerHTML: html });\r\n                container = this.cleanDom(container);\r\n                return container.innerHTML;\r\n            },\r\n            cleanDom: function (container) {\r\n                return container;\r\n            }\r\n        });\r\n        var HtmlTagsCleaner = DomCleaner.extend({\r\n            cleanDom: function (container) {\r\n                var tags = this.collectTags();\r\n                $(container).find(tags).each(function () {\r\n                    dom.unwrap(this);\r\n                });\r\n                return container;\r\n            },\r\n            collectTags: function () {\r\n                if (this.options.span) {\r\n                    return 'span';\r\n                }\r\n            },\r\n            applicable: function () {\r\n                return this.options.span;\r\n            }\r\n        });\r\n        var HtmlAttrCleaner = DomCleaner.extend({\r\n            cleanDom: function (container) {\r\n                var attributes = this.collectAttr();\r\n                var nodes = $(container).find('[' + attributes.join('],[') + ']');\r\n                nodes.removeAttr(attributes.join(' '));\r\n                return container;\r\n            },\r\n            collectAttr: function () {\r\n                if (this.options.css) {\r\n                    return [\r\n                        'class',\r\n                        'style'\r\n                    ];\r\n                }\r\n                return [];\r\n            },\r\n            applicable: function () {\r\n                return this.options.css;\r\n            }\r\n        });\r\n        var TextContainer = function () {\r\n            this.text = '';\r\n            this.add = function (text) {\r\n                this.text += text;\r\n            };\r\n        };\r\n        var HtmlTextLines = Class.extend({\r\n            init: function (separators) {\r\n                this.separators = separators || {\r\n                    text: ' ',\r\n                    line: '<br/>'\r\n                };\r\n                this.lines = [];\r\n                this.inlineBlockText = [];\r\n                this.resetLine();\r\n            },\r\n            appendText: function (text) {\r\n                if (text.nodeType === 3) {\r\n                    text = text.nodeValue;\r\n                }\r\n                this.textContainer.add(text);\r\n            },\r\n            appendInlineBlockText: function (text) {\r\n                this.inlineBlockText.push(text);\r\n            },\r\n            flashInlineBlockText: function () {\r\n                if (this.inlineBlockText.length) {\r\n                    this.appendText(this.inlineBlockText.join(' '));\r\n                    this.inlineBlockText = [];\r\n                }\r\n            },\r\n            endLine: function () {\r\n                this.flashInlineBlockText();\r\n                this.resetLine();\r\n            },\r\n            html: function () {\r\n                var separators = this.separators;\r\n                var result = '';\r\n                var lines = this.lines;\r\n                this.flashInlineBlockText();\r\n                for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\r\n                    var line = lines[i];\r\n                    for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\r\n                        var text = line[j].text;\r\n                        result += text;\r\n                        if (j !== jl1) {\r\n                            result += separators.text;\r\n                        }\r\n                    }\r\n                    if (i !== il1) {\r\n                        result += separators.line;\r\n                    }\r\n                }\r\n                return result;\r\n            },\r\n            resetLine: function () {\r\n                this.textContainer = new TextContainer();\r\n                this.line = [];\r\n                this.line.push(this.textContainer);\r\n                this.lines.push(this.line);\r\n            }\r\n        });\r\n        var DomEnumerator = Class.extend({\r\n            init: function (callback) {\r\n                this.callback = callback;\r\n            },\r\n            enumerate: function (node) {\r\n                if (!node) {\r\n                    return;\r\n                }\r\n                var preventDown = this.callback(node);\r\n                var child = node.firstChild;\r\n                if (!preventDown && child) {\r\n                    this.enumerate(child);\r\n                }\r\n                this.enumerate(node.nextSibling);\r\n            }\r\n        });\r\n        var HtmlContentCleaner = Cleaner.extend({\r\n            init: function (options) {\r\n                Cleaner.fn.init.call(this, options);\r\n                this.hasText = false;\r\n                this.enumerator = new DomEnumerator($.proxy(this.buildText, this));\r\n            },\r\n            clean: function (html) {\r\n                var container = dom.create(document, 'div', { innerHTML: html });\r\n                return this.cleanDom(container);\r\n            },\r\n            cleanDom: function (container) {\r\n                this.separators = this.getDefaultSeparators();\r\n                this.htmlLines = new HtmlTextLines(this.separators);\r\n                this.enumerator.enumerate(container.firstChild);\r\n                this.hasText = false;\r\n                return this.htmlLines.html();\r\n            },\r\n            buildText: function (node) {\r\n                if (dom.isDataNode(node)) {\r\n                    if (dom.isEmptyspace(node)) {\r\n                        return;\r\n                    }\r\n                    this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\r\n                    this.hasText = true;\r\n                } else if (dom.isBlock(node) && this.hasText) {\r\n                    var action = this.actions[dom.name(node)] || this.actions.block;\r\n                    return action(this, node);\r\n                }\r\n            },\r\n            applicable: function () {\r\n                var o = this.options;\r\n                return o.all || o.keepNewLines;\r\n            },\r\n            getDefaultSeparators: function () {\r\n                if (this.options.all) {\r\n                    return {\r\n                        text: ' ',\r\n                        line: ' '\r\n                    };\r\n                } else {\r\n                    return {\r\n                        text: ' ',\r\n                        line: '<br/>'\r\n                    };\r\n                }\r\n            },\r\n            actions: {\r\n                ul: $.noop,\r\n                ol: $.noop,\r\n                table: $.noop,\r\n                thead: $.noop,\r\n                tbody: $.noop,\r\n                td: function (cleaner, node) {\r\n                    var tdCleaner = new HtmlContentCleaner({ all: true });\r\n                    var cellText = tdCleaner.cleanDom(node);\r\n                    cleaner.htmlLines.appendInlineBlockText(cellText);\r\n                    return true;\r\n                },\r\n                block: function (cleaner) {\r\n                    cleaner.htmlLines.endLine();\r\n                }\r\n            }\r\n        });\r\n        var CustomCleaner = Cleaner.extend({\r\n            clean: function (html) {\r\n                return this.options.custom(html);\r\n            },\r\n            applicable: function () {\r\n                return typeof this.options.custom === 'function';\r\n            }\r\n        });\r\n        var PrintCommand = Command.extend({\r\n            init: function (options) {\r\n                Command.fn.init.call(this, options);\r\n                this.managesUndoRedo = true;\r\n            },\r\n            exec: function () {\r\n                var editor = this.editor;\r\n                if (kendo.support.browser.msie) {\r\n                    editor.document.execCommand('print', false, null);\r\n                } else if (editor.window.print) {\r\n                    editor.window.print();\r\n                }\r\n            }\r\n        });\r\n        var ExportPdfCommand = Command.extend({\r\n            init: function (options) {\r\n                this.async = true;\r\n                Command.fn.init.call(this, options);\r\n            },\r\n            exec: function () {\r\n                var that = this;\r\n                var range = this.lockRange(true);\r\n                this.editor.saveAsPDF().then(function () {\r\n                    that.releaseRange(range);\r\n                });\r\n            }\r\n        });\r\n        extend(editorNS, {\r\n            _finishUpdate: finishUpdate,\r\n            Command: Command,\r\n            GenericCommand: GenericCommand,\r\n            InsertHtmlCommand: InsertHtmlCommand,\r\n            InsertHtmlTool: InsertHtmlTool,\r\n            TypingHandler: TypingHandler,\r\n            SystemHandler: SystemHandler,\r\n            BackspaceHandler: BackspaceHandler,\r\n            Keyboard: Keyboard,\r\n            Clipboard: Clipboard,\r\n            Cleaner: Cleaner,\r\n            ScriptCleaner: ScriptCleaner,\r\n            TabCleaner: TabCleaner,\r\n            MSWordFormatCleaner: MSWordFormatCleaner,\r\n            WebkitFormatCleaner: WebkitFormatCleaner,\r\n            HtmlTagsCleaner: HtmlTagsCleaner,\r\n            HtmlAttrCleaner: HtmlAttrCleaner,\r\n            HtmlContentCleaner: HtmlContentCleaner,\r\n            HtmlTextLines: HtmlTextLines,\r\n            CustomCleaner: CustomCleaner,\r\n            PrintCommand: PrintCommand,\r\n            ExportPdfCommand: ExportPdfCommand\r\n        });\r\n        registerTool('insertHtml', new InsertHtmlTool({\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.dropDownListTemplate,\r\n                title: 'Insert HTML',\r\n                initialValue: 'Insert HTML'\r\n            })\r\n        }));\r\n        registerTool('print', new Tool({\r\n            command: PrintCommand,\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Print'\r\n            })\r\n        }));\r\n        registerTool('pdf', new Tool({\r\n            command: ExportPdfCommand,\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Export PDF'\r\n            })\r\n        }));\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('editor/inlineformat', ['editor/system'], f);\r\n}(function () {\r\n    (function ($) {\r\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, EditorUtils = Editor.EditorUtils, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, extend = $.extend, registerTool = Editor.EditorUtils.registerTool, registerFormat = Editor.EditorUtils.registerFormat, KMARKER = 'k-marker';\r\n        var InlineFormatFinder = Class.extend({\r\n            init: function (format) {\r\n                this.format = format;\r\n            },\r\n            numberOfSiblings: function (referenceNode) {\r\n                var textNodesCount = 0, elementNodesCount = 0, markerCount = 0, parentNode = referenceNode.parentNode, node;\r\n                for (node = parentNode.firstChild; node; node = node.nextSibling) {\r\n                    if (node != referenceNode) {\r\n                        if (node.className == KMARKER) {\r\n                            markerCount++;\r\n                        } else if (node.nodeType == 3) {\r\n                            textNodesCount++;\r\n                        } else {\r\n                            elementNodesCount++;\r\n                        }\r\n                    }\r\n                }\r\n                if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\r\n                    return 0;\r\n                } else {\r\n                    return elementNodesCount + textNodesCount;\r\n                }\r\n            },\r\n            findSuitable: function (sourceNode, skip) {\r\n                if (!skip && this.numberOfSiblings(sourceNode) > 0) {\r\n                    return null;\r\n                }\r\n                var node = sourceNode.parentNode;\r\n                var tags = this.format[0].tags;\r\n                while (!dom.ofType(node, tags)) {\r\n                    if (this.numberOfSiblings(node) > 0) {\r\n                        return null;\r\n                    }\r\n                    node = node.parentNode;\r\n                }\r\n                return node;\r\n            },\r\n            findFormat: function (sourceNode) {\r\n                var format = this.format, attrEquals = dom.attrEquals, i, len, node, tags, attributes;\r\n                for (i = 0, len = format.length; i < len; i++) {\r\n                    node = sourceNode;\r\n                    tags = format[i].tags;\r\n                    attributes = format[i].attr;\r\n                    if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\r\n                        return node;\r\n                    }\r\n                    while (node) {\r\n                        node = dom.parentOfType(node, tags);\r\n                        if (node && attrEquals(node, attributes)) {\r\n                            return node;\r\n                        }\r\n                    }\r\n                }\r\n                return null;\r\n            },\r\n            isFormatted: function (nodes) {\r\n                var i, len;\r\n                for (i = 0, len = nodes.length; i < len; i++) {\r\n                    if (this.findFormat(nodes[i])) {\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n        });\r\n        var InlineFormatter = Class.extend({\r\n            init: function (format, values) {\r\n                this.finder = new InlineFormatFinder(format);\r\n                this.attributes = extend({}, format[0].attr, values);\r\n                this.tag = format[0].tags[0];\r\n            },\r\n            wrap: function (node) {\r\n                return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\r\n            },\r\n            activate: function (range, nodes) {\r\n                if (this.finder.isFormatted(nodes)) {\r\n                    this.split(range);\r\n                    this.remove(nodes);\r\n                } else {\r\n                    this.apply(nodes);\r\n                }\r\n            },\r\n            toggle: function (range) {\r\n                var nodes = RangeUtils.textNodes(range);\r\n                if (nodes.length > 0) {\r\n                    this.activate(range, nodes);\r\n                }\r\n            },\r\n            apply: function (nodes) {\r\n                var formatNodes = [];\r\n                var i, l, node, formatNode;\r\n                for (i = 0, l = nodes.length; i < l; i++) {\r\n                    node = nodes[i];\r\n                    formatNode = this.finder.findSuitable(node);\r\n                    if (formatNode) {\r\n                        dom.attr(formatNode, this.attributes);\r\n                    } else {\r\n                        while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true') {\r\n                            node = node.parentNode;\r\n                        }\r\n                        formatNode = this.wrap(node);\r\n                    }\r\n                    formatNodes.push(formatNode);\r\n                }\r\n                this.consolidate(formatNodes);\r\n            },\r\n            remove: function (nodes) {\r\n                var i, l, formatNode;\r\n                for (i = 0, l = nodes.length; i < l; i++) {\r\n                    formatNode = this.finder.findFormat(nodes[i]);\r\n                    if (formatNode) {\r\n                        if (this.attributes && this.attributes.style) {\r\n                            dom.unstyle(formatNode, this.attributes.style);\r\n                            if (!formatNode.style.cssText && !formatNode.attributes['class']) {\r\n                                dom.unwrap(formatNode);\r\n                            }\r\n                        } else {\r\n                            dom.unwrap(formatNode);\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            split: function (range) {\r\n                var nodes = RangeUtils.textNodes(range);\r\n                var l = nodes.length;\r\n                var i, formatNode;\r\n                if (l > 0) {\r\n                    for (i = 0; i < l; i++) {\r\n                        formatNode = this.finder.findFormat(nodes[i]);\r\n                        if (formatNode) {\r\n                            RangeUtils.split(range, formatNode, true);\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            consolidate: function (nodes) {\r\n                var node, last;\r\n                while (nodes.length > 1) {\r\n                    node = nodes.pop();\r\n                    last = nodes[nodes.length - 1];\r\n                    if (node.previousSibling && node.previousSibling.className == KMARKER) {\r\n                        last.appendChild(node.previousSibling);\r\n                    }\r\n                    if (node.tagName == last.tagName && node.previousSibling == last && node.style.cssText == last.style.cssText) {\r\n                        while (node.firstChild) {\r\n                            last.appendChild(node.firstChild);\r\n                        }\r\n                        dom.remove(node);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        var GreedyInlineFormatFinder = InlineFormatFinder.extend({\r\n            init: function (format, greedyProperty) {\r\n                this.format = format;\r\n                this.greedyProperty = greedyProperty;\r\n                InlineFormatFinder.fn.init.call(this, format);\r\n            },\r\n            getInlineCssValue: function (node) {\r\n                var attributes = node.attributes;\r\n                var trim = $.trim;\r\n                var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\r\n                var propertyAndValue, property, value;\r\n                if (!attributes) {\r\n                    return;\r\n                }\r\n                for (i = 0, l = attributes.length; i < l; i++) {\r\n                    attribute = attributes[i];\r\n                    name = attribute.nodeName;\r\n                    attributeValue = attribute.nodeValue;\r\n                    if (attribute.specified && name == 'style') {\r\n                        css = trim(attributeValue || node.style.cssText).split(';');\r\n                        for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\r\n                            pair = css[cssIndex];\r\n                            if (pair.length) {\r\n                                propertyAndValue = pair.split(':');\r\n                                property = trim(propertyAndValue[0].toLowerCase());\r\n                                value = trim(propertyAndValue[1]);\r\n                                if (property != this.greedyProperty) {\r\n                                    continue;\r\n                                }\r\n                                return property.indexOf('color') >= 0 ? dom.toHex(value) : value;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            getFormatInner: function (node) {\r\n                var $node = $(dom.isDataNode(node) ? node.parentNode : node);\r\n                var parents = $node.parentsUntil('[contentEditable]').addBack().toArray().reverse();\r\n                var i, len, value;\r\n                for (i = 0, len = parents.length; i < len; i++) {\r\n                    value = this.greedyProperty == 'className' ? parents[i].className : this.getInlineCssValue(parents[i]);\r\n                    if (value) {\r\n                        return value;\r\n                    }\r\n                }\r\n                return 'inherit';\r\n            },\r\n            getFormat: function (nodes) {\r\n                var result = this.getFormatInner(nodes[0]), i, len;\r\n                for (i = 1, len = nodes.length; i < len; i++) {\r\n                    if (result != this.getFormatInner(nodes[i])) {\r\n                        return '';\r\n                    }\r\n                }\r\n                return result;\r\n            },\r\n            isFormatted: function (nodes) {\r\n                return this.getFormat(nodes) !== '';\r\n            }\r\n        });\r\n        var GreedyInlineFormatter = InlineFormatter.extend({\r\n            init: function (format, values, greedyProperty) {\r\n                InlineFormatter.fn.init.call(this, format, values);\r\n                this.values = values;\r\n                this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\r\n                if (greedyProperty) {\r\n                    this.greedyProperty = kendo.toCamelCase(greedyProperty);\r\n                }\r\n            },\r\n            activate: function (range, nodes) {\r\n                var greedyProperty = this.greedyProperty;\r\n                var action = 'apply';\r\n                this.split(range);\r\n                if (greedyProperty && this.values.style[greedyProperty] == 'inherit') {\r\n                    action = 'remove';\r\n                }\r\n                this[action](nodes);\r\n            }\r\n        });\r\n        var InlineFormatTool = FormatTool.extend({\r\n            init: function (options) {\r\n                FormatTool.fn.init.call(this, extend(options, {\r\n                    finder: new InlineFormatFinder(options.format),\r\n                    formatter: function () {\r\n                        return new InlineFormatter(options.format);\r\n                    }\r\n                }));\r\n            }\r\n        });\r\n        var DelayedExecutionTool = Tool.extend({\r\n            update: function (ui, nodes) {\r\n                var list = ui.data(this.type);\r\n                list.close();\r\n                list.value(this.finder.getFormat(nodes));\r\n            }\r\n        });\r\n        var FontTool = DelayedExecutionTool.extend({\r\n            init: function (options) {\r\n                Tool.fn.init.call(this, options);\r\n                this.type = kendo.support.browser.msie || kendo.support.touch ? 'kendoDropDownList' : 'kendoComboBox';\r\n                this.format = [{ tags: ['span'] }];\r\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\r\n            },\r\n            command: function (commandArguments) {\r\n                var options = this.options, format = this.format, style = {};\r\n                return new Editor.FormatCommand(extend(commandArguments, {\r\n                    formatter: function () {\r\n                        style[options.domAttr] = commandArguments.value;\r\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\r\n                    }\r\n                }));\r\n            },\r\n            initialize: function (ui, initOptions) {\r\n                var editor = initOptions.editor, options = this.options, toolName = options.name, dataSource, defaultValue = [];\r\n                if (options.defaultValue) {\r\n                    defaultValue = [{\r\n                            text: editor.options.messages[options.defaultValue[0].text],\r\n                            value: options.defaultValue[0].value\r\n                        }];\r\n                }\r\n                dataSource = defaultValue.concat(options.items ? options.items : editor.options[toolName] || []);\r\n                ui.attr({ title: initOptions.title });\r\n                ui[this.type]({\r\n                    dataTextField: 'text',\r\n                    dataValueField: 'value',\r\n                    dataSource: dataSource,\r\n                    change: function () {\r\n                        Tool.exec(editor, toolName, this.value());\r\n                    },\r\n                    highlightFirst: false\r\n                });\r\n                ui.closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\r\n                ui.data(this.type).value('inherit');\r\n            }\r\n        });\r\n        var ColorTool = Tool.extend({\r\n            init: function (options) {\r\n                Tool.fn.init.call(this, options);\r\n                this.format = [{ tags: ['span'] }];\r\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\r\n            },\r\n            options: { palette: 'websafe' },\r\n            update: function () {\r\n                this._widget.close();\r\n            },\r\n            command: function (commandArguments) {\r\n                var options = this.options, format = this.format, style = {};\r\n                return new Editor.FormatCommand(extend(commandArguments, {\r\n                    formatter: function () {\r\n                        style[options.domAttr] = commandArguments.value;\r\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\r\n                    }\r\n                }));\r\n            },\r\n            initialize: function (ui, initOptions) {\r\n                var editor = initOptions.editor, toolName = this.name, options = extend({}, ColorTool.fn.options, this.options), palette = options.palette;\r\n                ui = this._widget = new kendo.ui.ColorPicker(ui, {\r\n                    toolIcon: 'k-' + options.name,\r\n                    palette: palette,\r\n                    change: function () {\r\n                        var color = ui.value();\r\n                        if (color) {\r\n                            Tool.exec(editor, toolName, color);\r\n                        }\r\n                        editor.focus();\r\n                    },\r\n                    activate: function (e) {\r\n                        e.preventDefault();\r\n                        ui.trigger('change');\r\n                    }\r\n                });\r\n                ui.wrapper.attr({\r\n                    title: initOptions.title,\r\n                    unselectable: 'on'\r\n                }).find('*').attr('unselectable', 'on');\r\n            }\r\n        });\r\n        extend(Editor, {\r\n            InlineFormatFinder: InlineFormatFinder,\r\n            InlineFormatter: InlineFormatter,\r\n            DelayedExecutionTool: DelayedExecutionTool,\r\n            GreedyInlineFormatFinder: GreedyInlineFormatFinder,\r\n            GreedyInlineFormatter: GreedyInlineFormatter,\r\n            InlineFormatTool: InlineFormatTool,\r\n            FontTool: FontTool,\r\n            ColorTool: ColorTool\r\n        });\r\n        registerFormat('bold', [\r\n            {\r\n                tags: [\r\n                    'strong',\r\n                    'b'\r\n                ]\r\n            },\r\n            {\r\n                tags: ['span'],\r\n                attr: { style: { fontWeight: 'bold' } }\r\n            }\r\n        ]);\r\n        registerTool('bold', new InlineFormatTool({\r\n            key: 'B',\r\n            ctrl: true,\r\n            format: formats.bold,\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Bold'\r\n            })\r\n        }));\r\n        registerFormat('italic', [\r\n            {\r\n                tags: [\r\n                    'em',\r\n                    'i'\r\n                ]\r\n            },\r\n            {\r\n                tags: ['span'],\r\n                attr: { style: { fontStyle: 'italic' } }\r\n            }\r\n        ]);\r\n        registerTool('italic', new InlineFormatTool({\r\n            key: 'I',\r\n            ctrl: true,\r\n            format: formats.italic,\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Italic'\r\n            })\r\n        }));\r\n        registerFormat('underline', [\r\n            {\r\n                tags: ['span'],\r\n                attr: { style: { textDecoration: 'underline' } }\r\n            },\r\n            { tags: ['u'] }\r\n        ]);\r\n        registerTool('underline', new InlineFormatTool({\r\n            key: 'U',\r\n            ctrl: true,\r\n            format: formats.underline,\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Underline'\r\n            })\r\n        }));\r\n        registerFormat('strikethrough', [\r\n            {\r\n                tags: [\r\n                    'del',\r\n                    'strike'\r\n                ]\r\n            },\r\n            {\r\n                tags: ['span'],\r\n                attr: { style: { textDecoration: 'line-through' } }\r\n            }\r\n        ]);\r\n        registerTool('strikethrough', new InlineFormatTool({\r\n            format: formats.strikethrough,\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Strikethrough'\r\n            })\r\n        }));\r\n        registerFormat('superscript', [{ tags: ['sup'] }]);\r\n        registerTool('superscript', new InlineFormatTool({\r\n            format: formats.superscript,\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Superscript'\r\n            })\r\n        }));\r\n        registerFormat('subscript', [{ tags: ['sub'] }]);\r\n        registerTool('subscript', new InlineFormatTool({\r\n            format: formats.subscript,\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Subscript'\r\n            })\r\n        }));\r\n        registerTool('foreColor', new ColorTool({\r\n            cssAttr: 'color',\r\n            domAttr: 'color',\r\n            name: 'foreColor',\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.colorPickerTemplate,\r\n                title: 'Color'\r\n            })\r\n        }));\r\n        registerTool('backColor', new ColorTool({\r\n            cssAttr: 'background-color',\r\n            domAttr: 'backgroundColor',\r\n            name: 'backColor',\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.colorPickerTemplate,\r\n                title: 'Background Color'\r\n            })\r\n        }));\r\n        registerTool('fontName', new FontTool({\r\n            cssAttr: 'font-family',\r\n            domAttr: 'fontFamily',\r\n            name: 'fontName',\r\n            defaultValue: [{\r\n                    text: 'fontNameInherit',\r\n                    value: 'inherit'\r\n                }],\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.comboBoxTemplate,\r\n                title: 'Font Name'\r\n            })\r\n        }));\r\n        registerTool('fontSize', new FontTool({\r\n            cssAttr: 'font-size',\r\n            domAttr: 'fontSize',\r\n            name: 'fontSize',\r\n            defaultValue: [{\r\n                    text: 'fontSizeInherit',\r\n                    value: 'inherit'\r\n                }],\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.comboBoxTemplate,\r\n                title: 'Font Size'\r\n            })\r\n        }));\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('editor/formatblock', ['editor/inlineformat'], f);\r\n}(function () {\r\n    (function ($) {\r\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, dom = Editor.Dom, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, registerFormat = EditorUtils.registerFormat, RangeUtils = Editor.RangeUtils;\r\n        var BlockFormatFinder = Class.extend({\r\n            init: function (format) {\r\n                this.format = format;\r\n            },\r\n            contains: function (node, children) {\r\n                var i, len, child;\r\n                for (i = 0, len = children.length; i < len; i++) {\r\n                    child = children[i];\r\n                    if (!child || !dom.isAncestorOrSelf(node, child)) {\r\n                        return false;\r\n                    }\r\n                }\r\n                return true;\r\n            },\r\n            findSuitable: function (nodes) {\r\n                var format = this.format, suitable = [], i, len, candidate;\r\n                for (i = 0, len = nodes.length; i < len; i++) {\r\n                    for (var f = format.length - 1; f >= 0; f--) {\r\n                        candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\r\n                        if (candidate) {\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (!candidate || candidate.contentEditable === 'true') {\r\n                        return [];\r\n                    }\r\n                    if ($.inArray(candidate, suitable) < 0) {\r\n                        suitable.push(candidate);\r\n                    }\r\n                }\r\n                for (i = 0, len = suitable.length; i < len; i++) {\r\n                    if (this.contains(suitable[i], suitable)) {\r\n                        return [suitable[i]];\r\n                    }\r\n                }\r\n                return suitable;\r\n            },\r\n            findFormat: function (sourceNode) {\r\n                var format = this.format, i, len, node, tags, attributes;\r\n                var editableParent = dom.editableParent(sourceNode);\r\n                for (i = 0, len = format.length; i < len; i++) {\r\n                    node = sourceNode;\r\n                    tags = format[i].tags;\r\n                    attributes = format[i].attr;\r\n                    while (node && dom.isAncestorOf(editableParent, node)) {\r\n                        if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\r\n                            return node;\r\n                        }\r\n                        node = node.parentNode;\r\n                    }\r\n                }\r\n                return null;\r\n            },\r\n            getFormat: function (nodes) {\r\n                var that = this, findFormat = function (node) {\r\n                        return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\r\n                    }, result = findFormat(nodes[0]), i, len;\r\n                if (!result) {\r\n                    return '';\r\n                }\r\n                for (i = 1, len = nodes.length; i < len; i++) {\r\n                    if (result != findFormat(nodes[i])) {\r\n                        return '';\r\n                    }\r\n                }\r\n                return result.nodeName.toLowerCase();\r\n            },\r\n            isFormatted: function (nodes) {\r\n                for (var i = 0, len = nodes.length; i < len; i++) {\r\n                    if (!this.findFormat(nodes[i])) {\r\n                        return false;\r\n                    }\r\n                }\r\n                return true;\r\n            }\r\n        });\r\n        var BlockFormatter = Class.extend({\r\n            init: function (format, values) {\r\n                this.format = format;\r\n                this.values = values;\r\n                this.finder = new BlockFormatFinder(format);\r\n            },\r\n            wrap: function (tag, attributes, nodes) {\r\n                var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\r\n                if (dom.isInline(commonAncestor)) {\r\n                    commonAncestor = dom.blockParentOrBody(commonAncestor);\r\n                }\r\n                var ancestors = dom.significantChildNodes(commonAncestor), position = dom.findNodeIndex(ancestors[0]), wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes), i, ancestor;\r\n                for (i = 0; i < ancestors.length; i++) {\r\n                    ancestor = ancestors[i];\r\n                    if (dom.isBlock(ancestor)) {\r\n                        dom.attr(ancestor, attributes);\r\n                        if (wrapper.childNodes.length) {\r\n                            dom.insertBefore(wrapper, ancestor);\r\n                            wrapper = wrapper.cloneNode(false);\r\n                        }\r\n                        position = dom.findNodeIndex(ancestor) + 1;\r\n                        continue;\r\n                    }\r\n                    wrapper.appendChild(ancestor);\r\n                }\r\n                if (wrapper.firstChild) {\r\n                    dom.insertAt(commonAncestor, wrapper, position);\r\n                }\r\n            },\r\n            apply: function (nodes) {\r\n                var format, values = this.values;\r\n                function attributes(format) {\r\n                    return extend({}, format && format.attr, values);\r\n                }\r\n                var images = dom.filter('img', nodes);\r\n                var imageFormat = EditorUtils.formatByName('img', this.format);\r\n                var imageAttributes = attributes(imageFormat);\r\n                $.each(images, function () {\r\n                    dom.attr(this, imageAttributes);\r\n                });\r\n                if (images.length == nodes.length) {\r\n                    return;\r\n                }\r\n                var nonImages = dom.filter('img', nodes, true);\r\n                var formatNodes = this.finder.findSuitable(nonImages);\r\n                if (formatNodes.length) {\r\n                    for (var i = 0, len = formatNodes.length; i < len; i++) {\r\n                        format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\r\n                        dom.attr(formatNodes[i], attributes(format));\r\n                    }\r\n                } else {\r\n                    format = this.format[0];\r\n                    this.wrap(format.tags[0], attributes(format), nonImages);\r\n                }\r\n            },\r\n            remove: function (nodes) {\r\n                var i, l, formatNode, namedFormat, name;\r\n                for (i = 0, l = nodes.length; i < l; i++) {\r\n                    formatNode = this.finder.findFormat(nodes[i]);\r\n                    if (formatNode) {\r\n                        name = dom.name(formatNode);\r\n                        if (name == 'div' && !formatNode.getAttribute('class')) {\r\n                            dom.unwrap(formatNode);\r\n                        } else {\r\n                            namedFormat = EditorUtils.formatByName(name, this.format);\r\n                            if (namedFormat.attr.style) {\r\n                                dom.unstyle(formatNode, namedFormat.attr.style);\r\n                            }\r\n                            if (namedFormat.attr.className) {\r\n                                dom.removeClass(formatNode, namedFormat.attr.className);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            toggle: function (range) {\r\n                var that = this, nodes = RangeUtils.nodes(range);\r\n                if (that.finder.isFormatted(nodes)) {\r\n                    that.remove(nodes);\r\n                } else {\r\n                    that.apply(nodes);\r\n                }\r\n            }\r\n        });\r\n        var GreedyBlockFormatter = Class.extend({\r\n            init: function (format, values) {\r\n                var that = this;\r\n                that.format = format;\r\n                that.values = values;\r\n                that.finder = new BlockFormatFinder(format);\r\n            },\r\n            apply: function (nodes) {\r\n                var format = this.format;\r\n                var blocks = dom.blockParents(nodes);\r\n                var formatTag = format[0].tags[0];\r\n                var i, len, list, formatter, range;\r\n                var element;\r\n                var tagName;\r\n                if (blocks.length) {\r\n                    for (i = 0, len = blocks.length; i < len; i++) {\r\n                        tagName = dom.name(blocks[i]);\r\n                        if (tagName == 'li') {\r\n                            list = blocks[i].parentNode;\r\n                            formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\r\n                            range = this.editor.createRange();\r\n                            range.selectNode(blocks[i]);\r\n                            formatter.toggle(range);\r\n                        } else if (formatTag && (tagName == 'td' || blocks[i].attributes.contentEditable)) {\r\n                            new BlockFormatter(format, this.values).apply(blocks[i].childNodes);\r\n                        } else {\r\n                            element = dom.changeTag(blocks[i], formatTag);\r\n                            dom.attr(element, format[0].attr);\r\n                        }\r\n                    }\r\n                } else {\r\n                    new BlockFormatter(format, this.values).apply(nodes);\r\n                }\r\n            },\r\n            toggle: function (range) {\r\n                var nodes = RangeUtils.textNodes(range);\r\n                if (!nodes.length) {\r\n                    range.selectNodeContents(range.commonAncestorContainer);\r\n                    nodes = RangeUtils.textNodes(range);\r\n                    if (!nodes.length) {\r\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\r\n                    }\r\n                }\r\n                this.apply(nodes);\r\n            }\r\n        });\r\n        var FormatCommand = Command.extend({\r\n            init: function (options) {\r\n                options.formatter = options.formatter();\r\n                Command.fn.init.call(this, options);\r\n            }\r\n        });\r\n        var BlockFormatTool = FormatTool.extend({\r\n            init: function (options) {\r\n                FormatTool.fn.init.call(this, extend(options, {\r\n                    finder: new BlockFormatFinder(options.format),\r\n                    formatter: function () {\r\n                        return new BlockFormatter(options.format);\r\n                    }\r\n                }));\r\n            }\r\n        });\r\n        extend(Editor, {\r\n            BlockFormatFinder: BlockFormatFinder,\r\n            BlockFormatter: BlockFormatter,\r\n            GreedyBlockFormatter: GreedyBlockFormatter,\r\n            FormatCommand: FormatCommand,\r\n            BlockFormatTool: BlockFormatTool\r\n        });\r\n        var listElements = [\r\n            'ul',\r\n            'ol',\r\n            'li'\r\n        ];\r\n        registerFormat('justifyLeft', [\r\n            {\r\n                tags: dom.nonListBlockElements,\r\n                attr: { style: { textAlign: 'left' } }\r\n            },\r\n            {\r\n                tags: ['img'],\r\n                attr: {\r\n                    style: {\r\n                        'float': 'left',\r\n                        display: '',\r\n                        marginLeft: '',\r\n                        marginRight: ''\r\n                    }\r\n                }\r\n            },\r\n            {\r\n                tags: listElements,\r\n                attr: {\r\n                    style: {\r\n                        textAlign: 'left',\r\n                        listStylePosition: ''\r\n                    }\r\n                }\r\n            }\r\n        ]);\r\n        registerTool('justifyLeft', new BlockFormatTool({\r\n            format: formats.justifyLeft,\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Justify Left'\r\n            })\r\n        }));\r\n        registerFormat('justifyCenter', [\r\n            {\r\n                tags: dom.nonListBlockElements,\r\n                attr: { style: { textAlign: 'center' } }\r\n            },\r\n            {\r\n                tags: ['img'],\r\n                attr: {\r\n                    style: {\r\n                        display: 'block',\r\n                        marginLeft: 'auto',\r\n                        marginRight: 'auto',\r\n                        'float': ''\r\n                    }\r\n                }\r\n            },\r\n            {\r\n                tags: listElements,\r\n                attr: {\r\n                    style: {\r\n                        textAlign: 'center',\r\n                        listStylePosition: 'inside'\r\n                    }\r\n                }\r\n            }\r\n        ]);\r\n        registerTool('justifyCenter', new BlockFormatTool({\r\n            format: formats.justifyCenter,\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Justify Center'\r\n            })\r\n        }));\r\n        registerFormat('justifyRight', [\r\n            {\r\n                tags: dom.nonListBlockElements,\r\n                attr: { style: { textAlign: 'right' } }\r\n            },\r\n            {\r\n                tags: ['img'],\r\n                attr: {\r\n                    style: {\r\n                        'float': 'right',\r\n                        display: '',\r\n                        marginLeft: '',\r\n                        marginRight: ''\r\n                    }\r\n                }\r\n            },\r\n            {\r\n                tags: listElements,\r\n                attr: {\r\n                    style: {\r\n                        textAlign: 'right',\r\n                        listStylePosition: 'inside'\r\n                    }\r\n                }\r\n            }\r\n        ]);\r\n        registerTool('justifyRight', new BlockFormatTool({\r\n            format: formats.justifyRight,\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Justify Right'\r\n            })\r\n        }));\r\n        registerFormat('justifyFull', [\r\n            {\r\n                tags: dom.nonListBlockElements,\r\n                attr: { style: { textAlign: 'justify' } }\r\n            },\r\n            {\r\n                tags: ['img'],\r\n                attr: {\r\n                    style: {\r\n                        display: 'block',\r\n                        marginLeft: 'auto',\r\n                        marginRight: 'auto',\r\n                        'float': ''\r\n                    }\r\n                }\r\n            },\r\n            {\r\n                tags: listElements,\r\n                attr: {\r\n                    style: {\r\n                        textAlign: 'justify',\r\n                        listStylePosition: ''\r\n                    }\r\n                }\r\n            }\r\n        ]);\r\n        registerTool('justifyFull', new BlockFormatTool({\r\n            format: formats.justifyFull,\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Justify Full'\r\n            })\r\n        }));\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('editor/linebreak', ['editor/formatblock'], f);\r\n}(function () {\r\n    (function ($) {\r\n        var kendo = window.kendo, extend = $.extend, editorNS = kendo.ui.editor, dom = editorNS.Dom, Command = editorNS.Command, Tool = editorNS.Tool, BlockFormatter = editorNS.BlockFormatter, normalize = dom.normalize, RangeUtils = editorNS.RangeUtils, registerTool = editorNS.EditorUtils.registerTool;\r\n        var ParagraphCommand = Command.extend({\r\n            init: function (options) {\r\n                this.options = options;\r\n                Command.fn.init.call(this, options);\r\n            },\r\n            _insertMarker: function (doc, range) {\r\n                var marker = dom.create(doc, 'a'), container;\r\n                marker.className = 'k-marker';\r\n                range.insertNode(marker);\r\n                if (!marker.parentNode) {\r\n                    container = range.commonAncestorContainer;\r\n                    container.innerHTML = '';\r\n                    container.appendChild(marker);\r\n                }\r\n                normalize(marker.parentNode);\r\n                return marker;\r\n            },\r\n            _moveFocus: function (range, candidate) {\r\n                if (dom.isEmpty(candidate)) {\r\n                    range.setStartBefore(candidate);\r\n                } else {\r\n                    range.selectNodeContents(candidate);\r\n                    var focusNode = RangeUtils.textNodes(range)[0];\r\n                    if (!focusNode) {\r\n                        while (candidate.childNodes.length && !dom.is(candidate.firstChild, 'br')) {\r\n                            candidate = candidate.firstChild;\r\n                        }\r\n                        focusNode = candidate;\r\n                    }\r\n                    if (dom.isEmpty(focusNode)) {\r\n                        range.setStartBefore(focusNode);\r\n                    } else {\r\n                        if (dom.emptyNode(focusNode)) {\r\n                            focusNode.innerHTML = '\\uFEFF';\r\n                        }\r\n                        range.setStartBefore(focusNode.firstChild || focusNode);\r\n                    }\r\n                }\r\n            },\r\n            shouldTrim: function (range) {\r\n                var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','), startInBlock = dom.parentOfType(range.startContainer, blocks), endInBlock = dom.parentOfType(range.endContainer, blocks);\r\n                return startInBlock && !endInBlock || !startInBlock && endInBlock;\r\n            },\r\n            _blankAfter: function (node) {\r\n                while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === '')) {\r\n                    node = node.nextSibling;\r\n                }\r\n                return !node;\r\n            },\r\n            exec: function () {\r\n                var range = this.getRange(), doc = RangeUtils.documentFromRange(range), parent, previous, next, emptyParagraphContent = editorNS.emptyElementContent, paragraph, marker, li, heading, rng, shouldTrim = this.shouldTrim(range);\r\n                range.deleteContents();\r\n                marker = this._insertMarker(doc, range);\r\n                dom.stripBomNode(marker.previousSibling);\r\n                dom.stripBomNode(marker.nextSibling);\r\n                li = dom.closestEditableOfType(marker, ['li']);\r\n                heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\r\n                if (li) {\r\n                    if (dom.emptyNode(li)) {\r\n                        paragraph = dom.create(doc, 'p');\r\n                        if (li.nextSibling) {\r\n                            rng = range.cloneRange();\r\n                            rng.selectNode(li);\r\n                            RangeUtils.split(rng, li.parentNode);\r\n                        }\r\n                        dom.insertAfter(paragraph, li.parentNode);\r\n                        dom.remove(li.parentNode.childNodes.length == 1 ? li.parentNode : li);\r\n                        paragraph.innerHTML = emptyParagraphContent;\r\n                        next = paragraph;\r\n                    }\r\n                } else if (heading && this._blankAfter(marker)) {\r\n                    paragraph = dom.create(doc, 'p');\r\n                    dom.insertAfter(paragraph, heading);\r\n                    paragraph.innerHTML = emptyParagraphContent;\r\n                    dom.remove(marker);\r\n                    next = paragraph;\r\n                }\r\n                if (!next) {\r\n                    if (!(li || heading)) {\r\n                        new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\r\n                    }\r\n                    range.selectNode(marker);\r\n                    parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\r\n                    RangeUtils.split(range, parent, shouldTrim);\r\n                    previous = parent.previousSibling;\r\n                    if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\r\n                        previous = previous.firstChild;\r\n                    }\r\n                    next = parent.nextSibling;\r\n                    this.clean(previous);\r\n                    this.clean(next, { links: true });\r\n                    if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\r\n                        next = next.firstChild;\r\n                    }\r\n                    dom.remove(parent);\r\n                    normalize(previous);\r\n                }\r\n                normalize(next);\r\n                this._moveFocus(range, next);\r\n                range.collapse(true);\r\n                dom.scrollTo(next);\r\n                RangeUtils.selectRange(range);\r\n            },\r\n            clean: function (node, options) {\r\n                var root = node;\r\n                if (node.firstChild && dom.is(node.firstChild, 'br')) {\r\n                    dom.remove(node.firstChild);\r\n                }\r\n                if (dom.isDataNode(node) && !node.nodeValue) {\r\n                    node = node.parentNode;\r\n                }\r\n                if (node) {\r\n                    var siblings = false;\r\n                    while (node.firstChild && node.firstChild.nodeType == 1) {\r\n                        siblings = siblings || dom.significantNodes(node.childNodes).length > 1;\r\n                        node = node.firstChild;\r\n                    }\r\n                    if (!dom.isEmpty(node) && /^\\s*$/.test(node.innerHTML) && !siblings) {\r\n                        $(root).find('.k-br').remove();\r\n                        node.innerHTML = editorNS.emptyElementContent;\r\n                    }\r\n                    if (options && options.links) {\r\n                        while (node != root) {\r\n                            if (dom.is(node, 'a') && dom.emptyNode(node)) {\r\n                                dom.unwrap(node);\r\n                                break;\r\n                            }\r\n                            node = node.parentNode;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        var NewLineCommand = Command.extend({\r\n            init: function (options) {\r\n                this.options = options;\r\n                Command.fn.init.call(this, options);\r\n            },\r\n            exec: function () {\r\n                var range = this.getRange();\r\n                var br = dom.create(RangeUtils.documentFromRange(range), 'br');\r\n                var filler;\r\n                var browser = kendo.support.browser;\r\n                var oldIE = browser.msie && browser.version < 11;\r\n                range.deleteContents();\r\n                range.insertNode(br);\r\n                normalize(br.parentNode);\r\n                if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\r\n                    filler = br.cloneNode(true);\r\n                    filler.className = 'k-br';\r\n                    dom.insertAfter(filler, br);\r\n                }\r\n                range.setStartAfter(br);\r\n                range.collapse(true);\r\n                dom.scrollTo(br.nextSibling || br);\r\n                RangeUtils.selectRange(range);\r\n            }\r\n        });\r\n        extend(editorNS, {\r\n            ParagraphCommand: ParagraphCommand,\r\n            NewLineCommand: NewLineCommand\r\n        });\r\n        registerTool('insertLineBreak', new Tool({\r\n            key: 13,\r\n            shift: true,\r\n            command: NewLineCommand\r\n        }));\r\n        registerTool('insertParagraph', new Tool({\r\n            key: 13,\r\n            command: ParagraphCommand\r\n        }));\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('editor/lists', ['editor/linebreak'], f);\r\n}(function () {\r\n    (function ($) {\r\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, BlockFormatFinder = Editor.BlockFormatFinder, textNodes = RangeUtils.textNodes, registerTool = Editor.EditorUtils.registerTool;\r\n        var ListFormatFinder = BlockFormatFinder.extend({\r\n            init: function (tag) {\r\n                this.tag = tag;\r\n                var tags = this.tags = [\r\n                    tag == 'ul' ? 'ol' : 'ul',\r\n                    tag\r\n                ];\r\n                BlockFormatFinder.fn.init.call(this, [{ tags: tags }]);\r\n            },\r\n            isFormatted: function (nodes) {\r\n                var formatNodes = [];\r\n                var formatNode, i;\r\n                for (i = 0; i < nodes.length; i++) {\r\n                    formatNode = this.findFormat(nodes[i]);\r\n                    if (formatNode && dom.name(formatNode) == this.tag) {\r\n                        formatNodes.push(formatNode);\r\n                    }\r\n                }\r\n                if (formatNodes.length < 1) {\r\n                    return false;\r\n                }\r\n                if (formatNodes.length != nodes.length) {\r\n                    return false;\r\n                }\r\n                for (i = 0; i < formatNodes.length; i++) {\r\n                    if (formatNodes[i].parentNode != formatNode.parentNode) {\r\n                        break;\r\n                    }\r\n                    if (formatNodes[i] != formatNode) {\r\n                        return false;\r\n                    }\r\n                }\r\n                return true;\r\n            },\r\n            findSuitable: function (nodes) {\r\n                var candidate = this.findFormat(nodes[0]);\r\n                if (candidate && dom.name(candidate) == this.tag) {\r\n                    return candidate;\r\n                }\r\n                return null;\r\n            }\r\n        });\r\n        var ListFormatter = Class.extend({\r\n            init: function (tag, unwrapTag) {\r\n                var that = this;\r\n                that.finder = new ListFormatFinder(tag);\r\n                that.tag = tag;\r\n                that.unwrapTag = unwrapTag;\r\n            },\r\n            isList: function (node) {\r\n                var name = dom.name(node);\r\n                return name == 'ul' || name == 'ol' || name == 'dl';\r\n            },\r\n            wrap: function (list, nodes) {\r\n                var li = dom.create(list.ownerDocument, 'li'), i, node;\r\n                for (i = 0; i < nodes.length; i++) {\r\n                    node = nodes[i];\r\n                    if (dom.is(node, 'li')) {\r\n                        list.appendChild(node);\r\n                        continue;\r\n                    }\r\n                    if (this.isList(node)) {\r\n                        while (node.firstChild) {\r\n                            list.appendChild(node.firstChild);\r\n                        }\r\n                        continue;\r\n                    }\r\n                    if (dom.is(node, 'td')) {\r\n                        while (node.firstChild) {\r\n                            li.appendChild(node.firstChild);\r\n                        }\r\n                        list.appendChild(li);\r\n                        node.appendChild(list);\r\n                        list = list.cloneNode(false);\r\n                        li = li.cloneNode(false);\r\n                        continue;\r\n                    }\r\n                    li.appendChild(node);\r\n                    if (dom.isBlock(node)) {\r\n                        list.appendChild(li);\r\n                        dom.unwrap(node);\r\n                        li = li.cloneNode(false);\r\n                    }\r\n                }\r\n                if (li.firstChild) {\r\n                    list.appendChild(li);\r\n                }\r\n            },\r\n            containsAny: function (parent, nodes) {\r\n                for (var i = 0; i < nodes.length; i++) {\r\n                    if (dom.isAncestorOrSelf(parent, nodes[i])) {\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            },\r\n            suitable: function (candidate, nodes) {\r\n                if (candidate.className == 'k-marker') {\r\n                    var sibling = candidate.nextSibling;\r\n                    if (sibling && dom.isBlock(sibling)) {\r\n                        return false;\r\n                    }\r\n                    sibling = candidate.previousSibling;\r\n                    if (sibling && dom.isBlock(sibling)) {\r\n                        return false;\r\n                    }\r\n                }\r\n                return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\r\n            },\r\n            _parentLists: function (node) {\r\n                var editable = dom.closestEditable(node);\r\n                return $(node).parentsUntil(editable, 'ul,ol');\r\n            },\r\n            split: function (range) {\r\n                var nodes = textNodes(range);\r\n                var start, end, parents;\r\n                if (nodes.length) {\r\n                    start = dom.parentOfType(nodes[0], ['li']);\r\n                    end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\r\n                    range.setStartBefore(start);\r\n                    range.setEndAfter(end);\r\n                    for (var i = 0, l = nodes.length; i < l; i++) {\r\n                        var formatNode = this.finder.findFormat(nodes[i]);\r\n                        if (formatNode) {\r\n                            parents = this._parentLists(formatNode);\r\n                            if (parents.length) {\r\n                                RangeUtils.split(range, parents.last()[0], true);\r\n                            } else {\r\n                                RangeUtils.split(range, formatNode, true);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            merge: function (tag, formatNode) {\r\n                var prev = formatNode.previousSibling, next;\r\n                while (prev && (prev.className == 'k-marker' || prev.nodeType == 3 && dom.isWhitespace(prev))) {\r\n                    prev = prev.previousSibling;\r\n                }\r\n                if (prev && dom.name(prev) == tag) {\r\n                    while (formatNode.firstChild) {\r\n                        prev.appendChild(formatNode.firstChild);\r\n                    }\r\n                    dom.remove(formatNode);\r\n                    formatNode = prev;\r\n                }\r\n                next = formatNode.nextSibling;\r\n                while (next && (next.className == 'k-marker' || next.nodeType == 3 && dom.isWhitespace(next))) {\r\n                    next = next.nextSibling;\r\n                }\r\n                if (next && dom.name(next) == tag) {\r\n                    while (formatNode.lastChild) {\r\n                        next.insertBefore(formatNode.lastChild, next.firstChild);\r\n                    }\r\n                    dom.remove(formatNode);\r\n                }\r\n            },\r\n            breakable: function (node) {\r\n                return node != node.ownerDocument.body && !/table|tbody|tr|td/.test(dom.name(node)) && !node.attributes.contentEditable;\r\n            },\r\n            applyOnSection: function (section, nodes) {\r\n                var tag = this.tag;\r\n                var commonAncestor = dom.closestSplittableParent(nodes);\r\n                var ancestors = [];\r\n                var formatNode = this.finder.findSuitable(nodes);\r\n                if (!formatNode) {\r\n                    formatNode = new ListFormatFinder(tag == 'ul' ? 'ol' : 'ul').findSuitable(nodes);\r\n                }\r\n                var childNodes;\r\n                if (/table|tbody/.test(dom.name(commonAncestor))) {\r\n                    childNodes = $.map(nodes, function (node) {\r\n                        return dom.parentOfType(node, ['td']);\r\n                    });\r\n                } else {\r\n                    childNodes = dom.significantChildNodes(commonAncestor);\r\n                    if ($.grep(childNodes, dom.isBlock).length) {\r\n                        childNodes = $.grep(childNodes, $.proxy(function (node) {\r\n                            return this.containsAny(node, nodes);\r\n                        }, this));\r\n                    }\r\n                    if (!childNodes.length) {\r\n                        childNodes = nodes;\r\n                    }\r\n                }\r\n                function pushAncestor() {\r\n                    ancestors.push(this);\r\n                }\r\n                for (var i = 0; i < childNodes.length; i++) {\r\n                    var child = childNodes[i];\r\n                    var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\r\n                    if (!suitable) {\r\n                        continue;\r\n                    }\r\n                    if (formatNode && this.isList(child)) {\r\n                        $.each(child.childNodes, pushAncestor);\r\n                        dom.remove(child);\r\n                    } else {\r\n                        ancestors.push(child);\r\n                    }\r\n                }\r\n                if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\r\n                    ancestors = [commonAncestor];\r\n                }\r\n                if (!formatNode) {\r\n                    formatNode = dom.create(commonAncestor.ownerDocument, tag);\r\n                    dom.insertBefore(formatNode, ancestors[0]);\r\n                }\r\n                this.wrap(formatNode, ancestors);\r\n                if (!dom.is(formatNode, tag)) {\r\n                    dom.changeTag(formatNode, tag);\r\n                }\r\n                this.merge(tag, formatNode);\r\n            },\r\n            apply: function (nodes) {\r\n                var i = 0, sections = [], lastSection, lastNodes, section;\r\n                do {\r\n                    section = dom.closestEditable(nodes[i], [\r\n                        'td',\r\n                        'body'\r\n                    ]);\r\n                    if (!lastSection || section != lastSection) {\r\n                        if (lastSection) {\r\n                            sections.push({\r\n                                section: lastSection,\r\n                                nodes: lastNodes\r\n                            });\r\n                        }\r\n                        lastNodes = [nodes[i]];\r\n                        lastSection = section;\r\n                    } else {\r\n                        lastNodes.push(nodes[i]);\r\n                    }\r\n                    i++;\r\n                } while (i < nodes.length);\r\n                sections.push({\r\n                    section: lastSection,\r\n                    nodes: lastNodes\r\n                });\r\n                for (i = 0; i < sections.length; i++) {\r\n                    this.applyOnSection(sections[i].section, sections[i].nodes);\r\n                }\r\n            },\r\n            unwrap: function (ul) {\r\n                var fragment = ul.ownerDocument.createDocumentFragment(), unwrapTag = this.unwrapTag, parents, li, p, child;\r\n                for (li = ul.firstChild; li; li = li.nextSibling) {\r\n                    p = dom.create(ul.ownerDocument, unwrapTag || 'p');\r\n                    while (li.firstChild) {\r\n                        child = li.firstChild;\r\n                        if (dom.isBlock(child)) {\r\n                            if (p.firstChild) {\r\n                                fragment.appendChild(p);\r\n                                p = dom.create(ul.ownerDocument, unwrapTag || 'p');\r\n                            }\r\n                            fragment.appendChild(child);\r\n                        } else {\r\n                            p.appendChild(child);\r\n                        }\r\n                    }\r\n                    if (p.firstChild) {\r\n                        fragment.appendChild(p);\r\n                    }\r\n                }\r\n                parents = this._parentLists(ul);\r\n                if (parents[0]) {\r\n                    dom.insertAfter(fragment, parents.last()[0]);\r\n                    parents.last().remove();\r\n                } else {\r\n                    dom.insertAfter(fragment, ul);\r\n                }\r\n                dom.remove(ul);\r\n            },\r\n            remove: function (nodes) {\r\n                var formatNode;\r\n                for (var i = 0, l = nodes.length; i < l; i++) {\r\n                    formatNode = this.finder.findFormat(nodes[i]);\r\n                    if (formatNode) {\r\n                        this.unwrap(formatNode);\r\n                    }\r\n                }\r\n            },\r\n            toggle: function (range) {\r\n                var that = this, nodes = textNodes(range), ancestor = range.commonAncestorContainer;\r\n                if (!nodes.length) {\r\n                    range.selectNodeContents(ancestor);\r\n                    nodes = textNodes(range);\r\n                    if (!nodes.length) {\r\n                        var text = ancestor.ownerDocument.createTextNode('');\r\n                        range.startContainer.appendChild(text);\r\n                        nodes = [text];\r\n                        range.selectNode(text.parentNode);\r\n                    }\r\n                }\r\n                if (that.finder.isFormatted(nodes)) {\r\n                    that.split(range);\r\n                    that.remove(nodes);\r\n                } else {\r\n                    that.apply(nodes);\r\n                }\r\n            }\r\n        });\r\n        var ListCommand = Command.extend({\r\n            init: function (options) {\r\n                options.formatter = new ListFormatter(options.tag);\r\n                Command.fn.init.call(this, options);\r\n            }\r\n        });\r\n        var ListTool = FormatTool.extend({\r\n            init: function (options) {\r\n                this.options = options;\r\n                FormatTool.fn.init.call(this, extend(options, { finder: new ListFormatFinder(options.tag) }));\r\n            },\r\n            command: function (commandArguments) {\r\n                return new ListCommand(extend(commandArguments, { tag: this.options.tag }));\r\n            }\r\n        });\r\n        extend(Editor, {\r\n            ListFormatFinder: ListFormatFinder,\r\n            ListFormatter: ListFormatter,\r\n            ListCommand: ListCommand,\r\n            ListTool: ListTool\r\n        });\r\n        registerTool('insertUnorderedList', new ListTool({\r\n            tag: 'ul',\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Insert unordered list'\r\n            })\r\n        }));\r\n        registerTool('insertOrderedList', new ListTool({\r\n            tag: 'ol',\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Insert ordered list'\r\n            })\r\n        }));\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('editor/link', ['editor/lists'], f);\r\n}(function () {\r\n    (function ($, undefined) {\r\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InlineFormatter = Editor.InlineFormatter, InlineFormatFinder = Editor.InlineFormatFinder, textNodes = RangeUtils.textNodes, registerTool = Editor.EditorUtils.registerTool, keys = kendo.keys;\r\n        var HTTP_PROTOCOL = 'http://';\r\n        var protocolRegExp = /^\\w*:\\/\\//;\r\n        var endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\r\n        var LinkFormatFinder = Class.extend({\r\n            findSuitable: function (sourceNode) {\r\n                return dom.parentOfType(sourceNode, ['a']);\r\n            }\r\n        });\r\n        var LinkFormatter = Class.extend({\r\n            init: function () {\r\n                this.finder = new LinkFormatFinder();\r\n            },\r\n            apply: function (range, attributes) {\r\n                var nodes = textNodes(range);\r\n                var markers, doc, formatter, a, parent;\r\n                if (attributes.innerHTML) {\r\n                    doc = RangeUtils.documentFromRange(range);\r\n                    markers = RangeUtils.getMarkers(range);\r\n                    range.deleteContents();\r\n                    a = dom.create(doc, 'a', attributes);\r\n                    range.insertNode(a);\r\n                    parent = a.parentNode;\r\n                    if (dom.name(parent) == 'a') {\r\n                        dom.insertAfter(a, parent);\r\n                    }\r\n                    if (dom.emptyNode(parent)) {\r\n                        dom.remove(parent);\r\n                    }\r\n                    var ref = a;\r\n                    for (var i = 0; i < markers.length; i++) {\r\n                        dom.insertAfter(markers[i], ref);\r\n                        ref = markers[i];\r\n                    }\r\n                    if (markers.length) {\r\n                        dom.insertBefore(doc.createTextNode('\\uFEFF'), markers[1]);\r\n                        dom.insertAfter(doc.createTextNode('\\uFEFF'), markers[1]);\r\n                        range.setStartBefore(markers[0]);\r\n                        range.setEndAfter(markers[markers.length - 1]);\r\n                    }\r\n                } else {\r\n                    formatter = new InlineFormatter([{ tags: ['a'] }], attributes);\r\n                    formatter.finder = this.finder;\r\n                    formatter.apply(nodes);\r\n                }\r\n            }\r\n        });\r\n        var UnlinkCommand = Command.extend({\r\n            init: function (options) {\r\n                options.formatter = {\r\n                    toggle: function (range) {\r\n                        new InlineFormatter([{ tags: ['a'] }]).remove(textNodes(range));\r\n                    }\r\n                };\r\n                this.options = options;\r\n                Command.fn.init.call(this, options);\r\n            }\r\n        });\r\n        var LinkCommand = Command.extend({\r\n            init: function (options) {\r\n                this.options = options;\r\n                Command.fn.init.call(this, options);\r\n                this.formatter = new LinkFormatter();\r\n                if (!options.url) {\r\n                    this.attributes = null;\r\n                    this.async = true;\r\n                } else {\r\n                    this.exec = function () {\r\n                        this.formatter.apply(options.range, {\r\n                            href: options.url,\r\n                            innerHTML: options.text || options.url,\r\n                            target: options.target\r\n                        });\r\n                    };\r\n                }\r\n            },\r\n            _dialogTemplate: function () {\r\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\">' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-url\\'>#: messages.linkWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-url\\'>' + '</div>' + '<div class=\\'k-edit-label k-editor-link-text-row\\'>' + '<label for=\\'k-editor-link-text\\'>#: messages.linkText #</label>' + '</div>' + '<div class=\\'k-edit-field k-editor-link-text-row\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-text\\'>' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-title\\'>#: messages.linkToolTip #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-title\\'>' + '</div>' + '<div class=\\'k-edit-label\\'></div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'checkbox\\' class=\\'k-checkbox\\' id=\\'k-editor-link-target\\'>' + '<label for=\\'k-editor-link-target\\' class=\\'k-checkbox-label\\'>#: messages.linkOpenInNewWindow #</label>' + '</div>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>')({ messages: this.editor.options.messages });\r\n            },\r\n            exec: function () {\r\n                var messages = this.editor.options.messages;\r\n                this._initialText = '';\r\n                this._range = this.lockRange(true);\r\n                var nodes = textNodes(this._range);\r\n                var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\r\n                var img = nodes.length && dom.name(nodes[0]) == 'img';\r\n                var dialog = this.createDialog(this._dialogTemplate(), {\r\n                    title: messages.createLink,\r\n                    close: proxy(this._close, this),\r\n                    visible: false\r\n                });\r\n                if (a) {\r\n                    this._range.selectNodeContents(a);\r\n                    nodes = textNodes(this._range);\r\n                }\r\n                this._initialText = this.linkText(nodes);\r\n                dialog.find('.k-dialog-insert').click(proxy(this._apply, this)).end().find('.k-dialog-close').click(proxy(this._close, this)).end().find('.k-edit-field input').keydown(proxy(this._keydown, this)).end().find('#k-editor-link-url').val(this.linkUrl(a)).end().find('#k-editor-link-text').val(this._initialText).end().find('#k-editor-link-title').val(a ? a.title : '').end().find('#k-editor-link-target').attr('checked', a ? a.target == '_blank' : false).end().find('.k-editor-link-text-row').toggle(!img);\r\n                this._dialog = dialog.data('kendoWindow').center().open();\r\n                $('#k-editor-link-url', dialog).focus().select();\r\n            },\r\n            _keydown: function (e) {\r\n                var keys = kendo.keys;\r\n                if (e.keyCode == keys.ENTER) {\r\n                    this._apply(e);\r\n                } else if (e.keyCode == keys.ESC) {\r\n                    this._close(e);\r\n                }\r\n            },\r\n            _apply: function (e) {\r\n                var element = this._dialog.element;\r\n                var href = $('#k-editor-link-url', element).val();\r\n                var title, text, target;\r\n                var textInput = $('#k-editor-link-text', element);\r\n                if (href && href != HTTP_PROTOCOL) {\r\n                    if (href.indexOf('@') > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\r\n                        href = 'mailto:' + href;\r\n                    }\r\n                    this.attributes = { href: href };\r\n                    title = $('#k-editor-link-title', element).val();\r\n                    if (title) {\r\n                        this.attributes.title = title;\r\n                    }\r\n                    if (textInput.is(':visible')) {\r\n                        text = textInput.val();\r\n                        if (!text && !this._initialText) {\r\n                            this.attributes.innerHTML = href;\r\n                        } else if (text && text !== this._initialText) {\r\n                            this.attributes.innerHTML = dom.stripBom(text);\r\n                        }\r\n                    }\r\n                    target = $('#k-editor-link-target', element).is(':checked');\r\n                    this.attributes.target = target ? '_blank' : null;\r\n                    this.formatter.apply(this._range, this.attributes);\r\n                }\r\n                this._close(e);\r\n                if (this.change) {\r\n                    this.change();\r\n                }\r\n            },\r\n            _close: function (e) {\r\n                e.preventDefault();\r\n                this._dialog.destroy();\r\n                dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\r\n                this.releaseRange(this._range);\r\n            },\r\n            linkUrl: function (anchor) {\r\n                if (anchor) {\r\n                    return anchor.getAttribute('href', 2);\r\n                }\r\n                return HTTP_PROTOCOL;\r\n            },\r\n            linkText: function (nodes) {\r\n                var text = '';\r\n                var i;\r\n                for (i = 0; i < nodes.length; i++) {\r\n                    text += nodes[i].nodeValue;\r\n                }\r\n                return dom.stripBom(text || '');\r\n            },\r\n            redo: function () {\r\n                var range = this.lockRange(true);\r\n                this.formatter.apply(range, this.attributes);\r\n                this.releaseRange(range);\r\n            }\r\n        });\r\n        var AutoLinkCommand = Command.extend({\r\n            init: function (options) {\r\n                Command.fn.init.call(this, options);\r\n                this.formatter = new LinkFormatter();\r\n            },\r\n            exec: function () {\r\n                var detectedLink = this.detectLink();\r\n                if (!detectedLink) {\r\n                    return;\r\n                }\r\n                var range = this.getRange();\r\n                var linkMarker = new kendo.ui.editor.Marker();\r\n                var linkRange = range.cloneRange();\r\n                linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\r\n                linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\r\n                range = this.lockRange();\r\n                linkMarker.add(linkRange);\r\n                this.formatter.apply(linkRange, { href: this._ensureWebProtocol(detectedLink.text) });\r\n                linkMarker.remove(linkRange);\r\n                this.releaseRange(range);\r\n            },\r\n            detectLink: function () {\r\n                var range = this.getRange();\r\n                var traverser = new LeftDomTextTraverser({\r\n                    node: range.startContainer,\r\n                    offset: range.startOffset,\r\n                    cancelAtNode: function (node) {\r\n                        return node && dom.name(node) === 'a';\r\n                    }\r\n                });\r\n                var detection = new DomTextLinkDetection(traverser);\r\n                return detection.detectLink();\r\n            },\r\n            changesContent: function () {\r\n                return !!this.detectLink();\r\n            },\r\n            _ensureWebProtocol: function (linkText) {\r\n                var hasProtocol = this._hasProtocolPrefix(linkText);\r\n                return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\r\n            },\r\n            _hasProtocolPrefix: function (linkText) {\r\n                return protocolRegExp.test(linkText);\r\n            },\r\n            _prefixWithWebProtocol: function (linkText) {\r\n                return HTTP_PROTOCOL + linkText;\r\n            }\r\n        });\r\n        var UnlinkTool = Tool.extend({\r\n            init: function (options) {\r\n                this.options = options;\r\n                this.finder = new InlineFormatFinder([{ tags: ['a'] }]);\r\n                Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\r\n            },\r\n            initialize: function (ui, options) {\r\n                Tool.fn.initialize.call(this, ui, options);\r\n                ui.addClass('k-state-disabled');\r\n            },\r\n            update: function (ui, nodes) {\r\n                ui.toggleClass('k-state-disabled', !this.finder.isFormatted(nodes)).removeClass('k-state-hover');\r\n            }\r\n        });\r\n        var DomTextLinkDetection = Class.extend({\r\n            init: function (traverser) {\r\n                this.traverser = traverser;\r\n                this.start = DomPos();\r\n                this.end = DomPos();\r\n                this.text = '';\r\n            },\r\n            detectLink: function () {\r\n                var node = this.traverser.node;\r\n                var offset = this.traverser.offset;\r\n                if (dom.isDataNode(node)) {\r\n                    var text = node.data.substring(0, offset);\r\n                    if (/\\s{2}$/.test(dom.stripBom(text))) {\r\n                        return;\r\n                    }\r\n                } else if (offset === 0) {\r\n                    var p = dom.closestEditableOfType(node, dom.blockElements);\r\n                    if (p && p.previousSibling) {\r\n                        this.traverser.init({ node: p.previousSibling });\r\n                    }\r\n                }\r\n                this.traverser.traverse($.proxy(this._detectEnd, this));\r\n                if (!this.end.blank()) {\r\n                    this.traverser = this.traverser.clone(this.end);\r\n                    this.traverser.traverse($.proxy(this._detectStart, this));\r\n                    if (!this._isLinkDetected()) {\r\n                        var puntuationOptions = this.traverser.extendOptions(this.start);\r\n                        var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\r\n                        puntuationTraverser.traverse($.proxy(this._skipStartPuntuation, this));\r\n                        if (!this._isLinkDetected()) {\r\n                            this.start = DomPos();\r\n                        }\r\n                    }\r\n                }\r\n                if (this.start.blank()) {\r\n                    return null;\r\n                } else {\r\n                    return {\r\n                        start: this.start,\r\n                        end: this.end,\r\n                        text: this.text\r\n                    };\r\n                }\r\n            },\r\n            _isLinkDetected: function () {\r\n                return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\r\n            },\r\n            _detectEnd: function (text, node) {\r\n                var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\r\n                if (i > -1) {\r\n                    this.end.node = node;\r\n                    this.end.offset = i + 1;\r\n                    return false;\r\n                }\r\n            },\r\n            _detectStart: function (text, node) {\r\n                var i = lastIndexOfRegExp(text, /\\s/);\r\n                var ii = i + 1;\r\n                this.text = text.substring(ii) + this.text;\r\n                this.start.node = node;\r\n                this.start.offset = ii;\r\n                if (i > -1) {\r\n                    return false;\r\n                }\r\n            },\r\n            _skipStartPuntuation: function (text, node, offset) {\r\n                var i = indexOfRegExp(text, /\\w/);\r\n                var ii = i;\r\n                if (i === -1) {\r\n                    ii = text.length;\r\n                }\r\n                this.text = this.text.substring(ii);\r\n                this.start.node = node;\r\n                this.start.offset = ii + (offset | 0);\r\n                if (i > -1) {\r\n                    return false;\r\n                }\r\n            }\r\n        });\r\n        function lastIndexOfRegExp(str, search) {\r\n            var i = str.length;\r\n            while (i-- && !search.test(str[i])) {\r\n            }\r\n            return i;\r\n        }\r\n        function indexOfRegExp(str, search) {\r\n            var r = search.exec(str);\r\n            return r ? r.index : -1;\r\n        }\r\n        var DomPos = function () {\r\n            return {\r\n                node: null,\r\n                offset: null,\r\n                blank: function () {\r\n                    return this.node === null && this.offset === null;\r\n                }\r\n            };\r\n        };\r\n        var DomTextTraverser = Class.extend({\r\n            init: function (options) {\r\n                this.node = options.node;\r\n                this.offset = options.offset === undefined ? dom.isDataNode(this.node) && this.node.length || 0 : options.offset;\r\n                this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\r\n            },\r\n            traverse: function (callback) {\r\n                if (!callback) {\r\n                    return;\r\n                }\r\n                this.cancel = false;\r\n                this._traverse(callback, this.node, this.offset);\r\n            },\r\n            _traverse: function (callback, node, offset) {\r\n                if (!node || this.cancel) {\r\n                    return;\r\n                }\r\n                if (node.nodeType === 3) {\r\n                    var text = node.data;\r\n                    if (offset !== undefined) {\r\n                        text = this.subText(text, offset);\r\n                    }\r\n                    this.cancel = callback(text, node, offset) === false;\r\n                } else {\r\n                    var edgeNode = this.edgeNode(node);\r\n                    this.cancel = this.cancel || this.cancelAtNode(edgeNode);\r\n                    return this._traverse(callback, edgeNode);\r\n                }\r\n                var next = this.next(node);\r\n                if (!next) {\r\n                    var parent = node.parentNode;\r\n                    while (!next && dom.isInline(parent)) {\r\n                        next = this.next(parent);\r\n                        parent = parent.parentNode;\r\n                    }\r\n                }\r\n                this.cancel = this.cancel || this.cancelAtNode(next);\r\n                this._traverse(callback, next);\r\n            },\r\n            extendOptions: function (o) {\r\n                return $.extend({\r\n                    node: this.node,\r\n                    offset: this.offset,\r\n                    cancelAtNode: this.cancelAtNode\r\n                }, o || {});\r\n            },\r\n            edgeNode: function (node) {\r\n            },\r\n            next: function (node) {\r\n            },\r\n            subText: function (text, offset) {\r\n            }\r\n        });\r\n        var LeftDomTextTraverser = DomTextTraverser.extend({\r\n            subText: function (text, splitIndex) {\r\n                return text.substring(0, splitIndex);\r\n            },\r\n            next: function (node) {\r\n                return node.previousSibling;\r\n            },\r\n            edgeNode: function (node) {\r\n                return node.lastChild;\r\n            },\r\n            clone: function (options) {\r\n                var o = this.extendOptions(options);\r\n                return new LeftDomTextTraverser(o);\r\n            }\r\n        });\r\n        var RightDomTextTraverser = DomTextTraverser.extend({\r\n            subText: function (text, splitIndex) {\r\n                return text.substring(splitIndex);\r\n            },\r\n            next: function (node) {\r\n                return node.nextSibling;\r\n            },\r\n            edgeNode: function (node) {\r\n                return node.firstChild;\r\n            },\r\n            clone: function (options) {\r\n                var o = this.extendOptions(options);\r\n                return new RightDomTextTraverser(o);\r\n            }\r\n        });\r\n        extend(kendo.ui.editor, {\r\n            LinkFormatFinder: LinkFormatFinder,\r\n            LinkFormatter: LinkFormatter,\r\n            UnlinkCommand: UnlinkCommand,\r\n            LinkCommand: LinkCommand,\r\n            AutoLinkCommand: AutoLinkCommand,\r\n            UnlinkTool: UnlinkTool,\r\n            DomTextLinkDetection: DomTextLinkDetection,\r\n            LeftDomTextTraverser: LeftDomTextTraverser,\r\n            RightDomTextTraverser: RightDomTextTraverser\r\n        });\r\n        registerTool('createLink', new Tool({\r\n            key: 'K',\r\n            ctrl: true,\r\n            command: LinkCommand,\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Create Link'\r\n            })\r\n        }));\r\n        registerTool('unlink', new UnlinkTool({\r\n            key: 'K',\r\n            ctrl: true,\r\n            shift: true,\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Remove Link'\r\n            })\r\n        }));\r\n        registerTool('autoLink', new Tool({\r\n            key: [\r\n                keys.ENTER,\r\n                keys.SPACEBAR\r\n            ],\r\n            keyPressCommand: true,\r\n            command: AutoLinkCommand\r\n        }));\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('editor/file', [\r\n        'kendo.filebrowser',\r\n        'editor/link'\r\n    ], f);\r\n}(function () {\r\n    (function ($, undefined) {\r\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, LinkFormatter = Editor.LinkFormatter, textNodes = RangeUtils.textNodes, keys = kendo.keys, KEDITORFILEURL = '#k-editor-file-url', KEDITORFILETITLE = '#k-editor-file-title';\r\n        var FileCommand = Command.extend({\r\n            init: function (options) {\r\n                var that = this;\r\n                Command.fn.init.call(that, options);\r\n                that.formatter = new LinkFormatter();\r\n                that.async = true;\r\n                that.attributes = {};\r\n            },\r\n            insertFile: function (file, range) {\r\n                var attributes = this.attributes;\r\n                var doc = RangeUtils.documentFromRange(range);\r\n                if (attributes.href && attributes.href != 'http://') {\r\n                    if (!file) {\r\n                        file = dom.create(doc, 'a', { href: attributes.href });\r\n                        file.innerHTML = attributes.innerHTML;\r\n                        range.deleteContents();\r\n                        range.insertNode(file);\r\n                        if (!file.nextSibling) {\r\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), file);\r\n                        }\r\n                        range.setStartAfter(file);\r\n                        range.setEndAfter(file);\r\n                        RangeUtils.selectRange(range);\r\n                        return true;\r\n                    } else {\r\n                        dom.attr(file, attributes);\r\n                    }\r\n                }\r\n                return false;\r\n            },\r\n            _dialogTemplate: function (showBrowser) {\r\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-url\">#: messages.fileWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-title\">#: messages.fileTitle #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-title\">' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>')({\r\n                    messages: this.editor.options.messages,\r\n                    showBrowser: showBrowser\r\n                });\r\n            },\r\n            redo: function () {\r\n                var that = this, range = that.lockRange();\r\n                this.formatter.apply(range, this.attributes);\r\n                that.releaseRange(range);\r\n            },\r\n            exec: function () {\r\n                var that = this, range = that.lockRange(), nodes = textNodes(range), applied = false, file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null, dialog, options = that.editor.options, messages = options.messages, fileBrowser = options.fileBrowser, showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined), dialogOptions = {\r\n                        title: messages.insertFile,\r\n                        visible: false,\r\n                        resizable: showBrowser\r\n                    };\r\n                function apply(e) {\r\n                    var element = dialog.element, href = element.find(KEDITORFILEURL).val().replace(/ /g, '%20'), innerHTML = element.find(KEDITORFILETITLE).val();\r\n                    that.attributes = {\r\n                        href: href,\r\n                        innerHTML: innerHTML !== '' ? innerHTML : href\r\n                    };\r\n                    applied = that.insertFile(file, range);\r\n                    close(e);\r\n                    if (that.change) {\r\n                        that.change();\r\n                    }\r\n                }\r\n                function close(e) {\r\n                    e.preventDefault();\r\n                    dialog.destroy();\r\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\r\n                    if (!applied) {\r\n                        that.releaseRange(range);\r\n                    }\r\n                }\r\n                function keyDown(e) {\r\n                    if (e.keyCode == keys.ENTER) {\r\n                        apply(e);\r\n                    } else if (e.keyCode == keys.ESC) {\r\n                        close(e);\r\n                    }\r\n                }\r\n                dialogOptions.close = close;\r\n                if (showBrowser) {\r\n                    dialogOptions.width = 750;\r\n                }\r\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORFILEURL).val(file ? file.getAttribute('href', 2) : 'http://').end().find(KEDITORFILETITLE).val(file ? file.title : '').end().data('kendoWindow');\r\n                if (showBrowser) {\r\n                    that._fileBrowser = new kendo.ui.FileBrowser(dialog.element.find('.k-filebrowser'), extend({}, fileBrowser, {\r\n                        change: function () {\r\n                            dialog.element.find(KEDITORFILEURL).val(this.value());\r\n                        },\r\n                        apply: apply\r\n                    }));\r\n                }\r\n                dialog.center().open();\r\n                dialog.element.find(KEDITORFILEURL).focus().select();\r\n            }\r\n        });\r\n        kendo.ui.editor.FileCommand = FileCommand;\r\n        registerTool('insertFile', new Editor.Tool({\r\n            command: FileCommand,\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Insert File'\r\n            })\r\n        }));\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('editor/image', [\r\n        'kendo.imagebrowser',\r\n        'editor/link'\r\n    ], f);\r\n}(function () {\r\n    (function ($, undefined) {\r\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, keys = kendo.keys, KEDITORIMAGEURL = '#k-editor-image-url', KEDITORIMAGETITLE = '#k-editor-image-title', KEDITORIMAGEWIDTH = '#k-editor-image-width', KEDITORIMAGEHEIGHT = '#k-editor-image-height';\r\n        var ImageCommand = Command.extend({\r\n            init: function (options) {\r\n                var that = this;\r\n                Command.fn.init.call(that, options);\r\n                that.async = true;\r\n                that.attributes = {};\r\n            },\r\n            insertImage: function (img, range) {\r\n                var attributes = this.attributes;\r\n                var doc = RangeUtils.documentFromRange(range);\r\n                if (attributes.src && attributes.src != 'http://') {\r\n                    var removeIEAttributes = function () {\r\n                        setTimeout(function () {\r\n                            if (!attributes.width) {\r\n                                img.removeAttribute('width');\r\n                            }\r\n                            if (!attributes.height) {\r\n                                img.removeAttribute('height');\r\n                            }\r\n                            img.removeAttribute('complete');\r\n                        });\r\n                    };\r\n                    if (!img) {\r\n                        img = dom.create(doc, 'img', attributes);\r\n                        img.onload = img.onerror = removeIEAttributes;\r\n                        range.deleteContents();\r\n                        range.insertNode(img);\r\n                        if (!img.nextSibling) {\r\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), img);\r\n                        }\r\n                        removeIEAttributes();\r\n                        range.setStartAfter(img);\r\n                        range.setEndAfter(img);\r\n                        RangeUtils.selectRange(range);\r\n                        return true;\r\n                    } else {\r\n                        img.onload = img.onerror = removeIEAttributes;\r\n                        dom.attr(img, attributes);\r\n                        removeIEAttributes();\r\n                    }\r\n                }\r\n                return false;\r\n            },\r\n            _dialogTemplate: function (showBrowser) {\r\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser k-imagebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-url\">#: messages.imageWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-title\">#: messages.imageAltText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-title\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-width\">#: messages.imageWidth #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-width\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-height\">#: messages.imageHeight #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-height\">' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>')({\r\n                    messages: this.editor.options.messages,\r\n                    showBrowser: showBrowser\r\n                });\r\n            },\r\n            redo: function () {\r\n                var that = this, range = that.lockRange();\r\n                if (!that.insertImage(RangeUtils.image(range), range)) {\r\n                    that.releaseRange(range);\r\n                }\r\n            },\r\n            exec: function () {\r\n                var that = this, range = that.lockRange(), applied = false, img = RangeUtils.image(range), imageWidth = img && img.getAttribute('width') || '', imageHeight = img && img.getAttribute('height') || '', dialog, options = that.editor.options, messages = options.messages, imageBrowser = options.imageBrowser, showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined), dialogOptions = {\r\n                        title: messages.insertImage,\r\n                        visible: false,\r\n                        resizable: showBrowser\r\n                    };\r\n                function apply(e) {\r\n                    var element = dialog.element, w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10), h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\r\n                    that.attributes = {\r\n                        src: element.find(KEDITORIMAGEURL).val().replace(/ /g, '%20'),\r\n                        alt: element.find(KEDITORIMAGETITLE).val()\r\n                    };\r\n                    that.attributes.width = null;\r\n                    that.attributes.height = null;\r\n                    if (!isNaN(w) && w > 0) {\r\n                        that.attributes.width = w;\r\n                    }\r\n                    if (!isNaN(h) && h > 0) {\r\n                        that.attributes.height = h;\r\n                    }\r\n                    applied = that.insertImage(img, range);\r\n                    close(e);\r\n                    if (that.change) {\r\n                        that.change();\r\n                    }\r\n                }\r\n                function close(e) {\r\n                    e.preventDefault();\r\n                    dialog.destroy();\r\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\r\n                    if (!applied) {\r\n                        that.releaseRange(range);\r\n                    }\r\n                }\r\n                function keyDown(e) {\r\n                    if (e.keyCode == keys.ENTER) {\r\n                        apply(e);\r\n                    } else if (e.keyCode == keys.ESC) {\r\n                        close(e);\r\n                    }\r\n                }\r\n                dialogOptions.close = close;\r\n                if (showBrowser) {\r\n                    dialogOptions.width = 750;\r\n                }\r\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORIMAGEURL).val(img ? img.getAttribute('src', 2) : 'http://').end().find(KEDITORIMAGETITLE).val(img ? img.alt : '').end().find(KEDITORIMAGEWIDTH).val(imageWidth).end().find(KEDITORIMAGEHEIGHT).val(imageHeight).end().data('kendoWindow');\r\n                if (showBrowser) {\r\n                    this._imageBrowser = new kendo.ui.ImageBrowser(dialog.element.find('.k-imagebrowser'), extend({}, imageBrowser, {\r\n                        change: function () {\r\n                            dialog.element.find(KEDITORIMAGEURL).val(this.value());\r\n                        },\r\n                        apply: apply\r\n                    }));\r\n                }\r\n                dialog.center().open();\r\n                dialog.element.find(KEDITORIMAGEURL).focus().select();\r\n            }\r\n        });\r\n        kendo.ui.editor.ImageCommand = ImageCommand;\r\n        registerTool('insertImage', new Editor.Tool({\r\n            command: ImageCommand,\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Insert Image'\r\n            })\r\n        }));\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('editor/components', ['editor/image'], f);\r\n}(function () {\r\n    (function ($, undefined) {\r\n        var kendo = window.kendo, DropDownList = kendo.ui.DropDownList, dom = kendo.ui.editor.Dom;\r\n        var SelectBox = DropDownList.extend({\r\n            init: function (element, options) {\r\n                var that = this;\r\n                DropDownList.fn.init.call(that, element, options);\r\n                if (kendo.support.mobileOS.ios) {\r\n                    this._initSelectOverlay();\r\n                    this.bind('dataBound', $.proxy(this._initSelectOverlay, this));\r\n                }\r\n                that.text(that.options.title);\r\n                that.bind('open', function () {\r\n                    if (that.options.autoSize) {\r\n                        var list = that.list, listWidth;\r\n                        list.css({\r\n                            whiteSpace: 'nowrap',\r\n                            width: 'auto'\r\n                        });\r\n                        listWidth = list.width();\r\n                        if (listWidth) {\r\n                            listWidth += 20;\r\n                        } else {\r\n                            listWidth = that._listWidth;\r\n                        }\r\n                        list.css('width', listWidth + kendo.support.scrollbar());\r\n                        that._listWidth = listWidth;\r\n                    }\r\n                });\r\n            },\r\n            options: {\r\n                name: 'SelectBox',\r\n                index: -1\r\n            },\r\n            _initSelectOverlay: function () {\r\n                var selectBox = this;\r\n                var value = selectBox.value();\r\n                var view = this.dataSource.view();\r\n                var item;\r\n                var html = '';\r\n                var encode = kendo.htmlEncode;\r\n                for (var i = 0; i < view.length; i++) {\r\n                    item = view[i];\r\n                    html += '<option value=\\'' + encode(item.value) + '\\'';\r\n                    if (item.value == value) {\r\n                        html += ' selected';\r\n                    }\r\n                    html += '>' + encode(item.text) + '</option>';\r\n                }\r\n                var select = $('<select class=\\'k-select-overlay\\'>' + html + '</select>');\r\n                var wrapper = $(this.element).closest('.k-widget');\r\n                wrapper.next('.k-select-overlay').remove();\r\n                select.insertAfter(wrapper);\r\n                select.on('change', function () {\r\n                    selectBox.value(this.value);\r\n                    selectBox.trigger('change');\r\n                });\r\n            },\r\n            value: function (value) {\r\n                var that = this, result = DropDownList.fn.value.call(that, value);\r\n                if (value === undefined) {\r\n                    return result;\r\n                }\r\n                if (!DropDownList.fn.value.call(that)) {\r\n                    that.text(that.options.title);\r\n                }\r\n            },\r\n            decorate: function (body) {\r\n                var that = this, dataSource = that.dataSource, items = dataSource.data(), i, tag, className, style;\r\n                if (body) {\r\n                    that.list.css('background-color', dom.getEffectiveBackground($(body)));\r\n                }\r\n                for (i = 0; i < items.length; i++) {\r\n                    tag = items[i].tag || 'span';\r\n                    className = items[i].className;\r\n                    style = dom.inlineStyle(body, tag, { className: className });\r\n                    style = style.replace(/\"/g, '\\'');\r\n                    items[i].style = style + ';display:inline-block';\r\n                }\r\n                dataSource.trigger('change');\r\n            }\r\n        });\r\n        kendo.ui.plugin(SelectBox);\r\n        kendo.ui.editor.SelectBox = SelectBox;\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('editor/indent', ['editor/components'], f);\r\n}(function () {\r\n    (function ($, undefined) {\r\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, blockElements = dom.blockElements, BlockFormatFinder = Editor.BlockFormatFinder, BlockFormatter = Editor.BlockFormatter;\r\n        function indent(node, value) {\r\n            var isRtl = $(node).css('direction') == 'rtl', indentDirection = isRtl ? 'Right' : 'Left', property = dom.name(node) != 'td' ? 'margin' + indentDirection : 'padding' + indentDirection;\r\n            if (value === undefined) {\r\n                return node.style[property] || 0;\r\n            } else {\r\n                if (value > 0) {\r\n                    node.style[property] = value + 'px';\r\n                } else {\r\n                    node.style[property] = '';\r\n                    if (!node.style.cssText) {\r\n                        node.removeAttribute('style');\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        var IndentFormatter = Class.extend({\r\n            init: function () {\r\n                this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\r\n            },\r\n            apply: function (nodes) {\r\n                var formatNodes = this.finder.findSuitable(nodes), targets = [], i, len, formatNode, parentList, sibling;\r\n                if (formatNodes.length) {\r\n                    for (i = 0, len = formatNodes.length; i < len; i++) {\r\n                        if (dom.is(formatNodes[i], 'li')) {\r\n                            if (!$(formatNodes[i]).index()) {\r\n                                targets.push(formatNodes[i].parentNode);\r\n                            } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\r\n                                targets.push(formatNodes[i]);\r\n                            }\r\n                        } else {\r\n                            targets.push(formatNodes[i]);\r\n                        }\r\n                    }\r\n                    while (targets.length) {\r\n                        formatNode = targets.shift();\r\n                        if (dom.is(formatNode, 'li')) {\r\n                            parentList = formatNode.parentNode;\r\n                            sibling = $(formatNode).prev('li');\r\n                            var siblingList = sibling.find('ul,ol').last();\r\n                            var nestedList = $(formatNode).children('ul,ol')[0];\r\n                            if (nestedList && sibling[0]) {\r\n                                if (siblingList[0]) {\r\n                                    siblingList.append(formatNode);\r\n                                    siblingList.append($(nestedList).children());\r\n                                    dom.remove(nestedList);\r\n                                } else {\r\n                                    sibling.append(nestedList);\r\n                                    nestedList.insertBefore(formatNode, nestedList.firstChild);\r\n                                }\r\n                            } else {\r\n                                nestedList = sibling.children('ul,ol')[0];\r\n                                if (!nestedList) {\r\n                                    nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList));\r\n                                    sibling.append(nestedList);\r\n                                }\r\n                                while (formatNode && formatNode.parentNode == parentList) {\r\n                                    nestedList.appendChild(formatNode);\r\n                                    formatNode = targets.shift();\r\n                                }\r\n                            }\r\n                        } else {\r\n                            var marginLeft = parseInt(indent(formatNode), 10) + 30;\r\n                            indent(formatNode, marginLeft);\r\n                            for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\r\n                                if ($.contains(formatNode, targets[targetIndex])) {\r\n                                    targets.splice(targetIndex, 1);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                } else {\r\n                    var formatter = new BlockFormatter([{ tags: ['p'] }], { style: { marginLeft: 30 } });\r\n                    formatter.apply(nodes);\r\n                }\r\n            },\r\n            remove: function (nodes) {\r\n                var formatNodes = this.finder.findSuitable(nodes), targetNode, i, len, list, listParent, siblings, formatNode, marginLeft;\r\n                for (i = 0, len = formatNodes.length; i < len; i++) {\r\n                    formatNode = $(formatNodes[i]);\r\n                    if (formatNode.is('li')) {\r\n                        list = formatNode.parent();\r\n                        listParent = list.parent();\r\n                        if (listParent.is('li,ul,ol') && !indent(list[0])) {\r\n                            if (targetNode && $.contains(targetNode, listParent[0])) {\r\n                                continue;\r\n                            }\r\n                            siblings = formatNode.nextAll('li');\r\n                            if (siblings.length) {\r\n                                $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\r\n                            }\r\n                            if (listParent.is('li')) {\r\n                                formatNode.insertAfter(listParent);\r\n                            } else {\r\n                                formatNode.appendTo(listParent);\r\n                            }\r\n                            if (!list.children('li').length) {\r\n                                list.remove();\r\n                            }\r\n                            continue;\r\n                        } else {\r\n                            if (targetNode == list[0]) {\r\n                                continue;\r\n                            }\r\n                            targetNode = list[0];\r\n                        }\r\n                    } else {\r\n                        targetNode = formatNodes[i];\r\n                    }\r\n                    marginLeft = parseInt(indent(targetNode), 10) - 30;\r\n                    indent(targetNode, marginLeft);\r\n                }\r\n            }\r\n        });\r\n        var IndentCommand = Command.extend({\r\n            init: function (options) {\r\n                options.formatter = {\r\n                    toggle: function (range) {\r\n                        new IndentFormatter().apply(RangeUtils.nodes(range));\r\n                    }\r\n                };\r\n                Command.fn.init.call(this, options);\r\n            }\r\n        });\r\n        var OutdentCommand = Command.extend({\r\n            init: function (options) {\r\n                options.formatter = {\r\n                    toggle: function (range) {\r\n                        new IndentFormatter().remove(RangeUtils.nodes(range));\r\n                    }\r\n                };\r\n                Command.fn.init.call(this, options);\r\n            }\r\n        });\r\n        var OutdentTool = Tool.extend({\r\n            init: function (options) {\r\n                Tool.fn.init.call(this, options);\r\n                this.finder = new BlockFormatFinder([{ tags: blockElements }]);\r\n            },\r\n            initialize: function (ui, options) {\r\n                Tool.fn.initialize.call(this, ui, options);\r\n                ui.addClass('k-state-disabled');\r\n            },\r\n            update: function (ui, nodes) {\r\n                var suitable = this.finder.findSuitable(nodes), isOutdentable, listParentsCount, i, len;\r\n                for (i = 0, len = suitable.length; i < len; i++) {\r\n                    isOutdentable = indent(suitable[i]);\r\n                    if (!isOutdentable) {\r\n                        listParentsCount = $(suitable[i]).parents('ul,ol').length;\r\n                        isOutdentable = dom.is(suitable[i], 'li') && (listParentsCount > 1 || indent(suitable[i].parentNode)) || dom.ofType(suitable[i], [\r\n                            'ul',\r\n                            'ol'\r\n                        ]) && listParentsCount > 0;\r\n                    }\r\n                    if (isOutdentable) {\r\n                        ui.removeClass('k-state-disabled');\r\n                        return;\r\n                    }\r\n                }\r\n                ui.addClass('k-state-disabled').removeClass('k-state-hover');\r\n            }\r\n        });\r\n        extend(Editor, {\r\n            IndentFormatter: IndentFormatter,\r\n            IndentCommand: IndentCommand,\r\n            OutdentCommand: OutdentCommand,\r\n            OutdentTool: OutdentTool\r\n        });\r\n        registerTool('indent', new Tool({\r\n            command: IndentCommand,\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Indent'\r\n            })\r\n        }));\r\n        registerTool('outdent', new OutdentTool({\r\n            command: OutdentCommand,\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Outdent'\r\n            })\r\n        }));\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('editor/viewhtml', ['editor/indent'], f);\r\n}(function () {\r\n    (function ($, undefined) {\r\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate;\r\n        var ViewHtmlCommand = Command.extend({\r\n            init: function (options) {\r\n                var cmd = this;\r\n                cmd.options = options;\r\n                Command.fn.init.call(cmd, options);\r\n                cmd.attributes = null;\r\n                cmd.async = true;\r\n            },\r\n            exec: function () {\r\n                var that = this, editor = that.editor, messages = editor.options.messages, dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body), content = ViewHtmlCommand.indent(editor.value()), textarea = '.k-editor-textarea';\r\n                function apply(e) {\r\n                    editor.value(dialog.find(textarea).val());\r\n                    close(e);\r\n                    if (that.change) {\r\n                        that.change();\r\n                    }\r\n                    editor.trigger('change');\r\n                }\r\n                function close(e) {\r\n                    e.preventDefault();\r\n                    dialog.data('kendoWindow').destroy();\r\n                    editor.focus();\r\n                }\r\n                this.createDialog(dialog, {\r\n                    title: messages.viewHtml,\r\n                    close: close,\r\n                    visible: false\r\n                }).find(textarea).val(content).end().find('.k-dialog-update').click(apply).end().find('.k-dialog-close').click(close).end().data('kendoWindow').center().open();\r\n                dialog.find(textarea).focus();\r\n            }\r\n        });\r\n        extend(ViewHtmlCommand, {\r\n            template: '<div class=\\'k-editor-dialog k-popup-edit-form k-edit-form-container k-viewhtml-dialog\\'>' + '<textarea class=\\'k-editor-textarea k-input\\'></textarea>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\\'k-dialog-update k-button k-primary\\'>#: dialogUpdate #</button>' + '<button class=\\'k-dialog-close k-button\\'>#: dialogCancel #</button>' + '</div>' + '</div>',\r\n            indent: function (content) {\r\n                return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi, '</$1>\\n').replace(/<(ul|ol)([^>]*)><li/gi, '<$1$2>\\n<li').replace(/<br \\/>/gi, '<br />\\n').replace(/\\n$/, '');\r\n            }\r\n        });\r\n        kendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\r\n        Editor.EditorUtils.registerTool('viewHtml', new Tool({\r\n            command: ViewHtmlCommand,\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'View HTML'\r\n            })\r\n        }));\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('editor/formatting', ['editor/viewhtml'], f);\r\n}(function () {\r\n    (function ($) {\r\n        var kendo = window.kendo, Editor = kendo.ui.editor, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, DelayedExecutionTool = Editor.DelayedExecutionTool, Command = Editor.Command, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, registerTool = EditorUtils.registerTool;\r\n        var FormattingTool = DelayedExecutionTool.extend({\r\n            init: function (options) {\r\n                var that = this;\r\n                Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\r\n                that.type = 'kendoSelectBox';\r\n                that.finder = {\r\n                    getFormat: function () {\r\n                        return '';\r\n                    }\r\n                };\r\n            },\r\n            options: {\r\n                items: [\r\n                    {\r\n                        text: 'Paragraph',\r\n                        value: 'p'\r\n                    },\r\n                    {\r\n                        text: 'Quotation',\r\n                        value: 'blockquote'\r\n                    },\r\n                    {\r\n                        text: 'Heading 1',\r\n                        value: 'h1'\r\n                    },\r\n                    {\r\n                        text: 'Heading 2',\r\n                        value: 'h2'\r\n                    },\r\n                    {\r\n                        text: 'Heading 3',\r\n                        value: 'h3'\r\n                    },\r\n                    {\r\n                        text: 'Heading 4',\r\n                        value: 'h4'\r\n                    },\r\n                    {\r\n                        text: 'Heading 5',\r\n                        value: 'h5'\r\n                    },\r\n                    {\r\n                        text: 'Heading 6',\r\n                        value: 'h6'\r\n                    }\r\n                ],\r\n                width: 110\r\n            },\r\n            toFormattingItem: function (item) {\r\n                var value = item.value;\r\n                if (!value) {\r\n                    return item;\r\n                }\r\n                if (item.tag || item.className) {\r\n                    return item;\r\n                }\r\n                var dot = value.indexOf('.');\r\n                if (dot === 0) {\r\n                    item.className = value.substring(1);\r\n                } else if (dot == -1) {\r\n                    item.tag = value;\r\n                } else {\r\n                    item.tag = value.substring(0, dot);\r\n                    item.className = value.substring(dot + 1);\r\n                }\r\n                return item;\r\n            },\r\n            command: function (args) {\r\n                var item = args.value;\r\n                item = this.toFormattingItem(item);\r\n                return new Editor.FormatCommand({\r\n                    range: args.range,\r\n                    formatter: function () {\r\n                        var formatter, tags = (item.tag || item.context || 'span').split(','), format = [{\r\n                                    tags: tags,\r\n                                    attr: { className: item.className || '' }\r\n                                }];\r\n                        if ($.inArray(tags[0], dom.inlineElements) >= 0) {\r\n                            formatter = new Editor.GreedyInlineFormatter(format);\r\n                        } else {\r\n                            formatter = new Editor.GreedyBlockFormatter(format);\r\n                        }\r\n                        return formatter;\r\n                    }\r\n                });\r\n            },\r\n            initialize: function (ui, initOptions) {\r\n                var editor = initOptions.editor;\r\n                var options = this.options;\r\n                var toolName = options.name;\r\n                var that = this;\r\n                ui.width(options.width);\r\n                ui.kendoSelectBox({\r\n                    dataTextField: 'text',\r\n                    dataValueField: 'value',\r\n                    dataSource: options.items || editor.options[toolName],\r\n                    title: editor.options.messages[toolName],\r\n                    autoSize: true,\r\n                    change: function () {\r\n                        var dataItem = this.dataItem();\r\n                        if (dataItem) {\r\n                            Tool.exec(editor, toolName, dataItem.toJSON());\r\n                        }\r\n                    },\r\n                    dataBound: function () {\r\n                        var i, items = this.dataSource.data();\r\n                        for (i = 0; i < items.length; i++) {\r\n                            items[i] = that.toFormattingItem(items[i]);\r\n                        }\r\n                    },\r\n                    highlightFirst: false,\r\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\r\n                });\r\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\r\n            },\r\n            getFormattingValue: function (items, nodes) {\r\n                for (var i = 0; i < items.length; i++) {\r\n                    var item = items[i];\r\n                    var tag = item.tag || item.context || '';\r\n                    var className = item.className ? '.' + item.className : '';\r\n                    var selector = tag + className;\r\n                    var element = $(nodes[0]).closest(selector)[0];\r\n                    if (!element) {\r\n                        continue;\r\n                    }\r\n                    if (nodes.length == 1) {\r\n                        return item.value;\r\n                    }\r\n                    for (var n = 1; n < nodes.length; n++) {\r\n                        if (!$(nodes[n]).closest(selector)[0]) {\r\n                            break;\r\n                        } else if (n == nodes.length - 1) {\r\n                            return item.value;\r\n                        }\r\n                    }\r\n                }\r\n                return '';\r\n            },\r\n            update: function (ui, nodes) {\r\n                var selectBox = $(ui).data(this.type);\r\n                if (!selectBox) {\r\n                    return;\r\n                }\r\n                var dataSource = selectBox.dataSource, items = dataSource.data(), i, context, ancestor = dom.commonAncestor.apply(null, nodes);\r\n                if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\r\n                    return;\r\n                } else {\r\n                    this._ancestor = ancestor;\r\n                }\r\n                for (i = 0; i < items.length; i++) {\r\n                    context = items[i].context;\r\n                    items[i].visible = !context || !!$(ancestor).closest(context).length;\r\n                }\r\n                dataSource.filter([{\r\n                        field: 'visible',\r\n                        operator: 'eq',\r\n                        value: true\r\n                    }]);\r\n                DelayedExecutionTool.fn.update.call(this, ui, nodes);\r\n                selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\r\n                selectBox.wrapper.toggleClass('k-state-disabled', !dataSource.view().length);\r\n            },\r\n            destroy: function () {\r\n                this._ancestor = null;\r\n            }\r\n        });\r\n        var CleanFormatCommand = Command.extend({\r\n            exec: function () {\r\n                var range = this.lockRange(true);\r\n                this.tagsToClean = this.options.remove || 'strong,em,span,sup,sub,del,b,i,u,font'.split(',');\r\n                RangeUtils.wrapSelectedElements(range);\r\n                var nodes = RangeUtils.mapAll(range, function (node) {\r\n                    return node;\r\n                });\r\n                for (var c = nodes.length - 1; c >= 0; c--) {\r\n                    this.clean(nodes[c]);\r\n                }\r\n                this.releaseRange(range);\r\n            },\r\n            clean: function (node) {\r\n                if (!node || dom.isMarker(node)) {\r\n                    return;\r\n                }\r\n                var name = dom.name(node);\r\n                if (name == 'ul' || name == 'ol') {\r\n                    var listFormatter = new Editor.ListFormatter(name);\r\n                    var prev = node.previousSibling;\r\n                    var next = node.nextSibling;\r\n                    listFormatter.unwrap(node);\r\n                    for (; prev && prev != next; prev = prev.nextSibling) {\r\n                        this.clean(prev);\r\n                    }\r\n                } else if (name == 'blockquote') {\r\n                    dom.changeTag(node, 'p');\r\n                } else if (node.nodeType == 1 && !dom.insignificant(node)) {\r\n                    for (var i = node.childNodes.length - 1; i >= 0; i--) {\r\n                        this.clean(node.childNodes[i]);\r\n                    }\r\n                    node.removeAttribute('style');\r\n                    node.removeAttribute('class');\r\n                } else {\r\n                    unwrapListItem(node);\r\n                }\r\n                if ($.inArray(name, this.tagsToClean) > -1) {\r\n                    dom.unwrap(node);\r\n                }\r\n            }\r\n        });\r\n        function unwrapListItem(node) {\r\n            var li = dom.closestEditableOfType(node, ['li']);\r\n            if (li) {\r\n                var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\r\n                var range = kendo.ui.editor.W3CRange.fromNode(node);\r\n                range.selectNode(li);\r\n                listFormatter.toggle(range);\r\n            }\r\n        }\r\n        $.extend(Editor, {\r\n            FormattingTool: FormattingTool,\r\n            CleanFormatCommand: CleanFormatCommand\r\n        });\r\n        registerTool('formatting', new FormattingTool({\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.dropDownListTemplate,\r\n                title: 'Format'\r\n            })\r\n        }));\r\n        registerTool('cleanFormatting', new Tool({\r\n            command: CleanFormatCommand,\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Clean formatting'\r\n            })\r\n        }));\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('editor/toolbar', ['editor/formatting'], f);\r\n}(function () {\r\n    (function ($, undefined) {\r\n        var kendo = window.kendo;\r\n        var ui = kendo.ui;\r\n        var editorNS = ui.editor;\r\n        var Widget = ui.Widget;\r\n        var extend = $.extend;\r\n        var proxy = $.proxy;\r\n        var keys = kendo.keys;\r\n        var NS = '.kendoEditor';\r\n        var EditorUtils = kendo.ui.editor.EditorUtils;\r\n        var ToolTemplate = kendo.ui.editor.ToolTemplate;\r\n        var Tool = kendo.ui.editor.Tool;\r\n        var OVERFLOWANCHOR = 'overflowAnchor';\r\n        var focusable = '.k-tool-group:visible a.k-tool:not(.k-state-disabled),' + '.k-tool.k-overflow-anchor,' + '.k-tool-group:visible .k-widget.k-colorpicker,' + '.k-tool-group:visible .k-selectbox,' + '.k-tool-group:visible .k-dropdown,' + '.k-tool-group:visible .k-combobox .k-input';\r\n        var OverflowAnchorTool = Tool.extend({\r\n            initialize: function (ui, options) {\r\n                ui.attr({ unselectable: 'on' });\r\n                var toolbar = options.editor.toolbar;\r\n                ui.on('click', $.proxy(function () {\r\n                    this.overflowPopup.toggle();\r\n                }, toolbar));\r\n            },\r\n            options: { name: OVERFLOWANCHOR },\r\n            command: $.noop,\r\n            update: $.noop,\r\n            destroy: $.noop\r\n        });\r\n        EditorUtils.registerTool(OVERFLOWANCHOR, new OverflowAnchorTool({\r\n            key: '',\r\n            ctrl: true,\r\n            template: new ToolTemplate({ template: EditorUtils.overflowAnchorTemplate })\r\n        }));\r\n        var Toolbar = Widget.extend({\r\n            init: function (element, options) {\r\n                var that = this;\r\n                options = extend({}, options, { name: 'EditorToolbar' });\r\n                Widget.fn.init.call(that, element, options);\r\n                if (options.popup) {\r\n                    that._initPopup();\r\n                }\r\n                if (options.resizable && options.resizable.toolbar) {\r\n                    that._resizeHandler = kendo.onResize(function () {\r\n                        that.resize();\r\n                    });\r\n                    that.element.addClass('k-toolbar-resizable');\r\n                }\r\n            },\r\n            events: ['execute'],\r\n            groups: {\r\n                basic: [\r\n                    'bold',\r\n                    'italic',\r\n                    'underline',\r\n                    'strikethrough'\r\n                ],\r\n                scripts: [\r\n                    'subscript',\r\n                    'superscript'\r\n                ],\r\n                alignment: [\r\n                    'justifyLeft',\r\n                    'justifyCenter',\r\n                    'justifyRight',\r\n                    'justifyFull'\r\n                ],\r\n                links: [\r\n                    'insertImage',\r\n                    'insertFile',\r\n                    'createLink',\r\n                    'unlink'\r\n                ],\r\n                lists: [\r\n                    'insertUnorderedList',\r\n                    'insertOrderedList',\r\n                    'indent',\r\n                    'outdent'\r\n                ],\r\n                tables: [\r\n                    'createTable',\r\n                    'addColumnLeft',\r\n                    'addColumnRight',\r\n                    'addRowAbove',\r\n                    'addRowBelow',\r\n                    'deleteRow',\r\n                    'deleteColumn'\r\n                ],\r\n                advanced: [\r\n                    'viewHtml',\r\n                    'cleanFormatting',\r\n                    'print',\r\n                    'pdf'\r\n                ],\r\n                fonts: [\r\n                    'fontName',\r\n                    'fontSize'\r\n                ],\r\n                colors: [\r\n                    'foreColor',\r\n                    'backColor'\r\n                ]\r\n            },\r\n            overflowFlaseTools: [\r\n                'formatting',\r\n                'fontName',\r\n                'fontSize',\r\n                'foreColor',\r\n                'backColor',\r\n                'insertHtml'\r\n            ],\r\n            _initPopup: function () {\r\n                this.window = $(this.element).wrap('<div class=\\'editorToolbarWindow k-header\\' />').parent().prepend('<button class=\\'k-button k-button-bare k-editortoolbar-dragHandle\\'><span class=\\'k-icon k-i-move\\' /></button>').kendoWindow({\r\n                    title: false,\r\n                    resizable: false,\r\n                    draggable: { dragHandle: '.k-editortoolbar-dragHandle' },\r\n                    animation: {\r\n                        open: { effects: 'fade:in' },\r\n                        close: { effects: 'fade:out' }\r\n                    },\r\n                    minHeight: 42,\r\n                    visible: false,\r\n                    autoFocus: false,\r\n                    actions: [],\r\n                    dragend: function () {\r\n                        this._moved = true;\r\n                    }\r\n                }).on('mousedown', function (e) {\r\n                    if (!$(e.target).is('.k-icon')) {\r\n                        e.preventDefault();\r\n                    }\r\n                }).data('kendoWindow');\r\n            },\r\n            _toggleOverflowStyles: function (element, show) {\r\n                element.find('li').toggleClass('k-item k-state-default', show).find('.k-tool:not(.k-state-disabled),.k-overflow-button').toggleClass('k-overflow-button k-button', show);\r\n            },\r\n            _initOverflowPopup: function (ui) {\r\n                var that = this;\r\n                var popupTemplate = '<ul class=\\'k-editor-overflow-popup k-overflow-container k-list-container\\'></ul>';\r\n                that.overflowPopup = $(popupTemplate).appendTo('body').kendoPopup({\r\n                    anchor: ui,\r\n                    origin: 'bottom right',\r\n                    position: 'top right',\r\n                    copyAnchorStyles: false,\r\n                    open: function (e) {\r\n                        if (this.element.is(':empty')) {\r\n                            e.preventDefault();\r\n                        }\r\n                        that._toggleOverflowStyles(this.element, true);\r\n                    },\r\n                    activate: proxy(that.focusOverflowPopup, that)\r\n                }).data('kendoPopup');\r\n            },\r\n            items: function () {\r\n                var isResizable = this.options.resizable && this.options.resizable.toolbar, popup, result;\r\n                result = this.element.children().find('> *, select');\r\n                if (isResizable) {\r\n                    popup = this.overflowPopup;\r\n                    result = result.add(popup.element.children().find('> *'));\r\n                }\r\n                return result;\r\n            },\r\n            focused: function () {\r\n                return this.element.find('.k-state-focused').length > 0;\r\n            },\r\n            toolById: function (name) {\r\n                var id, tools = this.tools;\r\n                for (id in tools) {\r\n                    if (id.toLowerCase() == name) {\r\n                        return tools[id];\r\n                    }\r\n                }\r\n            },\r\n            toolGroupFor: function (toolName) {\r\n                var i, groups = this.groups;\r\n                if (this.isCustomTool(toolName)) {\r\n                    return 'custom';\r\n                }\r\n                for (i in groups) {\r\n                    if ($.inArray(toolName, groups[i]) >= 0) {\r\n                        return i;\r\n                    }\r\n                }\r\n            },\r\n            bindTo: function (editor) {\r\n                var that = this, window = that.window;\r\n                if (that._editor) {\r\n                    that._editor.unbind('select', proxy(that.resize, that));\r\n                }\r\n                that._editor = editor;\r\n                if (that.options.resizable && that.options.resizable.toolbar) {\r\n                    editor.options.tools.push(OVERFLOWANCHOR);\r\n                }\r\n                that.tools = that.expandTools(editor.options.tools);\r\n                that.render();\r\n                that.element.find('.k-combobox .k-input').keydown(function (e) {\r\n                    var combobox = $(this).closest('.k-combobox').data('kendoComboBox'), key = e.keyCode;\r\n                    if (key == keys.RIGHT || key == keys.LEFT) {\r\n                        combobox.close();\r\n                    } else if (key == keys.DOWN) {\r\n                        if (!combobox.dropDown.isOpened()) {\r\n                            e.stopImmediatePropagation();\r\n                            combobox.open();\r\n                        }\r\n                    }\r\n                });\r\n                that._attachEvents();\r\n                that.items().each(function initializeTool() {\r\n                    var toolName = that._toolName(this), tool = toolName !== 'more' ? that.tools[toolName] : that.tools.overflowAnchor, options = tool && tool.options, messages = editor.options.messages, description = options && options.tooltip || messages[toolName], ui = $(this);\r\n                    if (!tool || !tool.initialize) {\r\n                        return;\r\n                    }\r\n                    if (toolName == 'fontSize' || toolName == 'fontName') {\r\n                        var inheritText = messages[toolName + 'Inherit'];\r\n                        ui.find('input').val(inheritText).end().find('span.k-input').text(inheritText).end();\r\n                    }\r\n                    tool.initialize(ui, {\r\n                        title: that._appendShortcutSequence(description, tool),\r\n                        editor: that._editor\r\n                    });\r\n                    ui.closest('.k-widget', that.element).addClass('k-editor-widget');\r\n                    ui.closest('.k-colorpicker', that.element).next('.k-colorpicker').addClass('k-editor-widget');\r\n                });\r\n                editor.bind('select', proxy(that.resize, that));\r\n                that.update();\r\n                if (window) {\r\n                    window.wrapper.css({\r\n                        top: '',\r\n                        left: '',\r\n                        width: ''\r\n                    });\r\n                }\r\n            },\r\n            show: function () {\r\n                var that = this, window = that.window, editorOptions = that.options.editor, wrapper, editorElement, editorOffset;\r\n                if (window) {\r\n                    wrapper = window.wrapper;\r\n                    editorElement = editorOptions.element;\r\n                    if (!wrapper.is(':visible') || !that.window.options.visible) {\r\n                        if (!wrapper[0].style.width) {\r\n                            wrapper.width(editorElement.outerWidth() - parseInt(wrapper.css('border-left-width'), 10) - parseInt(wrapper.css('border-right-width'), 10));\r\n                        }\r\n                        if (!window._moved) {\r\n                            editorOffset = editorElement.offset();\r\n                            wrapper.css({\r\n                                top: Math.max(0, parseInt(editorOffset.top, 10) - wrapper.outerHeight() - parseInt(that.window.element.css('padding-bottom'), 10)),\r\n                                left: Math.max(0, parseInt(editorOffset.left, 10))\r\n                            });\r\n                        }\r\n                        window.open();\r\n                    }\r\n                }\r\n            },\r\n            hide: function () {\r\n                if (this.window) {\r\n                    this.window.close();\r\n                }\r\n            },\r\n            focus: function () {\r\n                var TABINDEX = 'tabIndex';\r\n                var element = this.element;\r\n                var tabIndex = this._editor.element.attr(TABINDEX);\r\n                element.attr(TABINDEX, tabIndex || 0).focus().find(focusable).first().focus();\r\n                if (!tabIndex && tabIndex !== 0) {\r\n                    element.removeAttr(TABINDEX);\r\n                }\r\n            },\r\n            focusOverflowPopup: function () {\r\n                var TABINDEX = 'tabIndex';\r\n                var element = this.overflowPopup.element;\r\n                var tabIndex = this._editor.element.attr(TABINDEX);\r\n                element.closest('.k-animation-container').addClass('k-overflow-wrapper');\r\n                element.attr(TABINDEX, tabIndex || 0).find(focusable).first().focus();\r\n                if (!tabIndex && tabIndex !== 0) {\r\n                    element.removeAttr(TABINDEX);\r\n                }\r\n            },\r\n            _appendShortcutSequence: function (localizedText, tool) {\r\n                if (!tool.key) {\r\n                    return localizedText;\r\n                }\r\n                var res = localizedText + ' (';\r\n                if (tool.ctrl) {\r\n                    res += 'Ctrl + ';\r\n                }\r\n                if (tool.shift) {\r\n                    res += 'Shift + ';\r\n                }\r\n                if (tool.alt) {\r\n                    res += 'Alt + ';\r\n                }\r\n                res += tool.key + ')';\r\n                return res;\r\n            },\r\n            _nativeTools: [\r\n                'insertLineBreak',\r\n                'insertParagraph',\r\n                'redo',\r\n                'undo',\r\n                'autoLink'\r\n            ],\r\n            tools: {},\r\n            isCustomTool: function (toolName) {\r\n                return !(toolName in kendo.ui.Editor.defaultTools);\r\n            },\r\n            expandTools: function (tools) {\r\n                var currentTool, i, nativeTools = this._nativeTools, options, defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools), result = {}, name;\r\n                for (i = 0; i < tools.length; i++) {\r\n                    currentTool = tools[i];\r\n                    name = currentTool.name;\r\n                    if ($.isPlainObject(currentTool)) {\r\n                        if (name && defaultTools[name]) {\r\n                            result[name] = extend({}, defaultTools[name]);\r\n                            extend(result[name].options, currentTool);\r\n                        } else {\r\n                            options = extend({\r\n                                cssClass: 'k-i-custom',\r\n                                type: 'button',\r\n                                title: ''\r\n                            }, currentTool);\r\n                            if (!options.name) {\r\n                                options.name = 'custom';\r\n                            }\r\n                            options.cssClass = 'k-' + (options.name == 'custom' ? 'i-custom' : options.name);\r\n                            if (!options.template && options.type == 'button') {\r\n                                options.template = editorNS.EditorUtils.buttonTemplate;\r\n                                options.title = options.title || options.tooltip;\r\n                            }\r\n                            result[name] = { options: options };\r\n                        }\r\n                    } else if (defaultTools[currentTool]) {\r\n                        result[currentTool] = defaultTools[currentTool];\r\n                    }\r\n                }\r\n                for (i = 0; i < nativeTools.length; i++) {\r\n                    if (!result[nativeTools[i]]) {\r\n                        result[nativeTools[i]] = defaultTools[nativeTools[i]];\r\n                    }\r\n                }\r\n                return result;\r\n            },\r\n            render: function () {\r\n                var that = this, tools = that.tools, options, template, toolElement, toolName, editorElement = that._editor.element, element = that.element.empty(), groupName, newGroupName, toolConfig = that._editor.options.tools, browser = kendo.support.browser, group, i, groupPosition = 0, resizable = that.options.resizable && that.options.resizable.toolbar, overflowFlaseTools = this.overflowFlaseTools;\r\n                function stringify(template) {\r\n                    var result;\r\n                    if (template.getHtml) {\r\n                        result = template.getHtml();\r\n                    } else {\r\n                        if (!$.isFunction(template)) {\r\n                            template = kendo.template(template);\r\n                        }\r\n                        result = template(options);\r\n                    }\r\n                    return $.trim(result);\r\n                }\r\n                function endGroup() {\r\n                    if (group.children().length) {\r\n                        if (resizable) {\r\n                            group.data('position', groupPosition);\r\n                            groupPosition++;\r\n                        }\r\n                        group.appendTo(element);\r\n                    }\r\n                }\r\n                function startGroup(toolName) {\r\n                    if (toolName !== OVERFLOWANCHOR) {\r\n                        group = $('<li class=\\'k-tool-group\\' role=\\'presentation\\' />');\r\n                        group.data('overflow', $.inArray(toolName, overflowFlaseTools) === -1 ? true : false);\r\n                    } else {\r\n                        group = $('<li class=\\'k-overflow-tools\\' />');\r\n                    }\r\n                }\r\n                element.empty();\r\n                if (toolConfig.length) {\r\n                    toolName = toolConfig[0].name || toolConfig[0];\r\n                }\r\n                startGroup(toolName, overflowFlaseTools);\r\n                for (i = 0; i < toolConfig.length; i++) {\r\n                    toolName = toolConfig[i].name || toolConfig[i];\r\n                    options = tools[toolName] && tools[toolName].options;\r\n                    if (!options && $.isPlainObject(toolName)) {\r\n                        options = toolName;\r\n                    }\r\n                    template = options && options.template;\r\n                    if (toolName == 'break') {\r\n                        endGroup();\r\n                        $('<li class=\\'k-row-break\\' />').appendTo(that.element);\r\n                        startGroup(toolName, overflowFlaseTools);\r\n                    }\r\n                    if (!template) {\r\n                        continue;\r\n                    }\r\n                    newGroupName = that.toolGroupFor(toolName);\r\n                    if (groupName != newGroupName || toolName == OVERFLOWANCHOR) {\r\n                        endGroup();\r\n                        startGroup(toolName, overflowFlaseTools);\r\n                        groupName = newGroupName;\r\n                    }\r\n                    template = stringify(template);\r\n                    toolElement = $(template).appendTo(group);\r\n                    if (newGroupName == 'custom') {\r\n                        endGroup();\r\n                        startGroup(toolName, overflowFlaseTools);\r\n                    }\r\n                    if (options.exec && toolElement.hasClass('k-tool')) {\r\n                        toolElement.click(proxy(options.exec, editorElement[0]));\r\n                    }\r\n                }\r\n                endGroup();\r\n                $(that.element).children(':has(> .k-tool)').addClass('k-button-group');\r\n                if (that.options.popup && browser.msie && browser.version < 9) {\r\n                    that.window.wrapper.find('*').attr('unselectable', 'on');\r\n                }\r\n                that.updateGroups();\r\n                if (resizable) {\r\n                    that._initOverflowPopup(that.element.find('.k-overflow-anchor'));\r\n                }\r\n                that.angular('compile', function () {\r\n                    return { elements: that.element };\r\n                });\r\n            },\r\n            updateGroups: function () {\r\n                $(this.element).children().each(function () {\r\n                    $(this).children().filter(function () {\r\n                        return !$(this).hasClass('k-state-disabled');\r\n                    }).removeClass('k-group-end').first().addClass('k-group-start').end().last().addClass('k-group-end').end();\r\n                });\r\n            },\r\n            decorateFrom: function (body) {\r\n                this.items().filter('.k-decorated').each(function () {\r\n                    var selectBox = $(this).data('kendoSelectBox');\r\n                    if (selectBox) {\r\n                        selectBox.decorate(body);\r\n                    }\r\n                });\r\n            },\r\n            destroy: function () {\r\n                Widget.fn.destroy.call(this);\r\n                var id, tools = this.tools;\r\n                for (id in tools) {\r\n                    if (tools[id].destroy) {\r\n                        tools[id].destroy();\r\n                    }\r\n                }\r\n                if (this.window) {\r\n                    this.window.destroy();\r\n                }\r\n                if (this._resizeHandler) {\r\n                    kendo.unbindResize(this._resizeHandler);\r\n                }\r\n                if (this.overflowPopup) {\r\n                    this.overflowPopup.destroy();\r\n                }\r\n            },\r\n            _attachEvents: function () {\r\n                var that = this, buttons = '[role=button].k-tool', enabledButtons = buttons + ':not(.k-state-disabled)', disabledButtons = buttons + '.k-state-disabled', popupElement = that.overflowPopup ? that.overflowPopup.element : $([]);\r\n                that.element.add(popupElement).off(NS).on('mouseenter' + NS, enabledButtons, function () {\r\n                    $(this).addClass('k-state-hover');\r\n                }).on('mouseleave' + NS, enabledButtons, function () {\r\n                    $(this).removeClass('k-state-hover');\r\n                }).on('mousedown' + NS, buttons, function (e) {\r\n                    e.preventDefault();\r\n                }).on('keydown' + NS, focusable, function (e) {\r\n                    var current = this;\r\n                    var resizable = that.options.resizable && that.options.resizable.toolbar;\r\n                    var focusElement, currentContainer, keyCode = e.keyCode;\r\n                    function move(direction, container, constrain) {\r\n                        var tools = container.find(focusable);\r\n                        var index = tools.index(current) + direction;\r\n                        if (constrain) {\r\n                            index = Math.max(0, Math.min(tools.length - 1, index));\r\n                        }\r\n                        return tools[index];\r\n                    }\r\n                    if (keyCode == keys.RIGHT || keyCode == keys.LEFT) {\r\n                        if (!$(current).hasClass('.k-dropdown')) {\r\n                            focusElement = move(keyCode == keys.RIGHT ? 1 : -1, that.element, true);\r\n                        }\r\n                    } else if (resizable && (keyCode == keys.UP || keyCode == keys.DOWN)) {\r\n                        focusElement = move(keyCode == keys.DOWN ? 1 : -1, that.overflowPopup.element, true);\r\n                    } else if (keyCode == keys.ESC) {\r\n                        if (that.overflowPopup.visible()) {\r\n                            that.overflowPopup.close();\r\n                        }\r\n                        focusElement = that._editor;\r\n                    } else if (keyCode == keys.TAB && !(e.ctrlKey || e.altKey)) {\r\n                        if (resizable) {\r\n                            currentContainer = $(current.parentElement).hasClass('k-overflow-tool-group') ? that.overflowPopup.element : that.element;\r\n                        } else {\r\n                            currentContainer = that.element;\r\n                        }\r\n                        if (e.shiftKey) {\r\n                            focusElement = move(-1, currentContainer);\r\n                        } else {\r\n                            focusElement = move(1, currentContainer);\r\n                            if (!focusElement) {\r\n                                focusElement = that._editor;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (focusElement) {\r\n                        e.preventDefault();\r\n                        focusElement.focus();\r\n                    }\r\n                }).on('click' + NS, enabledButtons, function (e) {\r\n                    var button = $(this);\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                    button.removeClass('k-state-hover');\r\n                    if (!button.is('[data-popup]')) {\r\n                        that._editor.exec(that._toolName(this));\r\n                    }\r\n                }).on('click' + NS, disabledButtons, function (e) {\r\n                    e.preventDefault();\r\n                });\r\n            },\r\n            _toolName: function (element) {\r\n                if (!element) {\r\n                    return;\r\n                }\r\n                var className = element.className;\r\n                if (/k-tool\\b/i.test(className)) {\r\n                    className = element.firstChild.className;\r\n                }\r\n                var tool = $.grep(className.split(' '), function (x) {\r\n                    return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(x);\r\n                });\r\n                return tool[0] ? tool[0].substring(tool[0].lastIndexOf('-') + 1) : 'custom';\r\n            },\r\n            refreshTools: function () {\r\n                var that = this, editor = that._editor, range = editor.getRange(), nodes = kendo.ui.editor.RangeUtils.textNodes(range);\r\n                if (!nodes.length) {\r\n                    nodes = [range.startContainer];\r\n                }\r\n                that.items().each(function () {\r\n                    var tool = that.tools[that._toolName(this)];\r\n                    if (tool && tool.update) {\r\n                        tool.update($(this), nodes);\r\n                    }\r\n                });\r\n                this.update();\r\n            },\r\n            update: function () {\r\n                this.updateGroups();\r\n            },\r\n            _resize: function (e) {\r\n                var containerWidth = e.width;\r\n                var resizable = this.options.resizable && this.options.resizable.toolbar;\r\n                var popup = this.overflowPopup;\r\n                this.refreshTools();\r\n                if (!resizable) {\r\n                    return;\r\n                }\r\n                if (popup.visible()) {\r\n                    popup.close(true);\r\n                }\r\n                this._refreshWidths();\r\n                this._shrink(containerWidth);\r\n                this._stretch(containerWidth);\r\n                this._toggleOverflowStyles(this.element, false);\r\n                this._toggleOverflowStyles(this.overflowPopup.element, true);\r\n                this.element.children('li.k-overflow-tools').css('visibility', popup.element.is(':empty') ? 'hidden' : 'visible');\r\n            },\r\n            _refreshWidths: function () {\r\n                this.element.children('li').each(function (idx, element) {\r\n                    var group = $(element);\r\n                    group.data('outerWidth', group.outerWidth(true));\r\n                });\r\n            },\r\n            _shrink: function (width) {\r\n                var group, visibleGroups;\r\n                if (width < this._groupsWidth()) {\r\n                    visibleGroups = this._visibleGroups().filter(':not(.k-overflow-tools)');\r\n                    for (var i = visibleGroups.length - 1; i >= 0; i--) {\r\n                        group = visibleGroups.eq(i);\r\n                        if (width > this._groupsWidth()) {\r\n                            break;\r\n                        } else {\r\n                            this._hideGroup(group);\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            _stretch: function (width) {\r\n                var group, hiddenGroups;\r\n                if (width > this._groupsWidth()) {\r\n                    hiddenGroups = this._hiddenGroups();\r\n                    for (var i = 0; i < hiddenGroups.length; i++) {\r\n                        group = hiddenGroups.eq(i);\r\n                        if (width < this._groupsWidth() || !this._showGroup(group, width)) {\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            _hiddenGroups: function () {\r\n                var popup = this.overflowPopup;\r\n                var hiddenGroups = this.element.children('li.k-tool-group').filter(':hidden');\r\n                hiddenGroups = hiddenGroups.add(popup.element.children('li'));\r\n                hiddenGroups.sort(function (a, b) {\r\n                    return $(a).data('position') > $(b).data('position') ? 1 : -1;\r\n                });\r\n                return hiddenGroups;\r\n            },\r\n            _visibleGroups: function () {\r\n                return this.element.children('li.k-tool-group, li.k-overflow-tools').filter(':visible');\r\n            },\r\n            _groupsWidth: function () {\r\n                var width = 0;\r\n                this._visibleGroups().each(function () {\r\n                    width += $(this).data('outerWidth');\r\n                });\r\n                return Math.ceil(width);\r\n            },\r\n            _hideGroup: function (group) {\r\n                if (group.data('overflow')) {\r\n                    var popup = this.overflowPopup;\r\n                    group.detach().prependTo(popup.element).addClass('k-overflow-tool-group');\r\n                } else {\r\n                    group.hide();\r\n                }\r\n            },\r\n            _showGroup: function (group, width) {\r\n                var position, previous;\r\n                if (group.length && width > this._groupsWidth() + group.data('outerWidth')) {\r\n                    if (group.hasClass('k-overflow-tool-group')) {\r\n                        position = group.data('position');\r\n                        if (position === 0) {\r\n                            group.detach().prependTo(this.element);\r\n                        } else {\r\n                            previous = this.element.children().filter(function (idx, element) {\r\n                                return $(element).data('position') === position - 1;\r\n                            });\r\n                            group.detach().insertAfter(previous);\r\n                        }\r\n                        group.removeClass('k-overflow-tool-group');\r\n                    } else {\r\n                        group.show();\r\n                    }\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n        });\r\n        $.extend(editorNS, { Toolbar: Toolbar });\r\n    }(window.jQuery || window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('editor/tables', ['editor/toolbar'], f);\r\n}(function () {\r\n    (function ($, undefined) {\r\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, Command = Editor.Command, NS = '.kendoEditor', ACTIVESTATE = 'k-state-active', SELECTEDSTATE = 'k-state-selected', Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InsertHtmlCommand = Editor.InsertHtmlCommand, BlockFormatFinder = Editor.BlockFormatFinder, registerTool = Editor.EditorUtils.registerTool;\r\n        var editableCell = '<td>' + Editor.emptyElementContent + '</td>';\r\n        var tableFormatFinder = new BlockFormatFinder([{ tags: ['table'] }]);\r\n        var TableCommand = InsertHtmlCommand.extend({\r\n            _tableHtml: function (rows, columns) {\r\n                rows = rows || 1;\r\n                columns = columns || 1;\r\n                return '<table class=\\'k-table\\' data-last>' + new Array(rows + 1).join('<tr>' + new Array(columns + 1).join(editableCell) + '</tr>') + '</table>';\r\n            },\r\n            postProcess: function (editor, range) {\r\n                var insertedTable = $('table[data-last]', editor.document).removeAttr('data-last');\r\n                range.setStart(insertedTable.find('td')[0], 0);\r\n                range.collapse(true);\r\n                editor.selectRange(range);\r\n            },\r\n            exec: function () {\r\n                var options = this.options;\r\n                options.html = this._tableHtml(options.rows, options.columns);\r\n                options.postProcess = this.postProcess;\r\n                InsertHtmlCommand.fn.exec.call(this);\r\n            }\r\n        });\r\n        var PopupTool = Tool.extend({\r\n            initialize: function (ui, options) {\r\n                Tool.fn.initialize.call(this, ui, options);\r\n                var popup = $(this.options.popupTemplate).appendTo('body').kendoPopup({\r\n                    anchor: ui,\r\n                    copyAnchorStyles: false,\r\n                    open: proxy(this._open, this),\r\n                    activate: proxy(this._activate, this),\r\n                    close: proxy(this._close, this)\r\n                }).data('kendoPopup');\r\n                ui.click(proxy(this._toggle, this)).keydown(proxy(this._keydown, this));\r\n                this._editor = options.editor;\r\n                this._popup = popup;\r\n            },\r\n            popup: function () {\r\n                return this._popup;\r\n            },\r\n            _activate: $.noop,\r\n            _open: function () {\r\n                this._popup.options.anchor.addClass(ACTIVESTATE);\r\n            },\r\n            _close: function () {\r\n                this._popup.options.anchor.removeClass(ACTIVESTATE);\r\n            },\r\n            _keydown: function (e) {\r\n                var keys = kendo.keys;\r\n                var key = e.keyCode;\r\n                if (key == keys.DOWN && e.altKey) {\r\n                    this._popup.open();\r\n                } else if (key == keys.ESC) {\r\n                    this._popup.close();\r\n                }\r\n            },\r\n            _toggle: function (e) {\r\n                var button = $(e.target).closest('.k-tool');\r\n                if (!button.hasClass('k-state-disabled')) {\r\n                    this.popup().toggle();\r\n                }\r\n            },\r\n            update: function (ui) {\r\n                var popup = this.popup();\r\n                if (popup.wrapper && popup.wrapper.css('display') == 'block') {\r\n                    popup.close();\r\n                }\r\n                ui.removeClass('k-state-hover');\r\n            },\r\n            destroy: function () {\r\n                this._popup.destroy();\r\n            }\r\n        });\r\n        var InsertTableTool = PopupTool.extend({\r\n            init: function (options) {\r\n                this.cols = 8;\r\n                this.rows = 6;\r\n                PopupTool.fn.init.call(this, $.extend(options, {\r\n                    command: TableCommand,\r\n                    popupTemplate: '<div class=\\'k-ct-popup\\'>' + new Array(this.cols * this.rows + 1).join('<span class=\\'k-ct-cell k-state-disabled\\' />') + '<div class=\\'k-status\\'></div>' + '</div>'\r\n                }));\r\n            },\r\n            _activate: function () {\r\n                var that = this, element = that._popup.element, cells = element.find('.k-ct-cell'), firstCell = cells.eq(0), lastCell = cells.eq(cells.length - 1), start = kendo.getOffset(firstCell), end = kendo.getOffset(lastCell), cols = that.cols, rows = that.rows, cellWidth, cellHeight;\r\n                element.find('*').addBack().attr('unselectable', 'on');\r\n                end.left += lastCell[0].offsetWidth;\r\n                end.top += lastCell[0].offsetHeight;\r\n                cellWidth = (end.left - start.left) / cols;\r\n                cellHeight = (end.top - start.top) / rows;\r\n                function tableFromLocation(e) {\r\n                    var w = $(window);\r\n                    return {\r\n                        row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\r\n                        col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\r\n                    };\r\n                }\r\n                element.on('mousemove' + NS, function (e) {\r\n                    that._setTableSize(tableFromLocation(e));\r\n                }).on('mouseleave' + NS, function () {\r\n                    that._setTableSize();\r\n                }).on('mouseup' + NS, function (e) {\r\n                    that._exec(tableFromLocation(e));\r\n                });\r\n            },\r\n            _valid: function (size) {\r\n                return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\r\n            },\r\n            _exec: function (size) {\r\n                if (this._valid(size)) {\r\n                    this._editor.exec('createTable', {\r\n                        rows: size.row,\r\n                        columns: size.col\r\n                    });\r\n                    this._popup.close();\r\n                }\r\n            },\r\n            _setTableSize: function (size) {\r\n                var element = this._popup.element;\r\n                var status = element.find('.k-status');\r\n                var cells = element.find('.k-ct-cell');\r\n                var cols = this.cols;\r\n                var messages = this._editor.options.messages;\r\n                if (this._valid(size)) {\r\n                    status.text(kendo.format(messages.createTableHint, size.row, size.col));\r\n                    cells.each(function (i) {\r\n                        $(this).toggleClass(SELECTEDSTATE, i % cols < size.col && i / cols < size.row);\r\n                    });\r\n                } else {\r\n                    status.text(messages.dialogCancel);\r\n                    cells.removeClass(SELECTEDSTATE);\r\n                }\r\n            },\r\n            _keydown: function (e) {\r\n                PopupTool.fn._keydown.call(this, e);\r\n                if (!this._popup.visible()) {\r\n                    return;\r\n                }\r\n                var keys = kendo.keys;\r\n                var key = e.keyCode;\r\n                var cells = this._popup.element.find('.k-ct-cell');\r\n                var focus = Math.max(cells.filter('.k-state-selected').last().index(), 0);\r\n                var selectedRows = Math.floor(focus / this.cols);\r\n                var selectedColumns = focus % this.cols;\r\n                var changed = false;\r\n                if (key == keys.DOWN && !e.altKey) {\r\n                    changed = true;\r\n                    selectedRows++;\r\n                } else if (key == keys.UP) {\r\n                    changed = true;\r\n                    selectedRows--;\r\n                } else if (key == keys.RIGHT) {\r\n                    changed = true;\r\n                    selectedColumns++;\r\n                } else if (key == keys.LEFT) {\r\n                    changed = true;\r\n                    selectedColumns--;\r\n                }\r\n                var tableSize = {\r\n                    row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\r\n                    col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\r\n                };\r\n                if (key == keys.ENTER) {\r\n                    this._exec(tableSize);\r\n                } else {\r\n                    this._setTableSize(tableSize);\r\n                }\r\n                if (changed) {\r\n                    e.preventDefault();\r\n                    e.stopImmediatePropagation();\r\n                }\r\n            },\r\n            _open: function () {\r\n                var messages = this._editor.options.messages;\r\n                PopupTool.fn._open.call(this);\r\n                this.popup().element.find('.k-status').text(messages.dialogCancel).end().find('.k-ct-cell').removeClass(SELECTEDSTATE);\r\n            },\r\n            _close: function () {\r\n                PopupTool.fn._close.call(this);\r\n                this.popup().element.off(NS);\r\n            },\r\n            update: function (ui, nodes) {\r\n                var isFormatted;\r\n                PopupTool.fn.update.call(this, ui);\r\n                isFormatted = tableFormatFinder.isFormatted(nodes);\r\n                ui.toggleClass('k-state-disabled', isFormatted);\r\n            }\r\n        });\r\n        var InsertRowCommand = Command.extend({\r\n            exec: function () {\r\n                var range = this.lockRange(true), td = range.endContainer, cellCount, row, newRow;\r\n                while (dom.name(td) != 'td') {\r\n                    td = td.parentNode;\r\n                }\r\n                row = td.parentNode;\r\n                cellCount = row.children.length;\r\n                newRow = row.cloneNode(true);\r\n                for (var i = 0; i < row.cells.length; i++) {\r\n                    newRow.cells[i].innerHTML = Editor.emptyElementContent;\r\n                }\r\n                if (this.options.position == 'before') {\r\n                    dom.insertBefore(newRow, row);\r\n                } else {\r\n                    dom.insertAfter(newRow, row);\r\n                }\r\n                this.releaseRange(range);\r\n            }\r\n        });\r\n        var InsertColumnCommand = Command.extend({\r\n            exec: function () {\r\n                var range = this.lockRange(true), td = dom.closest(range.endContainer, 'td'), table = dom.closest(td, 'table'), columnIndex, i, rows = table.rows, cell, newCell, position = this.options.position;\r\n                columnIndex = dom.findNodeIndex(td, true);\r\n                for (i = 0; i < rows.length; i++) {\r\n                    cell = rows[i].cells[columnIndex];\r\n                    newCell = cell.cloneNode();\r\n                    newCell.innerHTML = Editor.emptyElementContent;\r\n                    if (position == 'before') {\r\n                        dom.insertBefore(newCell, cell);\r\n                    } else {\r\n                        dom.insertAfter(newCell, cell);\r\n                    }\r\n                }\r\n                this.releaseRange(range);\r\n            }\r\n        });\r\n        var DeleteRowCommand = Command.extend({\r\n            exec: function () {\r\n                var range = this.lockRange();\r\n                var rows = RangeUtils.mapAll(range, function (node) {\r\n                    return $(node).closest('tr')[0];\r\n                });\r\n                var table = dom.closest(rows[0], 'table');\r\n                var focusElement;\r\n                if (table.rows.length <= rows.length) {\r\n                    focusElement = dom.next(table);\r\n                    if (!focusElement || dom.insignificant(focusElement)) {\r\n                        focusElement = dom.prev(table);\r\n                    }\r\n                    dom.remove(table);\r\n                } else {\r\n                    for (var i = 0; i < rows.length; i++) {\r\n                        var row = rows[i];\r\n                        dom.removeTextSiblings(row);\r\n                        focusElement = dom.next(row) || dom.prev(row);\r\n                        focusElement = focusElement.cells[0];\r\n                        dom.remove(row);\r\n                    }\r\n                }\r\n                if (focusElement) {\r\n                    range.setStart(focusElement, 0);\r\n                    range.collapse(true);\r\n                    this.editor.selectRange(range);\r\n                }\r\n            }\r\n        });\r\n        var DeleteColumnCommand = Command.extend({\r\n            exec: function () {\r\n                var range = this.lockRange(), td = dom.closest(range.endContainer, 'td'), table = dom.closest(td, 'table'), rows = table.rows, columnIndex = dom.findNodeIndex(td, true), columnCount = rows[0].cells.length, focusElement, i;\r\n                if (columnCount == 1) {\r\n                    focusElement = dom.next(table);\r\n                    if (!focusElement || dom.insignificant(focusElement)) {\r\n                        focusElement = dom.prev(table);\r\n                    }\r\n                    dom.remove(table);\r\n                } else {\r\n                    dom.removeTextSiblings(td);\r\n                    focusElement = dom.next(td) || dom.prev(td);\r\n                    for (i = 0; i < rows.length; i++) {\r\n                        dom.remove(rows[i].cells[columnIndex]);\r\n                    }\r\n                }\r\n                if (focusElement) {\r\n                    range.setStart(focusElement, 0);\r\n                    range.collapse(true);\r\n                    this.editor.selectRange(range);\r\n                }\r\n            }\r\n        });\r\n        var TableModificationTool = Tool.extend({\r\n            command: function (options) {\r\n                options = extend(options, this.options);\r\n                if (options.action == 'delete') {\r\n                    if (options.type == 'row') {\r\n                        return new DeleteRowCommand(options);\r\n                    } else {\r\n                        return new DeleteColumnCommand(options);\r\n                    }\r\n                } else {\r\n                    if (options.type == 'row') {\r\n                        return new InsertRowCommand(options);\r\n                    } else {\r\n                        return new InsertColumnCommand(options);\r\n                    }\r\n                }\r\n            },\r\n            initialize: function (ui, options) {\r\n                Tool.fn.initialize.call(this, ui, options);\r\n                ui.addClass('k-state-disabled');\r\n            },\r\n            update: function (ui, nodes) {\r\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\r\n                ui.toggleClass('k-state-disabled', isFormatted);\r\n            }\r\n        });\r\n        extend(kendo.ui.editor, {\r\n            PopupTool: PopupTool,\r\n            TableCommand: TableCommand,\r\n            InsertTableTool: InsertTableTool,\r\n            TableModificationTool: TableModificationTool,\r\n            InsertRowCommand: InsertRowCommand,\r\n            InsertColumnCommand: InsertColumnCommand,\r\n            DeleteRowCommand: DeleteRowCommand,\r\n            DeleteColumnCommand: DeleteColumnCommand\r\n        });\r\n        registerTool('createTable', new InsertTableTool({\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                popup: true,\r\n                title: 'Create table'\r\n            })\r\n        }));\r\n        registerTool('addColumnLeft', new TableModificationTool({\r\n            type: 'column',\r\n            position: 'before',\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Add column on the left'\r\n            })\r\n        }));\r\n        registerTool('addColumnRight', new TableModificationTool({\r\n            type: 'column',\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Add column on the right'\r\n            })\r\n        }));\r\n        registerTool('addRowAbove', new TableModificationTool({\r\n            type: 'row',\r\n            position: 'before',\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Add row above'\r\n            })\r\n        }));\r\n        registerTool('addRowBelow', new TableModificationTool({\r\n            type: 'row',\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Add row below'\r\n            })\r\n        }));\r\n        registerTool('deleteRow', new TableModificationTool({\r\n            type: 'row',\r\n            action: 'delete',\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Delete row'\r\n            })\r\n        }));\r\n        registerTool('deleteColumn', new TableModificationTool({\r\n            type: 'column',\r\n            action: 'delete',\r\n            template: new ToolTemplate({\r\n                template: EditorUtils.buttonTemplate,\r\n                title: 'Delete column'\r\n            })\r\n        }));\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('kendo.editor', [\r\n        'kendo.combobox',\r\n        'kendo.dropdownlist',\r\n        'kendo.resizable',\r\n        'kendo.window',\r\n        'kendo.colorpicker',\r\n        'kendo.imagebrowser',\r\n        'util/undoredostack',\r\n        'editor/main',\r\n        'editor/dom',\r\n        'editor/serializer',\r\n        'editor/range',\r\n        'editor/system',\r\n        'editor/inlineformat',\r\n        'editor/formatblock',\r\n        'editor/linebreak',\r\n        'editor/lists',\r\n        'editor/link',\r\n        'editor/file',\r\n        'editor/image',\r\n        'editor/components',\r\n        'editor/indent',\r\n        'editor/viewhtml',\r\n        'editor/formatting',\r\n        'editor/toolbar',\r\n        'editor/tables'\r\n    ], f);\r\n}(function () {\r\n    var __meta__ = {\r\n        id: 'editor',\r\n        name: 'Editor',\r\n        category: 'web',\r\n        description: 'Rich text editor component',\r\n        depends: [\r\n            'combobox',\r\n            'dropdownlist',\r\n            'window',\r\n            'colorpicker'\r\n        ],\r\n        features: [\r\n            {\r\n                id: 'editor-imagebrowser',\r\n                name: 'Image Browser',\r\n                description: 'Support for uploading and inserting images',\r\n                depends: ['imagebrowser']\r\n            },\r\n            {\r\n                id: 'editor-resizable',\r\n                name: 'Resize handle',\r\n                description: 'Support for resizing the content area via a resize handle',\r\n                depends: ['resizable']\r\n            },\r\n            {\r\n                id: 'editor-pdf-export',\r\n                name: 'PDF export',\r\n                description: 'Export Editor content as PDF',\r\n                depends: [\r\n                    'pdf',\r\n                    'drawing'\r\n                ]\r\n            }\r\n        ]\r\n    };\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));"],"sourceRoot":"/source/"}